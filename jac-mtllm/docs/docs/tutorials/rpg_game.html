<!DOCTYPE html><html><head><title>MTLLM API Documentation | Creating a Level Generator for an RPG Game</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;

        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;

        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;

        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><script src="https://cdn.jsdelivr.net/npm/mermaid@8.11.2/dist/mermaid.min.js"></script><script>mermaid.initialize({"startOnLoad":true});
                        window.addEventListener('navigation', () => { mermaid.init(); });
                        console.log('Mermaid Plugin Initialized');</script><link href="/mtllm/docs/assets/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/mtllm/docs/assets/codedoc-bundle.js"></script></head><body><div class="header-0-0-9"><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><a class="github-button" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="false" data-show-count="true" data-size="false" href="https://github.com/Jaseci-Labs/mtllm/">Star</a><br><br></div><div id="-codedoc-container" class="container"><h1 id="creating-a-level-generator-for-an-rpg-game" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Creating a Level Generator for an RPG Game</h1><p>Procedurally generated maps in video games has become a hot topic in the recent years among the gaming community. the algorithms for generating these maps are extremely complected, and requires months of development to build such algorithms. Instead of symbolically written programs, what if we can use generative models to generate these maps?</p><p>In this Tutorial we will show you how you can generate game maps for a simple game where the map can be expressed using a list of strings.</p><h2 id="what-is-a-level" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>What is a level?</h2><p>A level can be represented in this hypothetical game using a list of strings shown below.</p><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span></span></span><div class="line-0-0-6  -codedoc-code-line" data-content="glob level = [  'BBBBBBBBBB'," id="code1-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>glob level <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token string">'BBBBBBBBBB'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                'B....E...B'," id="code1-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token string">'B....E...B'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                'B.P......B'," id="code1-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token string">'B.P......B'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                'B.....B..B'," id="code1-l4"><span class="lineCounter-0-0-3 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token string">'B.....B..B'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                'B.....BE.B'," id="code1-l5"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token string">'B.....BE.B'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                'B....BBBBB'," id="code1-l6"><span class="lineCounter-0-0-3 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token string">'B....BBBBB'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                'B....B...B'," id="code1-l7"><span class="lineCounter-0-0-3 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token string">'B....B...B'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                'B.....E..B'," id="code1-l8"><span class="lineCounter-0-0-3 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token string">'B.....E..B'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                'BBBBBBBBBB'   ];" id="code1-l9"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token string">'BBBBBBBBBB'</span>   <span class="token punctuation">]</span><span class="token punctuation">;</span></div><br></code></pre><p>In this level each character represent a different element in the map,</p><ul><li>'B': Walls</li><li>'.': Floor</li><li>'E': Enemy</li><li>'P': Player</li></ul><h2 id="building-a-level-map-generator" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Building a level map generator?</h2><p>The straightforward approach to build a map generator is to ask from the LLM to directly generate such a map as a list of strings. MTLLM allows you to do this by defining a function or a method. However, here we would discuss a more object oriented way of programming with LLMs which allow the model to 'think' using objects.</p><h3 id="level-configuration" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Level Configuration</h3><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span>level_manager.jac</span></span><div class="line-0-0-6  -codedoc-code-line" data-content="obj Level {" id="code2-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>obj Level <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    has name: str," id="code2-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    has name<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        difficulty: int;" id="code2-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        difficulty<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    has width: int," id="code2-l4"><span class="lineCounter-0-0-3 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    has width<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        height: int," id="code2-l5"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        height<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        num_wall: int," id="code2-l6"><span class="lineCounter-0-0-3 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        num_wall<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        num_enemies: int;" id="code2-l7"><span class="lineCounter-0-0-3 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        num_enemies<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    has time_countdown: int," id="code2-l8"><span class="lineCounter-0-0-3 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    has time_countdown<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        n_retries_allowed: int;" id="code2-l9"><span class="lineCounter-0-0-3 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        n_retries_allowed<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="}" id="code2-l10"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre><p>Each level should have a basic configuration which describes the level in an abstract format. This level object embeds the difficulty of the level and the number of enemies and obstacles including other level configuration parameters.</p><p>However, filling in the values for fields requires a cognitive capacity, for which will use an LLM later on.</p><h3 id="building-the-map-elements" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Building the Map Elements</h3><ul><li><strong>A coordinate system</strong></li></ul><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span>level_manager.jac</span></span><div class="line-0-0-6  -codedoc-code-line" data-content="obj Position {" id="code3-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>obj Position <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    has x: int," id="code3-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    has x<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        y: int;" id="code3-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        y<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="}" id="code3-l4"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre><p>As the map we are aiming to generate is a 2D map the position of each object on the map can be designated using the <code>Position</code> custom type. It is simply representing a cartesian 2D coordinate system.</p><ul><li><strong>Object to Represent a Wall</strong></li></ul><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span>level_manager.jac</span></span><div class="line-0-0-6  -codedoc-code-line" data-content="obj Wall {" id="code4-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>obj Wall <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    has start_pos: Position," id="code4-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    has start_pos<span class="token punctuation">:</span> Position<span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        end_pos: Position;" id="code4-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        end_pos<span class="token punctuation">:</span> Position<span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="}" id="code4-l4"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre><p>The wall object represents a straight wall, as all obstacles in the 2D map can be represented by a collection of intersecting wall objects. Here each wall object will have a start position as well as a stop position</p><ul><li><strong>Map represented using objects</strong></li></ul><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span>level_manager.jac</span></span><div class="line-0-0-6  -codedoc-code-line" data-content="obj Map {" id="code5-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>obj Map <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    has level: Level;" id="code5-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    has level<span class="token punctuation">:</span> Level<span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    has walls: list[Wall]," id="code5-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    has walls<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span>Wall<span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        small_obstacles: list[Position];" id="code5-l4"><span class="lineCounter-0-0-3 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        small_obstacles<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span>Position<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    has enemies: list[Position];" id="code5-l5"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    has enemies<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span>Position<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    has player_pos: Position;" id="code5-l6"><span class="lineCounter-0-0-3 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    has player_pos<span class="token punctuation">:</span> Position<span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="}" id="code5-l7"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre><p>This Map object will hold the exact positions of all objects in the map. This is the object that we will generate using MT-LLM. Each field of this object is one of or a derivative of the custom types which we described above.</p><h3 id="the-level-manager" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>The Level Manager</h3><p>To manage all the generations we can define a Level manager object which can hold a directory of previous levels configurations and maps, which can be used to feed the LLM to give context about the play style of the player. We will be using the OpenAI GPT-4o as the LLM in this tutorial.</p><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span>level_manager.jac</span></span><div class="line-0-0-6  -codedoc-code-line" data-content="import from mtllm.llms, OpenAI;" id="code6-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">import</span><span class="token punctuation">:</span>py <span class="token keyword">from</span> mtllm<span class="token punctuation">.</span>llms<span class="token punctuation">,</span> OpenAI<span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="glob llm = OpenAI(model_name=&quot;gpt-4o&quot;);" id="code6-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>glob llm <span class="token operator">=</span> OpenAI<span class="token punctuation">(</span>model_name<span class="token operator">=</span><span class="token string">"gpt-4o"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code6-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="obj LevelManager {" id="code6-l4"><span class="lineCounter-0-0-3 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>obj LevelManager <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    has current_level: int = 0," id="code6-l5"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    has current_level<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        current_difficulty: int = 1," id="code6-l6"><span class="lineCounter-0-0-3 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        current_difficulty<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        prev_levels: list[Level] = []," id="code6-l7"><span class="lineCounter-0-0-3 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        prev_levels<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span>Level<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        prev_level_maps: list[Map] = [];" id="code6-l8"><span class="lineCounter-0-0-3 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        prev_level_maps<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span>Map<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code6-l9"><span class="lineCounter-0-0-3 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    '''Generates the Next level configuration based upon previous playthroughs'''" id="code6-l10"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token triple-quoted-string string">'''Generates the Next level configuration based upon previous playthroughs'''</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    can create_next_level( last_levels: list[Level]," id="code6-l11"><span class="lineCounter-0-0-3 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    can create_next_level<span class="token punctuation">(</span> last_levels<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span>Level<span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                           difficulty: int," id="code6-l12"><span class="lineCounter-0-0-3 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                           difficulty<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                           level_width: int," id="code6-l13"><span class="lineCounter-0-0-3 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                           level_width<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                           level_height: int) -> Level by llm(temperature=1.0);" id="code6-l14"><span class="lineCounter-0-0-3 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                           level_height<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Level by llm<span class="token punctuation">(</span>temperature<span class="token operator">=</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code6-l15"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    '''Get the Next Level'''" id="code6-l16"><span class="lineCounter-0-0-3 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token triple-quoted-string string">'''Get the Next Level'''</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    can get_next_level -> tuple(Level, Map);" id="code6-l17"><span class="lineCounter-0-0-3 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    can get_next_level <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span>Level<span class="token punctuation">,</span> Map<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code6-l18"><span class="lineCounter-0-0-3 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    '''Generate the Map as a List of Strings'''" id="code6-l19"><span class="lineCounter-0-0-3 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token triple-quoted-string string">'''Generate the Map as a List of Strings'''</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    can get_map(map: Map) -> list[str];" id="code6-l20"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    can get_map<span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">:</span> Map<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="}" id="code6-l21"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre><p>We have three methods defined under the level manager. Each will handle a separate set of tasks.</p><ul><li><p><code>create_next_level</code> : Takes in previous level configuration data from previously played levels and generate the new level configuration parameters and output a <code>Level</code> object which describes the new map, using the LLM.</p></li><li><p><code>get_next_level</code> : Uses the <code>create_next_level</code> to generate the <code>Level</code> config. object which is then used to fill in the rest of a newly initiated <code>Map</code> object using an LLM. This is where the actual map generation happens. Still the generated map cannot be visualize.</p></li><li><p><code>get_map</code> : This method will generate the actual list of strings which can be used with an actual game using the <code>Map</code> object generated by <code>get_next_level</code> method. This does not require any LLM as all objects of the map are included in the <code>Map</code> object with their exact positions.</p></li></ul><p>The implementation of the above methods are as follows.</p><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span>level_manager.jac</span></span><div class="line-0-0-6  -codedoc-code-line" data-content=":obj:LevelManager:can:get_next_level {" id="code7-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">:</span>obj<span class="token punctuation">:</span>LevelManager<span class="token punctuation">:</span>can<span class="token punctuation">:</span>get_next_level <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    self.current_level += 1;" id="code7-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    self<span class="token punctuation">.</span>current_level <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    # Keeping Only the Last 3 Levels" id="code7-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment"># Keeping Only the Last 3 Levels</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    if len(self.prev_levels) > 3 {" id="code7-l4"><span class="lineCounter-0-0-3 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>prev_levels<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.prev_levels.pop(0);" id="code7-l5"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>prev_levels<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.prev_level_maps.pop(0);" id="code7-l6"><span class="lineCounter-0-0-3 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>prev_level_maps<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    }" id="code7-l7"><span class="lineCounter-0-0-3 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    # Generating the New Level" id="code7-l8"><span class="lineCounter-0-0-3 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment"># Generating the New Level</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    new_level = self.create_next_level(" id="code7-l9"><span class="lineCounter-0-0-3 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    new_level <span class="token operator">=</span> self<span class="token punctuation">.</span>create_next_level<span class="token punctuation">(</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.prev_levels," id="code7-l10"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>prev_levels<span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.current_difficulty," id="code7-l11"><span class="lineCounter-0-0-3 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>current_difficulty<span class="token punctuation">,</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        20, 20" id="code7-l12"><span class="lineCounter-0-0-3 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    );" id="code7-l13"><span class="lineCounter-0-0-3 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    self.prev_levels.append(new_level);" id="code7-l14"><span class="lineCounter-0-0-3 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    self<span class="token punctuation">.</span>prev_levels<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_level<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    # Generating the Map of the New Level" id="code7-l15"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment"># Generating the Map of the New Level</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    new_level_map = Map(level=new_level by llm());" id="code7-l16"><span class="lineCounter-0-0-3 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    new_level_map <span class="token operator">=</span> Map<span class="token punctuation">(</span>level<span class="token operator">=</span>new_level by llm<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    self.prev_level_maps.append(new_level_map);" id="code7-l17"><span class="lineCounter-0-0-3 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    self<span class="token punctuation">.</span>prev_level_maps<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_level_map<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    # Increasing the Difficulty for end of every 2 Levels" id="code7-l18"><span class="lineCounter-0-0-3 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment"># Increasing the Difficulty for end of every 2 Levels</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    if self.current_level % 2 == 0 {" id="code7-l19"><span class="lineCounter-0-0-3 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">if</span> self<span class="token punctuation">.</span>current_level <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        self.current_difficulty += 1;" id="code7-l20"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        self<span class="token punctuation">.</span>current_difficulty <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    }" id="code7-l21"><span class="lineCounter-0-0-3 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    return (new_level, new_level_map);" id="code7-l22"><span class="lineCounter-0-0-3 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>new_level<span class="token punctuation">,</span> new_level_map<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="}" id="code7-l23"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre><p>In the <code>get_next_level</code> method there are two llm calls which we will discuss in this tutorial while other parts are related the functionality of the game.</p><ul><li><p><code>Line 9-13</code> : Here the saved data from previous levels are given as inputs which are defined previously along with the basic level config parameters of the new level. As the output type of this method was specified above to be a <code>Level</code> object the LLM will initiate and fill in the values of the objects. As the LLM hyperparameter temperature, is set for 1.0 at method declaration, the LLM is forced to be more creative.</p></li><li><p><code>Line 14</code> : Here the programmer is initiating a Map object while passing in only the level parameter with the newly generated <code>level</code> object and ask the LLM to fill in the rest of the fields by generating the relevant types. This nested type approach ensures the output is formatted according to how you expect them to be.</p></li></ul><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span>level_manager.jac</span></span><div class="line-0-0-6  -codedoc-code-line" data-content=":obj:LevelManager:can:get_map {" id="code8-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">:</span>obj<span class="token punctuation">:</span>LevelManager<span class="token punctuation">:</span>can<span class="token punctuation">:</span>get_map <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    map_tiles = [['.' for _ in range(map.level.width)] for _ in range(map.level.height)];" id="code8-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    map_tiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'.'</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">.</span>level<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">.</span>level<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    for wall in map.walls {" id="code8-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> wall <span class="token keyword">in</span> <span class="token builtin">map</span><span class="token punctuation">.</span>walls <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        for x in range(wall.start_pos.x, wall.end_pos.x + 1) {" id="code8-l4"><span class="lineCounter-0-0-3 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>wall<span class="token punctuation">.</span>start_pos<span class="token punctuation">.</span>x<span class="token punctuation">,</span> wall<span class="token punctuation">.</span>end_pos<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            for y in range(wall.start_pos.y, wall.end_pos.y + 1) {" id="code8-l5"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">for</span> y <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>wall<span class="token punctuation">.</span>start_pos<span class="token punctuation">.</span>y<span class="token punctuation">,</span> wall<span class="token punctuation">.</span>end_pos<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="                map_tiles[y-1][x-1] = 'B';" id="code8-l6"><span class="lineCounter-0-0-3 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                map_tiles<span class="token punctuation">[</span>y<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'B'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="            }" id="code8-l7"><span class="lineCounter-0-0-3 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token punctuation">}</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        }" id="code8-l8"><span class="lineCounter-0-0-3 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token punctuation">}</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    }" id="code8-l9"><span class="lineCounter-0-0-3 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    for obs in map.small_obstacles {" id="code8-l10"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> obs <span class="token keyword">in</span> <span class="token builtin">map</span><span class="token punctuation">.</span>small_obstacles <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        map_tiles[obs.y-1][obs.x-1] = 'B';" id="code8-l11"><span class="lineCounter-0-0-3 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        map_tiles<span class="token punctuation">[</span>obs<span class="token punctuation">.</span>y<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>obs<span class="token punctuation">.</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'B'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    }" id="code8-l12"><span class="lineCounter-0-0-3 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="" id="code8-l13"><span class="lineCounter-0-0-3 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    for enemy in map.enemies {" id="code8-l14"><span class="lineCounter-0-0-3 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> enemy <span class="token keyword">in</span> <span class="token builtin">map</span><span class="token punctuation">.</span>enemies <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        map_tiles[enemy.y-1][enemy.x-1] = 'E';" id="code8-l15"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        map_tiles<span class="token punctuation">[</span>enemy<span class="token punctuation">.</span>y<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>enemy<span class="token punctuation">.</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'E'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    }" id="code8-l16"><span class="lineCounter-0-0-3 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    map_tiles[map.player_pos.y-1][map.player_pos.x-1] = 'P';" id="code8-l17"><span class="lineCounter-0-0-3 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    map_tiles<span class="token punctuation">[</span><span class="token builtin">map</span><span class="token punctuation">.</span>player_pos<span class="token punctuation">.</span>y<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token builtin">map</span><span class="token punctuation">.</span>player_pos<span class="token punctuation">.</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'P'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    map_tiles = [['B'] + row + ['B'] for row in map_tiles];" id="code8-l18"><span class="lineCounter-0-0-3 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    map_tiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">]</span> <span class="token operator">+</span> row <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">]</span> <span class="token keyword">for</span> row <span class="token keyword">in</span> map_tiles<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    map_tiles = [['B' for _ in range(map.level.width + 2)]] + map_tiles + [['B' for _ in range(map.level.width + 2)]];" id="code8-l19"><span class="lineCounter-0-0-3 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    map_tiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'B'</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">.</span>level<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> map_tiles <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'B'</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">.</span>level<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    return [''.join(row) for row in map_tiles];" id="code8-l20"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>row<span class="token punctuation">)</span> <span class="token keyword">for</span> row <span class="token keyword">in</span> map_tiles<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="}" id="code8-l21"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre><h3 id="running-the-program" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Running the Program</h3><pre class="with-bar"><code class="python -codedoc-code-snippet code-0-0-2" tabindex="0"><span class="wmbar-0-0-7"><span></span><span></span><span></span><span></span></span><div class="line-0-0-6  -codedoc-code-line" data-content="with entry {" id="code9-l1"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">with</span> entry <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    level_manager = LevelManager();" id="code9-l2"><span class="lineCounter-0-0-3 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    level_manager <span class="token operator">=</span> LevelManager<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    for _ in range(2) {" id="code9-l3"><span class="lineCounter-0-0-3 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        (new_level, new_level_map) = level_manager.get_next_level();" id="code9-l4"><span class="lineCounter-0-0-3 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token punctuation">(</span>new_level<span class="token punctuation">,</span> new_level_map<span class="token punctuation">)</span> <span class="token operator">=</span> level_manager<span class="token punctuation">.</span>get_next_level<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        print(new_level);" id="code9-l5"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">print</span><span class="token punctuation">(</span>new_level<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="        print('\n'.join(LevelManager.get_map(new_level_map)));" id="code9-l6"><span class="lineCounter-0-0-3 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>LevelManager<span class="token punctuation">.</span>get_map<span class="token punctuation">(</span>new_level_map<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="    }" id="code9-l7"><span class="lineCounter-0-0-3 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-6  -codedoc-code-line" data-content="}" id="code9-l8"><span class="lineCounter-0-0-3 prim -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre><p>This program will now generate two consecutive maps and print them on the terminal. by running this jac file using <code>jac run level_manager.jac</code> you can simply test your program.</p><h2 id="a-full-scale-game-demo" class="heading-0-0-15"><span class="anchor-0-0-16" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>A full scale game demo</h2><p>For the sake of this tutorial we have not included the entire development of an actual game. The full game is available on our <a href="https://github.com/Jaseci-Labs/jaclang/tree/main/examples/rpg_game">jac-lang repo</a>. A sample demonstration of the game can be viewed below.</p><p><a href="https://drive.google.com/file/d/1JXyWbmI6vJsjpNUnscRxdnK5vmo8312r/view?usp=sharing">Demo Video</a></p><div class="contentnav-0-0-14" data-no-search=""><a href="#creating-a-level-generator-for-an-rpg-game" class="h1" data-content-highlight="creating-a-level-generator-for-an-rpg-game">Creating a Level Generator for an RPG Game</a><a href="#what-is-a-level" class="h2" data-content-highlight="what-is-a-level">What is a level?</a><a href="#building-a-level-map-generator" class="h2" data-content-highlight="building-a-level-map-generator">Building a level map generator?</a><a href="#level-configuration" class="h3" data-content-highlight="level-configuration">Level Configuration</a><a href="#building-the-map-elements" class="h3" data-content-highlight="building-the-map-elements">Building the Map Elements</a><a href="#the-level-manager" class="h3" data-content-highlight="the-level-manager">The Level Manager</a><a href="#running-the-program" class="h3" data-content-highlight="running-the-program">Running the Program</a><a href="#a-full-scale-game-demo" class="h2" data-content-highlight="a-full-scale-game-demo">A full scale game demo</a></div></div><div id="-codedoc-toc" class="toc-0-0-11"><script>
     if (window.matchMedia('(min-width: 1200px)').matches) {
       if (!localStorage.getItem('-codedoc-toc-active')) {
         localStorage.setItem('-codedoc-toc-active', "true");
       }
     }
     </script><div class="content-0-0-12"><p><a href="/mtllm/">Home</a></p><div class="collapse-0-0-8 "><script id="cBTiVWfADV">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("cBTiVWfADV", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Quick Start</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/quickstart/installation">Installation</a>
<a href="/mtllm/docs/quickstart/minimal-working-example">Minimal Working Example</a></p></div></div><div class="collapse-0-0-8 "><script id="hq_ehHjdzw">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("hq_ehHjdzw", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Design and Implementation</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/design-impl/sem_registry">SemRegistry</a>
<a href="/mtllm/docs/design-impl/inference_engine">Inference Engine</a></p></div></div><div class="collapse-0-0-8 "><script id="NqiyPeIJBk">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("NqiyPeIJBk", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Building Blocks</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/building-blocks/language_models">Language Models</a>
<a href="/mtllm/docs/building-blocks/semstrings">Semstrings</a>
<a href="/mtllm/docs/building-blocks/functions_methods">Functions and Methods</a>
<a href="/mtllm/docs/building-blocks/object_init">Object Initialization</a>
<a href="/mtllm/docs/building-blocks/multimodality">Multimodality</a></p></div></div><div class="collapse-0-0-8 "><script id="pjLlFHWUyc">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("pjLlFHWUyc", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Tutorials</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/tutorials/rpg_game">RPG Game Level Generation</a></p></div></div><div class="collapse-0-0-8 "><script id="qUZpEFODRj">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("qUZpEFODRj", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">API Reference</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/api/mtllm">MTLLM</a></p></div></div><div class="collapse-0-0-8 "><script id="ufes_icvZu">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("ufes_icvZu", "BR5Z0MA6Aj4P2zER2ZLlUg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Tips and Tricks</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/mtllm/docs/tips-n-tricks/existing_application">Using MTLLM in your existing Application</a>
<a href="/mtllm/docs/tips-n-tricks/when_to_use_semstrings">When to use Semstrings</a>
<a href="/mtllm/docs/tips-n-tricks/create_own_lm">Create your own Language Model</a></p></div></div><p><a href="/mtllm/docs/faqs">FAQs</a></p></div><div class="search-0-0-13"><script id="KKaXnLhzjP">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("KKaXnLhzjP", "CEp7LAl0nnWrqHIN8Qnt6g==", {"repo":"mtllm","user":"Jaseci-Labs","root":"docs/md","pick":"\\.md$","drop":"(^_)|(\\/_)"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div></div><div class="footer-0-0-10"><div class="left"><script id="NKyrERlGK_">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("NKyrERlGK_", "KKHOIeoEcuIIR8G+qI09PQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div><div class="main"><div class="inside"><a href="https://github.com/Jaseci-Labs/mtllm/" target="_blank">GitHub</a></div></div><div class="right"><script id="bmZYoCeelF">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("bmZYoCeelF", "Xodqq8f8LP13F67p+cusew==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></div></div><script id="iQwMjyHjNC">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("iQwMjyHjNC", "3GUK3xGbIE9fCSzaoTX0bA==", {"namespace":"/mtllm"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); window.setImmediate = window.setImmediate || function(f){setTimeout(f, 0)}; })()</script></body></html>