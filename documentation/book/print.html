<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Jaseci Documentation</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Jaseci Offical Documentation</li><li class="chapter-item expanded "><a href="LICENSE.html"><strong aria-hidden="true">1.</strong> License</a></li><li class="chapter-item expanded "><a href="CHANGELOG.html"><strong aria-hidden="true">2.</strong> About this Release</a></li><li class="chapter-item expanded "><a href="support/guide/how_to_contribute.html"><strong aria-hidden="true">3.</strong> How to contribute</a></li><li class="chapter-item expanded "><a href="CONTRIBUTORS.html"><strong aria-hidden="true">4.</strong> Contributors</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="support/guide/getting_started/introduction.html"><strong aria-hidden="true">5.</strong>  Jaseci Overview</a></li><li class="chapter-item expanded "><a href="support/guide/getting_started/installation.html"><strong aria-hidden="true">6.</strong>  Installing Jaseci</a></li><li class="chapter-item expanded "><a href="support/guide/getting_started/setting_up_your_editor.html"><strong aria-hidden="true">7.</strong>  Setting up your Code Editor</a></li><li class="chapter-item expanded "><a href="support/guide/getting_started/writing_your_first_app.html"><strong aria-hidden="true">8.</strong>  Writing your first app</a></li><li class="chapter-item expanded "><a href="support/guide/getting_started/understanding_jac_programs.html"><strong aria-hidden="true">9.</strong>  Understanding JAC Programs</a></li><li class="chapter-item expanded affix "><li class="part-title">The JAC Programming Language Guide</li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/jac_language_overview.html"><strong aria-hidden="true">10.</strong> An Overview of the JAC Language</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/jac_grammar.html"><strong aria-hidden="true">11.</strong>  JAC Grammar</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/keywords.html"><strong aria-hidden="true">12.</strong>  keywords</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/operators.html"><strong aria-hidden="true">13.</strong>  Operators</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/control_flow.html"><strong aria-hidden="true">14.</strong>  Control Flow</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/collections.html"><strong aria-hidden="true">15.</strong>  Collections</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/nodes.html"><strong aria-hidden="true">16.</strong>  Nodes</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/edges.html"><strong aria-hidden="true">17.</strong>  Edges</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/graphs.html"><strong aria-hidden="true">18.</strong>  Graphs</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/walkers.html"><strong aria-hidden="true">19.</strong>  Walkers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/traversing_a_graph.html"><strong aria-hidden="true">19.1.</strong>  Traversing a Graph</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/referencing_node_context.html"><strong aria-hidden="true">19.2.</strong>  Referencing a Node in Context</a></li></ol></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/passing_arguments.html"><strong aria-hidden="true">20.</strong>  Passing Arguments</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/specifying_operating_context.html"><strong aria-hidden="true">21.</strong>  Specifying Operating Context</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/actions.html"><strong aria-hidden="true">22.</strong>  Actions in Jaseci</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/date_actions.html"><strong aria-hidden="true">22.1.</strong>  Date Actions</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/file_actions.html"><strong aria-hidden="true">22.2.</strong>  File Actions</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/net_actions.html"><strong aria-hidden="true">22.3.</strong>  Net Actions</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/rand_actions.html"><strong aria-hidden="true">22.4.</strong>  Rand Actions</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/request_actions.html"><strong aria-hidden="true">22.5.</strong>  Request Actions</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/standard_actions.html"><strong aria-hidden="true">22.6.</strong>  Standard Actions</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/vector_actions.html"><strong aria-hidden="true">22.7.</strong>  Vector Actions</a></li><li class="chapter-item expanded "><a href="support/guide/jac_language_guide/jaseci_actions.html"><strong aria-hidden="true">22.8.</strong>  Jaseci Actions</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Samples and Tutorials</li><li class="chapter-item expanded "><a href="examples/api_development/index.html"><strong aria-hidden="true">23.</strong> API Development</a></li><li class="chapter-item expanded "><a href="examples/canoniCAI/index.html"><strong aria-hidden="true">24.</strong> CanoniCAI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="examples/canoniCAI/documentation/add_competency.html"><strong aria-hidden="true">24.1.</strong> Adding a competency</a></li><li class="chapter-item expanded "><a href="examples/canoniCAI/documentation/add_followup_state.html"><strong aria-hidden="true">24.2.</strong> Adding a following up state</a></li><li class="chapter-item expanded "><a href="examples/canoniCAI/documentation/add_followup_state.html"><strong aria-hidden="true">24.3.</strong> Building FAQ States</a></li><li class="chapter-item expanded "><a href="examples/canoniCAI/documentation/fixing_utterances.html"><strong aria-hidden="true">24.4.</strong> Fixing Utterance</a></li><li class="chapter-item expanded "><a href="examples/canoniCAI/documentation/jaseci_actions_load_local.html"><strong aria-hidden="true">24.5.</strong> Setting up a Custom Module</a></li></ol></li><li class="chapter-item expanded "><a href="examples/ner_examples/index.html"><strong aria-hidden="true">25.</strong> NER Examples</a></li><li class="chapter-item expanded affix "><li class="part-title">Jaseci Library Reference</li><li class="chapter-item expanded "><a href="jaseci_kit/index.html"><strong aria-hidden="true">26.</strong> Jaseci Kit</a></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/encoders/index.html"><strong aria-hidden="true">27.</strong> Encoders</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="jaseci_kit/modules/encoders/use_enc/index.html"><strong aria-hidden="true">27.1.</strong> USE Encoder</a></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/encoders/use_qa/index.html"><strong aria-hidden="true">27.2.</strong> USE QA</a></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/encoders/fast_enc/index.html"><strong aria-hidden="true">27.3.</strong> FastText</a></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/encoders/bi_enc/index.html"><strong aria-hidden="true">27.4.</strong> Bi-Encoder</a></li></ol></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/entity_utils/index.html"><strong aria-hidden="true">28.</strong> Entity Recongition</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="jaseci_kit/modules/entity_utils/flair_ner/index.html"><strong aria-hidden="true">28.1.</strong> Flair NER</a></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/entity_utils/tfm_ner/index.html"><strong aria-hidden="true">28.2.</strong> Transformer NER</a></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/entity_utils/lstm_ner/index.html"><strong aria-hidden="true">28.3.</strong> LSTM NER</a></li></ol></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/summarization/index.html"><strong aria-hidden="true">29.</strong> Text Summarization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="jaseci_kit/modules/summarization/cl_summer/index.html"><strong aria-hidden="true">29.1.</strong> CL Summarization</a></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/summarization/t5_sum/index.html"><strong aria-hidden="true">29.2.</strong> T5 Summarization</a></li></ol></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/text_processing/index.html"><strong aria-hidden="true">30.</strong> Text Processing </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="jaseci_kit/modules/text_processing/text_seg/index.html"><strong aria-hidden="true">30.1.</strong> Text Segmenter</a></li></ol></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/object_detection/index.html"><strong aria-hidden="true">31.</strong> Object Detection</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="jaseci_kit/modules/object_detection/yolo_v5/index.html"><strong aria-hidden="true">31.1.</strong> YOLO V5</a></li></ol></li><li class="chapter-item expanded "><a href="jaseci_kit/modules/non_ai/index.html"><strong aria-hidden="true">32.</strong> Non-AI Tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="jaseci_kit/modules/non_ai/pdf_ext/index.html"><strong aria-hidden="true">32.1.</strong> PDF Extractor</a></li></ol></li><li class="chapter-item expanded "><a href="jaseci_core/index.html"><strong aria-hidden="true">33.</strong> Jaseci Core</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jaseci Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="mit-license"><a class="header" href="#mit-license">MIT License</a></h1>
<p><em>Copyright (c) 2021 Jaseci Labs LLC</em></p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="jaseci-change--release-notes"><a class="header" href="#jaseci-change--release-notes">Jaseci Change / Release Notes</a></h1>
<h2 id="version-134"><a class="header" href="#version-134">Version 1.3.4</a></h2>
<h3 id="updates"><a class="header" href="#updates">Updates</a></h3>
<ul>
<li>Deprecation: Stripe API soft removed.</li>
<li>Improvement: Improved the deref operator <code>*</code> to be more nimble</li>
<li>New Feature: Can now pluck lists of values from collections of nodes and edges.</li>
<li>Major Language Feature: Introducing the <code>yeild</code> feature. See bible for details</li>
<li>Improvement/Bug: Here behavior is now specified for ability calls and inheritance in intuitive way</li>
<li>Major Feature: Can now specify various forms of breadth first and depth first search on <code>take</code> commands (e.g., <code>take:bfs</code>, <code>take:dfs</code>, and <code>take:b</code> and <code>take:d</code> for short)</li>
<li>Improvement: Added deep copy for lists and dictionaries</li>
<li>Improvement: The connect operator between 2 nodes now returns the left-hand side. (e.g., <code>n1 --&gt; n2 --&gt; n3</code> will create an intuitive chain of connections not <code>n1 --&gt; n3 &lt;-- n2</code>)</li>
<li>Bug Fix: Root nodes now return valid <code>.type</code></li>
<li>Bug Fix: With exit within walker now executes after exit events in nodes</li>
</ul>
<h3 id="notes"><a class="header" href="#notes">Notes</a></h3>
<ul>
<li>Behavior change for jac programs utilizing chained connection operators. Connection orders are now intuitive (e.g., <code>n1 --&gt; n2 --&gt; n3</code> will create an intuitive chain of connections not <code>n1 --&gt; n3 &lt;-- n2</code>)</li>
<li>API interface update: <code>sentinel_register</code> auto_run_ctx replaces ctx to be more specific, <code>auto_gen_graph</code> is now <code>auto_create_graph</code> for same reason as well</li>
<li>API interface update: <code>master_create</code> API return format updated</li>
</ul>
<h2 id="version-133"><a class="header" href="#version-133">Version 1.3.3</a></h2>
<h3 id="updates-1"><a class="header" href="#updates-1">Updates</a></h3>
<ul>
<li>Improvement: Added <code>reversed</code> to set of list builtin functions</li>
<li>Bug Fix: Mem leak on graph node setting fixed</li>
<li>Major Feature: Jsctl graph walking tooling</li>
<li>Improvement: Optimized the self generation of jaseci internal APIs</li>
<li>New Feature: Added <code>jaseci</code> standard library as patch through to all jaseci core APIs</li>
<li>New Features: Report payloads can be customized with <code>report:custom</code></li>
<li>Improvement: Disengage can now do disengage with report action</li>
<li>Improvement: import now works recursively through chain of files</li>
<li>Improvement: JSCTL shows token on login</li>
<li>Major Feature: JSCTL has persistent log in sessions, and can logout</li>
<li>Improvement: <code>*</code> and <code>&amp;</code> precedence hierarch locations improved.</li>
<li>Bug Fix: Indirect node field updates tag elements to be written to db</li>
<li>Major Feature: Multiple inheritance support on nodes and edges!</li>
<li>Improvement: Fixed and much improved <code>actions load local</code> functionality</li>
<li>Bug Fix: Globals imports of imports working</li>
<li>Improvement: Sentinel registering improved to include ir mode</li>
<li>Improvement: <code>edge</code> semantics improved</li>
<li>Major bug fix: Re registering new code was breaking architype abilities</li>
<li>Improvement: Tests now only show stdout and stderr on a test by test basis in detailed mode (Much cleaner)</li>
<li>Improvement: JSKit package architecture established, normalized, and standardized</li>
<li>New Lang Feature: Added list built in call of <code>.l::max</code>, <code>.l::min</code>, <code>.l::idx_of_max</code>, and <code>.l::idx_of_min</code></li>
<li>Improvement: Api so super masters can <code>become</code> any master id, also jsctl can issue <code>master allusers</code></li>
<li>New Lang Feature: Can now have <code>can</code> statements in spawn graphs after <code>has anchor rootname</code></li>
<li>Improvement: <code>actions load module</code> added as capability where module strings are accepted</li>
<li>New Feature: Added global root finder <code>net.root</code> to std lib and <code>net.min</code> to go with existing <code>net.max</code></li>
<li>New Feature: New global element type and <code>global</code> keyword</li>
</ul>
<h3 id="notes-1"><a class="header" href="#notes-1">Notes</a></h3>
<ul>
<li>Special report actions now use <code>:</code> instead of <code>.</code> eg <code>report.status = 200</code> is now <code>report:status = 200</code></li>
</ul>
<h2 id="version-132"><a class="header" href="#version-132">Version 1.3.2</a></h2>
<h3 id="updates-2"><a class="header" href="#updates-2">Updates</a></h3>
<ul>
<li>New Feature: Introduction of new standard library option for loading actions in Jac with <code>std.actload_local</code> and <code>std.actload_remote</code></li>
<li>Improvement: Disallowing spawning of unlinked edges, i.e., <code>spawn --&gt; node::generic</code> not allowed without <code>here</code></li>
<li>New Feature: Random library adds random text generation lorem style with <code>rand.word()</code>, <code>rand.sentence()</code>, <code>rand.paragraph()</code>, and <code>rand.text()</code>.</li>
<li>New Feature: Standard input <code>std.input(prompt)</code> :-p</li>
<li>Improvement: Status codes auto plucked from return payload in jsserv</li>
<li>New Feature: Can now control status codes with <code>report.status = 201</code> style statements</li>
<li>Improvement: No longer saves action data into graph and keeps it in architypes</li>
<li>New Feature: Walkers can be called directly using <code>wapi/{walkername}</code> api</li>
<li>New Feature: New <code>master_allusers</code> API available for super master users</li>
<li>Improvement: Superusers now have access to all data</li>
<li>Improvement: Jaseci's admin api route changed to <code>/js_admin/...</code> vs <code>/admin/</code> to not conflict with Django's internals</li>
<li>Update: Django 3 upgraded to latest as well as all other dependencies.</li>
<li>Fix: Believe it or not, I never fully implemented <code>continue</code>. LIKE REALLY??? Anyway, fixed now. FTLOG!</li>
<li>New Feature: Added <code>jac dot</code> cli command much like <code>jac run</code> but prints dot graph</li>
<li>New Feature: Created shorthand for string, list, and dict functions i.e., <code>.s::</code>, <code>.d::</code>, and <code>.l::</code> respectively</li>
<li>New Feature: Added suite of dict manipulation functions</li>
<li>New Feature: Added suite of list manipulation functions</li>
</ul>
<h3 id="notes-2"><a class="header" href="#notes-2">Notes</a></h3>
<ul>
<li>All api calls to Jaseci admin apis using the <code>/admin/</code> route must be updated to <code>/js_admin/</code></li>
</ul>
<h2 id="version-131"><a class="header" href="#version-131">Version 1.3.1</a></h2>
<h3 id="updates-3"><a class="header" href="#updates-3">Updates</a></h3>
<ul>
<li>New Feature: File I/O Library in with json support</li>
<li>New Lang Feature: <code>.str::load_json</code> added to string library</li>
<li>Fix: Error output when key not in object or dict</li>
<li>New Lang Feature: Can now spawn root nodes in addition to generic nodes</li>
<li>Improvement: Line numbers provided for all &quot;Internal Errors&quot;</li>
<li>Fix: Dot strings now handled as expected (stripping quotes etc)</li>
<li>Improvement: General improvements to error reporting</li>
<li>Improvement: Changed meta requirement for actions to be option at hook points</li>
<li>Improvement: Now you can arbitrarily chain array indexs into function calls as per <code>std.get_report()[0]</code>.</li>
<li>New Feature: <code>std.get_report</code> gives the what is to be reported so far</li>
<li>Improvement: General polish items of JSCTL UI</li>
<li>Improvement: Raised the default core logging reporting level to warning</li>
</ul>
<h2 id="version-13"><a class="header" href="#version-13">Version 1.3</a></h2>
<h3 id="updates-4"><a class="header" href="#updates-4">Updates</a></h3>
<ul>
<li>Improvement: JSCTL now takes args without flags in sensible places for quality of life.</li>
<li>Improvement: Better Error reporting all around</li>
<li>New Feature: APIs for manipulating actions</li>
<li>New Feature: Hotloading jaseci action modules</li>
<li>Update: New action creation methodology and architecture</li>
<li>New Feature: Decorator interface for creating jaseci action modules</li>
<li>New Feature: New profiling flag added to run walker api for performance profiling</li>
<li>New Feature: Direct jac file building, test, and run from in JSCTL</li>
<li>New Language Feature: Tests and testing features as first order language semantics</li>
<li>New Lang Feature: Asserts!</li>
<li>Fix: Simplified and optimized global abilities</li>
<li>New Support Feature: Started vs code for JAC extension first beta</li>
<li>New Lang Feature: Multifile codebase support and import keyword and semantic added</li>
<li>New Lang Feature: Try-else blocks introduced for exception handling</li>
<li>New Lang Feature: Added new <code>&amp;</code> reference and <code>*</code> dereference semantic for getting psuedo-pointers to node, edges, etc</li>
<li>New Lang Feature: Massively expanded functionality with destroy and list slice management</li>
<li>New Lang Feature: can now explicitly reference and dereference graph elements (nodes, edges, etc)</li>
<li>New Lang Feature: Field filtering for dictionaries, particularly useful for context, info, details</li>
<li>New Lang Feature: Type checking primitives, and type casting primitives</li>
<li>New Lang Feature: String library finally present</li>
</ul>
<h3 id="notes-3"><a class="header" href="#notes-3">Notes</a></h3>
<ul>
<li>Various flags are now args for <code>jsctl</code> i.e., <code>walker run -name init</code> is now <code>walker run init</code> as name is now the standard arg. If you wanted to specify a node the flag would be used as per <code>walker run init -nd {uuid}</code></li>
<li>Reports back from walker is now dictionary of form <code>{'report': list(report)}</code> instead of currnet <code>list(report)</code></li>
<li><code>std.sort_by_col</code> tweaked to make last paramter a boolean for reverse (instead of string)</li>
<li>Format of <code>walker get -mode key</code> api changed from {key:namespace} to {namespace:key}</li>
<li><code>test</code> is now a keyword with added test capabilities in jaseci</li>
<li>Type, int, float, str, list, dict, bool, are now keywords, if you used these as variable names in legacy code, must make updates.</li>
<li>The destroy built-in is totally revised <code>lst.destroy(idx)</code> on lists should be changed to <code>destroy lst[idx]</code>.</li>
<li>Get_uuid standard library function is deprecated since we have string manipulation</li>
<li>Internal representation of element now <code>jac:uuid:</code> format, should not be visible to coder, <code>&amp;</code> references still produce <code>urn:uuid:</code> as strings. To dereference use new <code>*</code> dereference operators.</li>
<li>Standard, output and logging now will print proper values (e.g. json values for null, true, and false)</li>
</ul>
<h2 id="version-122"><a class="header" href="#version-122">Version 1.2.2</a></h2>
<h3 id="updates-5"><a class="header" href="#updates-5">Updates</a></h3>
<ul>
<li>New Language Feature: can now perform assignments arbitrarily (not just to named variables)</li>
<li>New Language Feature: can spawn assign on creation of nodes and edges</li>
<li>New Language Feature: can filter references to nodes and edges</li>
<li>Added new built-ins for nodes and edges (context, info, and details)</li>
<li>Fixed dot output</li>
<li>Added reset command to jsctl to clear complete state</li>
<li>Various language grammar tweaks</li>
</ul>
<h2 id="version-121"><a class="header" href="#version-121">Version 1.2.1</a></h2>
<h3 id="updates-6"><a class="header" href="#updates-6">Updates</a></h3>
<ul>
<li>Both jaseci and jaseci_serv are architected to be standalone packages</li>
<li>Stripe API integrated</li>
<li>EMails can be templated with HTML content</li>
<li>Token expiry time can be set as config through live api</li>
<li>Added auto sync to global sentinel for spawned walkers</li>
<li>FIX: Global sentinels cascade to all users on change</li>
<li>FIX: Multi pod concurrency issue corrected</li>
</ul>
<h2 id="version-120"><a class="header" href="#version-120">Version 1.2.0</a></h2>
<h3 id="updates-7"><a class="header" href="#updates-7">Updates</a></h3>
<ul>
<li>New Hierarchal user creation and management through core Jaseci</li>
<li>New version labels for Jac programs</li>
<li>New custom action for nodes and edges</li>
<li>New Jaseci server support for new API and Jaseci architecture</li>
<li>New namespaces for public walker permissions management with key access</li>
<li>New object sharing across users and access control APIs</li>
<li>New Jaseci object permissions architecture</li>
<li>New Jac library for outbound requests</li>
<li>New Globals Jac standard library and API interfaces</li>
<li>New support for server-side Jac deployments and relevant APIs</li>
<li>New Jac language updates</li>
<li>New access language features for edge manipulation and traversal</li>
<li>New code IR format and handling across Architypes and Walkers</li>
<li>New dot integration redesign</li>
<li>New added editor to JSCTL</li>
<li>New complete API redesign and deprecation of legacy APIs</li>
<li>New introduced new standard Jaseci Bible (unfinished)</li>
<li>New redesigned graphs nodes and edges to support multi-graph semantic.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributing-to-the-jaseci-open-source-project"><a class="header" href="#contributing-to-the-jaseci-open-source-project">Contributing to the Jaseci Open Source Project</a></h1>
<ul>
<li><a href="support/guide/how_to_contribute.html#how-to-start-contributing">How to start contributing</a>
<ul>
<li><a href="support/guide/how_to_contribute.html#working-on-a-new-feature-or-fixing-a-bug-you-found">Working on a new feature or fixing a bug you found</a></li>
<li><a href="support/guide/how_to_contribute.html#work-on-an-existing-issue">Work on an existing issue</a></li>
</ul>
</li>
<li><a href="support/guide/how_to_contribute.html#how-to-contribute-code">How to contribute code</a>
<ul>
<li><a href="support/guide/how_to_contribute.html#what-is-a-pull-request--pr--">What is a Pull Request (PR)?</a></li>
<li><a href="support/guide/how_to_contribute.html#how-to-open-a-pr-and-contribute-code-to-jaseci-open-source">How to open a PR and contribute code to Jaseci Open Source</a>
<ul>
<li><a href="support/guide/how_to_contribute.html#1-forking-the-jaseci-repository">1. Forking the Jaseci Repository</a></li>
<li><a href="support/guide/how_to_contribute.html#2-cloning-the-forked-repository-locally">2. Cloning the Forked Repository Locally</a></li>
<li><a href="support/guide/how_to_contribute.html#3-update-your-forked-repository">3. Update your Forked Repository</a></li>
<li><a href="support/guide/how_to_contribute.html#4-implement-your-code-contribution-on-a-feature-branch">4. Implement your code contribution on a feature branch</a></li>
<li><a href="support/guide/how_to_contribute.html#5-push-changes-to-your-forked-repository-on-github">5. Push changes to your forked repository on GitHub</a></li>
<li><a href="support/guide/how_to_contribute.html#6-opening-the-pull-request-on-jaseci-open-source">6. Opening the Pull Request on Jaseci Open Source</a></li>
<li><a href="support/guide/how_to_contribute.html#8-merging-your-pr-and-the-final-steps-of-your-contribution">8. Merging your PR and the final steps of your contribution</a></li>
</ul>
</li>
<li><a href="support/guide/how_to_contribute.html#things-to-know-about-creating-a-pr">Things to know about creating a PR</a>
<ul>
<li><a href="support/guide/how_to_contribute.html#opening-issues-before-prs">Opening issues before PRs</a></li>
<li><a href="support/guide/how_to_contribute.html#draft-work-in-progress-wip--prs">Draft/Work-in-progress(WIP) PRs</a></li>
<li><a href="support/guide/how_to_contribute.html#code-style---linting">Code style &amp; Linting</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="support/guide/how_to_contribute.html#how-to-update-the-official-documentation">How to Update the Official Documentation</a></li>
</ul>
<hr />
<h2 id="how-to-start-contributing"><a class="header" href="#how-to-start-contributing">How to start contributing</a></h2>
<p>Welcome to Jaseci! To start contributing, we would like you to start with issues.</p>
<h3 id="working-on-a-new-feature-or-fixing-a-bug-you-found"><a class="header" href="#working-on-a-new-feature-or-fixing-a-bug-you-found">Working on a new feature or fixing a bug you found</a></h3>
<p>If you would like to add a new feature or fix a bug you have found, we prefer that you open a new issue in the Github repo before creating a pull request.</p>
<p>It’s important to note that when opening an issue, you should first do a quick search of existing issues to make sure your suggestion hasn’t already been added as an issue.
If your issue doesn’t already exist, and you’re ready to create a new one, make sure to state what you would like to implement, improve or bugfix.</p>
<h3 id="work-on-an-existing-issue"><a class="header" href="#work-on-an-existing-issue">Work on an existing issue</a></h3>
<p>If you want to contribute code, but don't know what to work on, check out the existing list of issues</p>
<p>Certain issues are marked with the &quot;good first issue&quot; label. These are issues that we think are great for first time contributor to work on while they are still getting familarized with the Jaseci codebase.</p>
<p>To work on an existing issue, go to the issue in Github, add a comment stating you would like to work on it and include any solutions you may already have in mind. Assign the issue to yourself.</p>
<p>The Jaseci team will then work with you on the issue and the downstream pull request to guide you through merging your code into the Jaseci codebase.</p>
<hr />
<h2 id="how-to-contribute-code"><a class="header" href="#how-to-contribute-code">How to contribute code</a></h2>
<p>Code contribution will be in the form of Pull Request (PR) on Github.</p>
<h3 id="what-is-a-pull-request-pr"><a class="header" href="#what-is-a-pull-request-pr">What is a Pull Request (PR)?</a></h3>
<p>This is how the GitHub team defines a PR:</p>
<blockquote>
<p>“Pull requests let you tell others about changes you’ve pushed to a branch in a repository on GitHub. Once a pull request is opened, you can discuss and review the potential changes with collaborators and add follow-up commits before your changes are merged into the base branch.”</p>
</blockquote>
<p>This process is used by both Jaseci team members and Jaseci contributors to make changes and improvements.</p>
<h3 id="how-to-open-a-pr-and-contribute-code-to-jaseci-open-source"><a class="header" href="#how-to-open-a-pr-and-contribute-code-to-jaseci-open-source">How to open a PR and contribute code to Jaseci Open Source</a></h3>
<h4 id="1-forking-the-jaseci-repository"><a class="header" href="#1-forking-the-jaseci-repository">1. Forking the Jaseci Repository</a></h4>
<p>Head to Jaseci repository and click ‘Fork’. Forking a repository creates you a copy of the project which you can edit and use to propose changes to the original project.</p>
<p>Once you fork it, a copy of the Jaseci repository will appear inside your GitHub repository list, under your username.</p>
<h4 id="2-cloning-the-forked-repository-locally"><a class="header" href="#2-cloning-the-forked-repository-locally">2. Cloning the Forked Repository Locally</a></h4>
<p>To make changes to your copy of the Jaseci repository, clone the repository on your local machine. To do that, run the following command in your terminal:</p>
<pre><code>git clone https://github.com/your_github_username/jaseci.git
</code></pre>
<p>Note: this assumes you have git installed on your local machine. If not, check out the <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">following guide</a> to learn how to install it.</p>
<h4 id="3-update-your-forked-repository"><a class="header" href="#3-update-your-forked-repository">3. Update your Forked Repository</a></h4>
<p>Before you make any changes to your cloned repository, make sure you have the latest version of the original Jaseci repository. To do that, run the following commands in your terminal:</p>
<pre><code>cd jaseci
git remote add upstream https://github.com/Jaseci-Labs/jaseci.git
git pull upstream main
</code></pre>
<p>This will update the local copy of the Jaseci repository to the latest version.</p>
<h4 id="4-implement-your-code-contribution-on-a-feature-branch"><a class="header" href="#4-implement-your-code-contribution-on-a-feature-branch">4. Implement your code contribution on a feature branch</a></h4>
<p>We recommend you to add your code contribution to a new branch (different from main). Then you can continuously run the previous step to always keep the <code>main</code> branch in your forked repo up-to-date with the original repo. This way you have the flexibility to easily inspect your changes and resolve any potential merge conflicts all within the forked repo.</p>
<pre><code>git checkout -b name-of-your-new-branch
</code></pre>
<h4 id="5-push-changes-to-your-forked-repository-on-github"><a class="header" href="#5-push-changes-to-your-forked-repository-on-github">5. Push changes to your forked repository on GitHub</a></h4>
<p>Once you are happy with the changes you made in the local files, push them to the forked repository on GitHub. To do that, run the following commands:</p>
<pre><code>git add .
git commit -m ‘fixed a bug’
git push origin name-of-your-new-branch
</code></pre>
<p>This will create a new branch on your forked Jaseci repository, and now you’re ready to create a Pull Request with your proposed changes!</p>
<h4 id="6-opening-the-pull-request-on-jaseci-open-source"><a class="header" href="#6-opening-the-pull-request-on-jaseci-open-source">6. Opening the Pull Request on Jaseci Open Source</a></h4>
<p>Head to the forked repository and click on a <em>Compare &amp; pull</em> request button.</p>
<p>This will open a window where you can choose the repository and branch you would like to propose your changes to, as well as specific details of your contribution. In the top panel menu choose the following details:</p>
<ul>
<li>Base repository: <code>Jaseci-Labs/jaseci</code></li>
<li>Base branch: <code>main</code></li>
<li>Head repository: <code>your-github-username/jaseci</code></li>
<li>Head branch: <code>name-of-your-new-branch</code></li>
</ul>
<p>Next, make sure to update the pull request card with as many details about your contribution as possible. <em>Proposed changes</em> section should contain the details of what has been fixed/implemented, and Status should reflect the status of your contributions. Any reasonable change (not like a typo) should include a changelog entry, a bug fix should have a test, a new feature should have documentation, etc.</p>
<p>Once you are happy with everything, click the <em>Create pull request</em> button. This will create a Pull Request with your proposed changes.</p>
<p>If you are ready to get feedback on your contribution from the Jaseci team, leave a comment on the PR.</p>
<h4 id="8-merging-your-pr-and-the-final-steps-of-your-contribution"><a class="header" href="#8-merging-your-pr-and-the-final-steps-of-your-contribution">8. Merging your PR and the final steps of your contribution</a></h4>
<p>A member from the Jaseci team will review your PR and might ask you to make additional changes and update. To update your PR, head back to the local copy of your repo, implement the changes requested and repeat the same steps above. Your PR will <em>automatically</em> be updated with your latest changes. Once you've implemented all of the suggested changes, tag the person who first reviewed your PR in a comment of the PR to ask them to review again.</p>
<p>Finally, if your contribution is accepted, one of the Jaseci team member will merge it to the codebase!</p>
<h3 id="things-to-know-about-creating-a-pr"><a class="header" href="#things-to-know-about-creating-a-pr">Things to know about creating a PR</a></h3>
<h4 id="opening-issues-before-prs"><a class="header" href="#opening-issues-before-prs">Opening issues before PRs</a></h4>
<p>Like, mentioned above, We recommend opening an issue before a pull request if there isn’t already an issue for the problem you’d like to solve. This helps facilitate discussions and tracking progress.</p>
<h4 id="draftwork-in-progresswip-prs"><a class="header" href="#draftwork-in-progresswip-prs">Draft/Work-in-progress(WIP) PRs</a></h4>
<p>If you're ready to get some quick initial feedback from the Jaseci team, you can create a draft pull request. You can prefix the PR title with [WIP] to indicate this is still work in progres.</p>
<h4 id="validate-your-changes-through-test"><a class="header" href="#validate-your-changes-through-test">Validate your changes through test</a></h4>
<p>Jaseci has a set of automated tests and PRs are required to pass these tests for them to be merge into the main branch. So we recommend you to validate your changes via these tests before creating a PR. Checkout <code>scripts/script_sync_code_kube_test</code> to see how to run the tests.</p>
<h4 id="code-style--linting"><a class="header" href="#code-style--linting">Code style &amp; Linting</a></h4>
<p>To standardize coding style, Jaseci code is enforeced by the flake8 linter and a set of linting rules. Please run the linting command to check your code style before creating a PR.</p>
<pre><code>flake8 --exclude=settings.py,*migrations*,jac_parse --max-line-length=88 --extend-ignore = E203,
</code></pre>
<hr />
<h2 id="how-to-update-the-official-documentation"><a class="header" href="#how-to-update-the-official-documentation">How to Update the Official Documentation</a></h2>
<p>The source of the Jaseci Official Documentation comes from the collection of <code>README.md</code> files placed in specific folders throughout the codebase. Developers and Maintainers must ensure that their contributions are properly documented according to the following procedures outlined in this section.</p>
<h3 id="adding-a-new-module-or-library"><a class="header" href="#adding-a-new-module-or-library">Adding a new module or library</a></h3>
<p>Ensure that you follow the prevailing directory sturcture convention when adding a new module or library to Jaseci. </p>
<ul>
<li>All source files belonging to your module or library must be contained within a folder bearing the non-whitespace, lowercase name of your module or library. </li>
<li>You must author a <code>README.md</code> document to describe the purpose of your module or library, any features, configurations or uses as well as code excerpts on how to implement your module's functionaliy. </li>
<li>The <code>README.md</code> must be included in the root folder of the module or library.</li>
<li>Ensure you update the related <code>README.md</code> in the subsection (if applicable) which contains your module, e.g. <code>jaseci_kit/README.md</code> as well as the main <code>README.md</code> in the root directory of the codebase to include references to your new module or library. </li>
</ul>
<h3 id="adding-a-new-code-lab-example"><a class="header" href="#adding-a-new-code-lab-example">Adding a new code lab example</a></h3>
<p>All codelabs are organized within the <code>/examples</code> folder. You may add new codelabs to this folder by following the prescribed guidelines below:</p>
<ul>
<li>Ensure that your codelab is organized within its own named folder. Ensure you use all lowercase, non-whitespace names.</li>
<li>Ensure your new codelab has its own <code>README.md</code> file placed in its root folder. This should be the main page of the documented codelab.</li>
<li>If any images are used, ensure they are stored in the <code>[your_code_lab]/assets</code> folder and referenced using relative paths.</li>
<li>Once the codelab is added, ensure that you update the main <code>README.md</code> in the root directory of the codebase to include references to your new codelab under the section &quot;Samples and Tutorials&quot;.</li>
</ul>
<h3 id="adding-a-new-guide"><a class="header" href="#adding-a-new-guide">Adding a new guide</a></h3>
<p>All informational content which do not directly refer to modules / libraries or codelabs are typically stored under the <code>/support/guide</code> folder.</p>
<ul>
<li>Ensure that your new guide is contained within its own named folder. Ensure you use all lowercase, non-whitespace names.</li>
<li>If any images are used, ensure they are stored in the <code>[your_guide]/assets</code> folder and referenced using relative paths.</li>
<li>The markdown pages of your guide must be named based on the title of the rendered page in lowercase, non-whitepsace characters, e.g. <code>this_is_my_guide.md</code>.</li>
<li>Once the guide is added, ensure that you update the main <code>README.md</code> in the root directory of the codebase to include references to your new guide under the applicable section.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributors"><a class="header" href="#contributors">Contributors</a></h1>
<p>Here is a list of the contributors who have helped create and improve Jaseci. Big shout-out to them!</p>
<ul>
<li><a href="https://github.com/marsninja">Jason Mars (marsninja)</a></li>
<li><a href="https://github.com/ypkang">Yiping Kang (ypkang)</a></li>
<li><a href="https://github.com/AshishMahendra">Ashish Mahendra (AshishMahendra)</a></li>
<li><a href="https://github.com/king-mango">Timothy Shiwprasad (king-mango)</a></li>
<li><a href="https://github.com/Gim3l">Gimel Dick (Gim3l)</a></li>
<li><a href="https://github.com/codedbychavez">Chavez Harris (codedbychavez)</a></li>
<li><a href="https://github.com/ashagraw91">Ashish Agrawal (ashagraw91)</a></li>
<li><a href="https://github.com/SatyamRajawat">Satyam Singh (SatyamRajawat)</a></li>
<li><a href="https://github.com/amadolid">Alexie Madolid (amadolid)</a></li>
<li><a href="https://github.com/BrianLifeLogify">Brian Yang (BrianLifeLogify)</a></li>
<li><a href="https://github.com/Gorgeous-Patrick">Gorgeous-Patrick</a></li>
<li><a href="https://github.com/Shawn-Jemmott">Shawn Jemmott (Shawn-Jemmott)</a></li>
<li><a href="https://github.com/azealin">azealin</a></li>
<li><a href="https://github.com/pathakshyam">pathakshyam</a></li>
<li><a href="https://github.com/dominicbraam">dominicbraam</a></li>
<li><a href="https://github.com/ChrisIsKing">Christopher Clarke (ChrisIsKing)</a></li>
<li><a href="https://github.com/eldonm">Eldon Marks (eldonm)</a></li>
</ul>
<p>If you feel you're missing from this list, feel free to add yourself in a PR.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="jaseci-overview"><a class="header" href="#jaseci-overview">Jaseci Overview</a></h1>
<h2 id="what-is-jaseci"><a class="header" href="#what-is-jaseci">What is Jaseci?</a></h2>
<p>Jaseci is an end-to-end open-source and Open Computational Model, Technology Stack, and Methodology for bleeding edge AI. It enables developers to rapidly build robust products with sophisticated AI capabilities at scale.</p>
<h2 id="why-jaseci"><a class="header" href="#why-jaseci">Why Jaseci?</a></h2>
<ul>
<li>Jaseci brings application development, AI Models and code infrastructure together under a single solution stack. </li>
<li>Jaseci comes with pre-built, pre-trained AI models for most AI Related tasks out of the box.</li>
<li>Using the JAC Programming language you are able to leverage all the goodness that Jaseci has to offer such as wielding powerful AI models and exposing complex business logic via automatically generated APIs.</li>
<li>The integrated Jaseci Diffuse Runtime System handles the orchestration, configuration and optimization of the full cloud compute stack and inter-machine resources such as container formation, scaling and optimization. In essence it provides all the technology needed to develop an AI application in one platform.</li>
<li>Jaseci allows you to remove data management from your workflow with a baked-in data persistence layer.</li>
<li>Jaseci was desgined to reduce development team specializations. You'll only need a single Jaseci Engineer to do the work of DevOps Engineers, Frontend and Backend engineers and AI engineers.</li>
<li>With Jaseci's graph-based representation of data and operations, you'll be able to visualize your solutions and navigate complexity with ease.</li>
<li>Develop rapidly with Jaseci's level of abstraction and automatically generated APIs.</li>
<li>You get to focus focus on building your solution instead of reinventing the wheel.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installing-jaseci"><a class="header" href="#installing-jaseci">Installing Jaseci</a></h1>
<ul>
<li><a href="support/guide/getting_started/installation.html#installing-on-windows">Installing on Windows</a></li>
<li><a href="support/guide/getting_started/installation.html#installing-on-mac">Installing on Mac</a></li>
</ul>
<h2 id="installing-on-windows"><a class="header" href="#installing-on-windows">Installing on Windows</a></h2>
<h3 id="software-requirements"><a class="header" href="#software-requirements">Software Requirements</a></h3>
<ul>
<li>Ubuntu 20+</li>
<li>python 2.8 +</li>
<li>pip package manager</li>
</ul>
<p>To run commands for Jaseci we need a terminal that accepts bash arguments. We recommend using the Ubuntu terminal that comes as the default with WSL.</p>
<ol>
<li>Check if WSL is installed by running the following the Windows powershell terminal :</li>
</ol>
<p> <code>python  wsl -l -v  </code>
 This will return  the flavour of the distribution used for WSL. The version column will show the version of WSL.</p>
<ol start="2">
<li>If no version is specified open windows powershell in  adminstrator mode and install WSL by running :</li>
</ol>
<pre><code class="language-bash">  wsl --install
</code></pre>
<ol start="3">
<li>Restart your Computer</li>
</ol>
<p>4.Open the Ubuntu terminal. for more information on installation see <a href="https://docs.microsoft.com/en-us/windows/wsl/install">here.</a></p>
<p>Install Python and Pip packet Manager</p>
<ol start="5">
<li>Check version of Python and Pip by running :</li>
</ol>
<pre><code>python3 --version
pip3 --version
</code></pre>
<p>If these packages are installed they will return a version number. Move to step 7 if a version number is present.</p>
<p>6.Install Python3 and pip3 by running the following:</p>
<pre><code>sudo apt update
sudo apt install python3-dev python3-pip
</code></pre>
<p>7.Once the Python and pip packages are installed. Now to install Jaseci and Jaseci Kit</p>
<pre><code>pip install jaseci
</code></pre>
<pre><code>pip install jaseci-kit
</code></pre>
<ol start="8">
<li>To ensure our installation is working run :</li>
</ol>
<pre><code>jsctl
</code></pre>
<p>Once it shows a list of options and commands, you're installation is complete</p>
<h2 id="installing-on-mac"><a class="header" href="#installing-on-mac">Installing on Mac</a></h2>
<p>Install Python and Pip packet Manager</p>
<ol start="5">
<li>Check the version of Python and Pip by running :</li>
</ol>
<pre><code>python3 --version
pip3 --version
</code></pre>
<p>If these packages are installed they will return a version number. Move to step x if a version number is present.</p>
<p>6.Install Python3 and pip3 by running the following:</p>
<pre><code>brew update
brew install python
</code></pre>
<p>7.Once the Python and pip packages are installed. Now to install Jaseci and Jaseci Kit</p>
<pre><code>pip install jaseci
</code></pre>
<pre><code>pip install jaseci-kit
</code></pre>
<ol start="8">
<li>To ensure our installation is working run :</li>
</ol>
<pre><code>jsctl
</code></pre>
<p>Once it shows a list of options and commands, you're installation is complete.</p>
<p>Linux Installation</p>
<p>Install Python and Pip packet Manager</p>
<ol start="5">
<li>Check the version of Python and Pip by running :</li>
</ol>
<pre><code>python3 --version
pip3 --version
</code></pre>
<p>If these packages are installed they will return a version number. Move to step x if a version number is present.</p>
<p>6.Install Python3 and pip3 by running the following:</p>
<pre><code>sudo apt update
sudo apt install python3-dev python3-pip
</code></pre>
<p>7.Once the Python and pip packages are installed. Now to install Jaseci and Jaseci Kit</p>
<pre><code>pip install jaseci
</code></pre>
<pre><code>pip install jaseci-kit
</code></pre>
<ol start="8">
<li>To ensure our installation is working run :</li>
</ol>
<pre><code>jsctl
</code></pre>
<p>Once it shows a list of options and commands, your installation is complete.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setting-up-your-code-editor"><a class="header" href="#setting-up-your-code-editor">Setting up your Code Editor</a></h1>
<p>Visual Studio code is a popular IDE used by developers of all operating systems. This IDE comes with a Jac extension to aid in your coding Journey.</p>
<ol>
<li>
<p>If you already have VS code installed move to step 3. Download Visual Studio code by selecting <a href="https://code.visualstudio.com/">here</a></p>
</li>
<li>
<p>Once download is completed . Open and follow the installation instructions.</p>
</li>
<li>
<p>Once Installation is completed open VS code and install the JAC extension.</p>
</li>
<li>
<p>Go to View &gt; Command Palette . Type Install and select extensions.</p>
</li>
<li>
<p>search JAC and select it then install.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="writing-your-first-app"><a class="header" href="#writing-your-first-app">Writing your first app</a></h1>
<p>Let's create a simple conversational Agent using Jaseci and Jaseci Kit. We're gonna create a Chatbot for students to sign up for Jaseci Dojo !</p>
<p>Before we begin ensure you have Jaseci and Jaseci Kit installed. If not, see the Installation <a href="support/guide/getting_started/&#x27;/installation&#x27;">here</a></p>
<p>Create a file called graph.jac. Here we are going to create the conversational flow for the chatbot .</p>
<pre><code class="language-jac">
# state is the name of the node
node state {
    has title;
    has message;
    has prompts;
}

</code></pre>
<p>Nodes can be thought of as the representation of an entity.
Nodes are the fundamental unit of  a gaph. These can be considered to be the steps in which the Walker can take.</p>
<ul>
<li>Nodes are composed of Context and excutable actions.</li>
<li>Nodes execute a set of actions upon entry and exit.
 Here we are creating a <code>node</code> of name &quot;state&quot;
The <strong>has</strong> keyword is used to declare a variable of the node.</li>
</ul>
<pre><code class="language-jac">
# state is the name of this node
node state {
    has title;
    has message;
    has prompts;
}

# transition is the name of this edge
edge transition {
    has intent;
}
</code></pre>
<p>Edges are the link between nodes. They walker will use these edges to determine the next node to traverse to.
The <strong>has</strong> key word is used to declare the variable &quot;intent&quot;. This &quot;intent&quot; is what the Walker will use to to determine which node to go to next.</p>
<pre><code class="language-jac">
# state is the name of this node
node state {
    has title;
    has message;
    has prompts;
}
# transition is the name of this edge
edge transition {
    has intent;
}

# main_graph is name of the graph
graph main_graph {

    has anchor main_root

</code></pre>
<p>The <code>graph</code> is a collection of initialized nodes. 
The <code>has anchor</code> key word is used to identify the root node. The Root node is the node where the walker's traversal begins.
The <strong>has anchor</strong> key word is used to state the root node. The Root node is the node where the walker's traversal begins.</p>
<pre><code class="language-jac"># state is the name of this node
node state {
    has title;
    has message;
    has prompts;
}

edge transition {
    has intent;
}
graph main_graph {

    has anchor main_root

spawn {
     # this is the first node in the graph.
     main_root = spawn node::state(
        title = &quot;Welcome&quot;,
        message = &quot;Welcome to Jaseci Dojo, how can i help?&quot;,
        prompts = [&quot;class&quot;,&quot;times&quot;,&quot;prices&quot;,&quot;quit&quot;]
    );


    # this creates a node that goes from main_root to class.
    prices = spawn main_root -[transition(intent=&quot;prices&quot;)] -&gt; node::state(
        title = &quot;prices&quot;,
        message = &quot;Prices Vary based on age&quot;,
        prompts = [&quot;12 and younger&quot;, &quot;18 and younger&quot; ,&quot;Older than 18&quot;, &quot;quit&quot;]
    );

    # this creates a node from the prices node to here.
     prices_12 = spawn prices -[transition(intent=&quot;12 and younger&quot;)] -&gt; node::state(
        title = &quot;prices&lt;12&quot;,
        message = &quot;Childer under 12 pay $100 per month&quot;,
        prompts = [&quot;more prices&quot;, &quot;quit&quot;]
    );

    # this create an edge from prices_12 back to prices.
     prices_12 -[transition(intent=&quot;more prices&quot;)] -&gt; prices;


}

</code></pre>
<p><code>spawn</code> is used to create to create child nodes, which is used to design flow of the conversational experience.
We are able to create additional edges to connnect nodes which which do not share a parent -child relationship. This is shown in the last line.</p>
<pre><code class="language-jac">node state {
    has title;
    has message;
    has prompts;
}


edge transition {
    has intent;
}

graph main_graph {
    has anchor main_root;

    spawn {

        main_root = spawn node::state(
        title = &quot;Welcome&quot;,
        message = &quot;Welcome to Jaseci Dojo, how can i help?&quot;,
        prompts = [&quot;class&quot;,&quot;times&quot;,&quot;prices&quot;,&quot;quit&quot;]
    );

    prices = spawn main_root -[transition(intent=&quot;prices&quot;)] -&gt; node::state(
        title = &quot;prices&quot;,
        message = &quot;Prices Vary based on age&quot;,
        prompts = [&quot;12 and younger&quot;, &quot;18 and younger&quot; ,&quot;Older than 18&quot;, &quot;quit&quot;]
    );

    prices_12 = spawn prices -[transition(intent=&quot;12 and younger&quot;)] -&gt; node::state(
        title = &quot;prices&lt;12&quot;,
        message = &quot;Childer under 12 pay $100 per month&quot;,
        prompts = [&quot;more prices&quot;, &quot;quit&quot;]
    );
     prices_12 -[transition(intent=&quot;more prices&quot;)] -&gt; prices;

     prices_18 = spawn prices -[transition(intent=&quot;18 and younger&quot;)] -&gt; node::state(
        title = &quot;prices&lt;18&quot;,
        message = &quot;Childer under 18 pay $110 per month&quot;,
        prompts = [&quot;more prices&quot;, &quot;quit&quot;]
    );

    prices_18 -[transition(intent=&quot;more prices&quot;)] -&gt; prices;

     pricesabove18 = spawn prices -[transition(intent=&quot;Older than 18&quot;)] -&gt; node::state(
        title = &quot;pricesadults&quot;,
        message = &quot;Adults over 18 pay $150 per month&quot;,
        prompts = [&quot;more prices&quot;,&quot;quit&quot;]
    );
     pricesabove18 -[transition(intent=&quot;more prices&quot;)] -&gt; prices;


    class = spawn main_root -[transition(intent=&quot;class&quot;)]-&gt; node::state(
        title = &quot;class&quot;,
        message = &quot;There are 3 classes per week and you are required to attend a minimum of 2.&quot;,
        prompts = [&quot;time&quot;,&quot;days&quot;,&quot;prices&quot;,&quot;quit&quot;]

    );



    time = spawn class -[transition(intent=&quot;time&quot;)]-&gt; node::state(
        title = &quot;time&quot;,
        message = &quot;Classes are from 3 pm to 4 pm&quot;,
        prompts = [&quot;other times&quot;,&quot;days&quot;,&quot;quit&quot;]
    );

    main_root -[transition(intent=&quot;times&quot;)] -&gt; time;

    other_time = spawn time -[transition(intent=&quot;other times&quot;)]-&gt; node::state(
        title = &quot;Other times&quot;,
        message =&quot;The clases are at 4 pm to 5 pm but you need at least 4 other students to start&quot;,
        prompts = ['days',&quot;quit&quot;]
    );




     days = spawn time -[transition(intent=&quot;days&quot;)]-&gt; node::state(
        title = &quot;days&quot;,
        message =&quot;The classes are on Monday ,Wednesday , Friday&quot;,
        prompts = ['time',&quot;quit&quot;]
    );


     other_time - [transition(intent=&quot;days&quot;)] -&gt; days ;
     days - [transition(intent=&quot;time&quot;)] -&gt; time ;

    }
}

</code></pre>
<p>This last code block we created several nodes and connected them together. To move from node to node we use the intent to sepcify which route to take.</p>
<p>Walker</p>
<ul>
<li>Walkers traverse the nodes of the graph triggering execution at the node level.</li>
</ul>
<p>Now lets create a file called walker.jac
Here is where we will create  the method for traveral of the graph.</p>
<pre><code class="language-jac">
#here we initialize the walker which we named talker.
walker talker {

    has utterance;

    state {
        #prints out the message and prompts variables for the node the walker is currently on
        std.out(here.message,here.prompts);

        #here we take the input from the terminal.
        utterance =  std.input(&quot;&gt; &quot;);

        #if the user enters &quot;quit&quot; the programs ends.
        if(utterance==&quot;quit&quot;): disengage;

        #checks the utterance and determine which node to traverse too.
        take -[transition(intent==utterance )] -&gt; node::state else{
            take here ;
        }
    }

}

</code></pre>
<p>The Walker will start from the main root and from the utterance intered it will determine which node to go to next.
It should be noted the utterance must match the prompts chosen or the walker will not move from the graph.
Jaseci-kit has features that makes it possible for users to not enter the exact intent but still traverse to the right node.</p>
<p>Main</p>
<p>Create a file named main.jac .</p>
<pre><code class="language-jac"># import the graph and walker made earlier.
import {*} with &quot;./graph.jac&quot;;
import {*} with &quot;./walker.jac&quot;;

# this walker is reponsible for starting the program.
walker init {

    root {
        #creates an instant of the graph
        spawn here --&gt; graph::main_graph;

        #creates an instance of the walker, talker
        spawn  --&gt; walker::talker;
    }


}

</code></pre>
<p>Once we run main.jac we can use the Chatbot. Play around with graph and add your own nodes and link other nodes together to create an even better chatbot.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="understanding-jac-programs"><a class="header" href="#understanding-jac-programs">Understanding JAC Programs</a></h1>
<p>JAC Programs are authored by the JAC language which is used to define structure and behaviour. Behaviour can be modeled in the form of actions and abilities within node elements of the graph as well as walker elements which are specifically designed to traverse the nodes and edges of a graph. Structure can be modeled by arranging a number of nodes and edges in a particular manner, compelte with state, to form a graph. </p>
<p>When a JAC program executes, the structural and behavioral definitions encoded in JAC are registered with the Jaseci Runtime Machine in the form of a Sentinel. Named Walkers may then be launched on a graph via an API call. </p>
<p>Walkers may be designed to report their output. Reports come back via API once a walker has completed its walk, these reports will be a json payload of objects.</p>
<p>Graphs comprise nodes and edges. Nodes have abilities that can be activated when a walker travers on it. The Walker traverse the graph and decides which paths to take by using the edges. </p>
<p>All traversal begins at the Init or default node. This <code>init</code> node will connect to the main root of our graph.</p>
<p><img src="support/guide/getting_started/../assets/root_node.png" alt="Pic of Main Root" /></p>
<p>The Walkers are initialized and added on the root node and from there they begin traveral.
The walkers decide which node to travel to based on which edge satisfies it's intent. The intent being a criteria meet by the edge.</p>
<p><img src="support/guide/getting_started/../assets/graph.png" alt="Pic of Nodes and Edges" /> </p>
<p>The Walker can move from node to node along edges. It can also be spawned directly on any node without the need for a traversal</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="an-overview-of-the-jac-language"><a class="header" href="#an-overview-of-the-jac-language">An Overview of the JAC Language</a></h1>
<p>JAC is the official programming language of Jaseci, specifically designed for developers to author the computational logic which governs the various Jaseci constructs such as libraries, walkers, nodes, edges and graphs. Syntactically, JAC draws from JavaScript and Python but it brings a variety of graph-based operators and expressions that go with the unique development paradigm of Jaseci.</p>
<p>To get acquainted with JAC, you'll first have to understand its various constructs which are governed by the language. Here's an overview of the Jaseci constructs and related terms:</p>
<h3 id="action"><a class="header" href="#action">Action</a></h3>
<ul>
<li>Actions are computational processing elements. </li>
<li>Actions take in a list of context items as input and outputs one or many context items. </li>
<li>All possible actions are provided by Jaseci. </li>
<li>Actions attached to nodes, edges, etc will search walker, itself, then higher dimentional nodes for input contexts in that order,</li>
</ul>
<h3 id="context"><a class="header" href="#context">Context</a></h3>
<ul>
<li>Context is a list of one or more key-value pairs. </li>
</ul>
<h3 id="nodes-and-hd-graph-domains-and-planes"><a class="header" href="#nodes-and-hd-graph-domains-and-planes">Nodes and HD Graph Domains and Planes</a></h3>
<ul>
<li>Nodes are composed of context and executable actions. </li>
<li>Nodes accumulate context via a push function, context can be read as well. </li>
<li>Nodes execute a set of actions upon: 
<ol>
<li>Entry </li>
<li>Exit </li>
</ol>
</li>
<li>Activity actions in a node denote actions that a walker can call at any time</li>
<li>Nodes must be aware of the set of HDGDs of which it is a member. </li>
<li>Nodes must trigger processing of HDGDs of which it is a member upon events. 
<ul>
<li>Seperate actions at the HDGDs above can occur on entry and exit events </li>
</ul>
</li>
<li>At the first dimension, these are essentially subsets of nodes for which there are common traits. Traits can include context both static and dynamic (built over time) or actions to be executed upon []
<ol>
<li>entry from some edge into the domain from another domain at the given dimensionality,</li>
<li>edge traversals within a domain, or</li>
<li>exits out of the domain to antoher domain at the domains given dimensionality.</li>
</ol>
</li>
<li>At higher dimensions, these HDGDs are comprised of HDGDs of the next dimension down and function similarly with the element case but instead of nodes they comprise of HDGDs. (HDGD_2 is a graph comprised of HDGD_1 graphs)</li>
<li>Transitions at a given dimension can only occur between domains of that dimension or to non-domain nodes.</li>
<li>HDGDs can overlap at a given dimension.</li>
<li>Each domain at any dimensionality has a root node.</li>
<li>Transitions at the node level trigger computation in parallel at all dimensions of HDGDs for which that node is a member of.</li>
<li>Optional:
<ul>
<li>Upon creation of an edge between nodes that is first to span HDGD bounderies at any dimensionality, an edge is created implicity betwen HDGDs at that dimensionality (these edges function exactly like edges between nodes). At this point the edges can carry context and actions.</li>
<li>Upon deletion of an edge between nodes that is the last to span HDGD bounderies at any dimensionality, the edge that was created connecting those HDGDs is deleted.</li>
<li>Nodes have an anchor context value that is used to represent the 'value' of the node, for example when deciding which outbound node a walker should take based on some evaluation. Each node can select only one element from context to be it's anchor</li>
</ul>
</li>
</ul>
<h3 id="edges"><a class="header" href="#edges">Edges</a></h3>
<ul>
<li>Edges are composed of context and executable actions </li>
<li>Edges accumulate context via a push function, context can be read as well </li>
<li>Edges execute a set of actions when traversed. </li>
<li>Edges much be aware of the set of HDGDs of which it is a member. </li>
<li>Edges crossing HDGD boundaries must trigger higher order HDGD plane edges. </li>
</ul>
<h3 id="walkers"><a class="header" href="#walkers">Walkers</a></h3>
<ul>
<li>Walkers walk nodes triggering execution at the node level and HDGD levels.</li>
<li>Walkers can pick up context as they traverse.</li>
<li>Walkers also decide which node to travel through next and records the path of travel (trail) to be recorded within it's own context.</li>
<li>Walkers can be spawned at any node.</li>
<li>Walkers can spawn other walkers.</li>
<li>Computation happens at the Node and HDGD levels. However walkers make decisions on where to walk next and which context to pick up.</li>
<li>Walker context must be preloaded by sentinel or applications as a form of input and configuration for the walk</li>
<li>Walkers can carry with them their own actions and contexts that is executed whenever specified in the walkers own code</li>
</ul>
<h3 id="sentinels"><a class="header" href="#sentinels">Sentinels</a></h3>
<ul>
<li>Sentinels watch walkers, aggregate outcomes of walking, and enact policies.</li>
<li>Each walker must have a sentinel and the division of labor is
<ol>
<li>Walkers are concerned primarily for walking the graph.</li>
<li>Sentinels will take the results of one or more walkers to perform some higher order objective (i.e., resolution)</li>
</ol>
</li>
<li>Keeps context that can be used to save derivitave application behavior.</li>
<li>Sentials harbor walkers, architype and jac programs that encode walkers and architypes</li>
<li>Sentials can 'register' Jac programs which is a sort of compile that will generate architypes and walkers</li>
<li>If the program has syntax errors registration fails, once registered walkers fail at runtime</li>
</ul>
<h3 id="architypes"><a class="header" href="#architypes">Architypes</a></h3>
<ul>
<li>Registers templatized version of instances of any Jaseci abstractions or collections of instances (e.g., subgraphs, etc)</li>
</ul>
<h3 id="graph"><a class="header" href="#graph">Graph</a></h3>
<ul>
<li>A graph is a root node (inhereted from node) and manages sentinels, and higher dimentional nodes</li>
</ul>
<h3 id="masters"><a class="header" href="#masters">Masters</a></h3>
<ul>
<li>This is the center of management of a jaseci instance that orchestrates the manipulation of graphs</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="jac-grammar"><a class="header" href="#jac-grammar">JAC Grammar</a></h1>
<pre><code>program     : element*

element     : architype
            : walker

architype   : KW:NODE (COLON INT)? ID LBRACE attr_stmts RBRACE
            : KW:EDGE ID LBRACE attr_stmts RBRACE

walker      : KW:WALKER ID code_block

statements  : statement*

statement   : architype
            : walker
            : code_block
            : node_code
            : expression SEMI
            : if_stmt
            : for_stmt
            : while_stmt

code_block  : LBRACE statements RBRACE
            : COLON statement SEMI

node_code   : dotted_name code_block

expression  : dotted_name EQ expression
            : compare (KW:AND|KW:OR compare)*

if_stmt     : KW:IF expr code_block (elif_stmt)* (else_stmt)*

for_stmt    : KW:FOR expression KW:TO experssion KY:BY expression code_block

while_stmt  : KW:WHILE expression code_block

attr_stmts  : attr_stmt*

dotted_name : ID (DOT ID)*

compare     : NOT compare
            : arithmetic ((EE|LT|GT|LTE|GTE) arithmetic)*

attr_stmt   : KW:HAS ID (, ID)* SEMI
            : KW:CAN dotted_name (, dotted_name)* SEMI
            : arch_set SEMI

arch_set    : KW:NAME EQ expression
            : KW:KIND EQ expression

arithmetic  : term ((PLUS|MINUS) term)*

term        : factor ((MUL|DIV) factor)*

factor      : (PLUS|MINUS) factor
            : power

power       : func_call (POW factor)*

func_call   : atom (LPAREN (expression (COMMA expression)*)? RPAREN)?

atom        : INT|FLOAT|STRING
            : dotted_name (LSQUARE expression RSQUARE)*
            : LPAREN expr RPAREN
            : list</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="keywords"><a class="header" href="#keywords">keywords</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operators"><a class="header" href="#operators">Operators</a></h1>
<h2 id="arthimetic"><a class="header" href="#arthimetic">Arthimetic</a></h2>
<pre><code class="language-jac">// addition
a = 4 + 4;
e = a + b + c + d;

// multiplication
b = 4 * -5;

// division
c = 4 / 4;  # Returns a floating point number

// subtraction
d = 4 - 6;

// exponent / power
a = 4 ^ 4;

// modulus
b = 9 % 5

</code></pre>
<h2 id="equality"><a class="header" href="#equality">Equality</a></h2>
<pre><code class="language-jac">// equal
a == b

// not equal
a != b

// less than
a &lt; b

// greater than
a &gt; b

// less than and equal to
a &lt;= b

// greater than and equal to
a &gt;= b
</code></pre>
<h2 id="logical"><a class="header" href="#logical">Logical</a></h2>
<pre><code class="language-jac">// not
!a,

// and
a &amp;&amp; b
a and b

// or
a || b
a or b

// mixture
!a or b
!(a and b)
</code></pre>
<h2 id="assigments"><a class="header" href="#assigments">Assigments</a></h2>
<pre><code class="language-jac">a = 4 + 4;
a += 4 + 4;
a -= 4 * -5;
a *= 4 / 4;
a /= 4 - 6;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="control-flow"><a class="header" href="#control-flow">Control Flow</a></h1>
<h2 id="select-statement"><a class="header" href="#select-statement">Select Statement</a></h2>
<pre><code class="language-jac"># simple If statement
walker init {
    x = 3.56;
    y = &quot;X is not equal to 3.45&quot;;

    if (x ==3.45) {
        std.out(x);
    }
    elif (x==3.56){
        std.out(&quot;it's a match&quot;);
    }
     else {
        std.out(y);
    }
}

</code></pre>
<p>Other Conditional statements like &lt; , &gt; ,!= , &quot;and&quot; and &quot;or&quot; are also supported.</p>
<h2 id="for-and-while-loop"><a class="header" href="#for-and-while-loop">For and While loop</a></h2>
<p>Loops are written similiar to python it run a specific amount of time as in the case of the &quot;For&quot; loop or until a condition is meet as in the case for the &quot;While&quot; loop.</p>
<pre><code class="language-jac">walker init {
    # the for loop
    for i=0 to i&lt;10 by i+=1:
        std.out(i)

    #the while loop
    while(x&lt;10){
        std.out(x);
        x = x +1;
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="collections"><a class="header" href="#collections">Collections</a></h1>
<p>Collection refers to dictionary , lists ...</p>
<h2 id="dictionary"><a class="header" href="#dictionary">Dictionary</a></h2>
<pre><code class="language-jac">
dict = {
    'name' : 'John',
    'height_in_ft' : 6.8,
    'employed' : True
    
} ;

</code></pre>
<h2 id="list"><a class="header" href="#list">List</a></h2>
<pre><code class="language-jac">AI_modesl  = ['use_qa','use_enc','bi_enc'];
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nodes"><a class="header" href="#nodes">Nodes</a></h1>
<p>Nodes are the building blocks of any JAC program. Nodes are the destinations of Walkers. Nodes have abilities which are similar to functions in python. These abilities can be triggered when walkers traverse on to or leave the Node or even triggered by the Walker if needed. 
Nodes can be created to serve different functions. All Nodes are linked together in a graph by edges.</p>
<p>A node is a representation of an entity.</p>
<ul>
<li>Nodes are composed of Context and excetuable actions.</li>
<li>Nodes accumulate context via a push function, context can be read ass well</li>
<li>Nodes can execute a set of actions upon entry and exit.</li>
</ul>
<h2 id="defining-node-attributes"><a class="header" href="#defining-node-attributes">Defining Node Attributes</a></h2>
<p>Attributes are variables within the node.</p>
<pre><code class="language-jac">node [name of node]{
    # to declare an attribute we uses the [has] keyword followed by the attribute name.
    has variable;
    # to use a module from jaseci kit
    can use_qa;
}
</code></pre>
<h2 id="adding-abilities"><a class="header" href="#adding-abilities">Adding abilities</a></h2>
<p>Functions in JAC are avalibale to Nodes only. They are called Abilities instead of Functions.These abilities can be activated when a walker travers over a node . Abilities can be triggered when a Walker first traverse over a node , leaves a node , triggered by the walker or when a specific walker enter or leaves a node.</p>
<p>Abilities in nodes can be declared as followed:</p>
<pre><code class="language-jac">node state {
  # any walker can use ability
  can ability6 {
    # execute some code
  }
  # Walker enters a node 
    can ability  entry {
        #execute some code.
    }
    # Walker exits a node 
    can ability2  exit {
        # execute some code 
    }
    
    # specific walker enters
    can ability3 with walker1 entry {
        # execute some code
    }

    # specific walker exits
    can ability4 walker1 exits {

    }

    # only specifc walker can use ability 
    can ability5 walker2 {
        # code to execute
    }
}

</code></pre>
<h2 id="inheritance-on-nodes"><a class="header" href="#inheritance-on-nodes">Inheritance on Nodes</a></h2>
<p>Nodes can inherit abilities and attributes of other nodes. </p>
<pre><code class="language-jac"># parent node 

node state {
    has title;
    has message;
    has prompts;
}

# inherits attributes from state node.
node input_state:state {
    has input;
}

# inherits attributes from input_state.
node output_state :input:state{
    has output;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="edges-1"><a class="header" href="#edges-1">Edges</a></h1>
<p>Edges are the links that connect nodes to each other</p>
<ul>
<li>Edges associate one node with another by way of a uni-directional or bidirectional path definition.</li>
<li>Edges are composed of context and executable actions.</li>
<li>Edges accumulate context via a push function, context can be read as well.</li>
<li>Edges execute a set of actions when traversed.</li>
<li>Edges much be aware of the set of HDGDs of which it is a member.</li>
<li>Edges crossing HDGD boundaries must trigger higher order HDGD plane edges.</li>
</ul>
<pre><code class="language-jac">edge [name of edge] {
    has variable;
}

</code></pre>
<h2 id="linking-nodes-together-with-an-edge"><a class="header" href="#linking-nodes-together-with-an-edge">Linking Nodes together with an Edge</a></h2>
<pre><code class="language-jac">
node state {
    has context;
}

edge transition {
    has intent ;
}

graph main {
    has anchor main_root ; 

    # create nodes here with the edges linking them.
    spawn {
        main_root = spawn node:: state(context=&quot;main node&quot;);

        # create node that connects to main_root
        node_one = spawn main_root -[transition(intent=&quot;one&quot;)] -&gt; node::state(context=&quot;node one&quot;);

        
        # connect node that connects to node_one
        node_two  = spawn node_one -[transition(intent=&quot;two&quot;)] -&gt; node::state(context=&quot;node two&quot;);

    }

}

</code></pre>
<h2 id="inheritance-on-edges"><a class="header" href="#inheritance-on-edges">Inheritance on Edges</a></h2>
<p>Edges can inherit abilities and attributes of other edges.</p>
<pre><code class="language-jac"># parent edge 
edge transition {
    has transition_next ;
}
# child edge
edge transition_back: transition {
    has prev_step ;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="graphs"><a class="header" href="#graphs">Graphs</a></h1>
<ul>
<li>Graphs are an arrangement of nodes and edges</li>
</ul>
<pre><code class="language-jac">graph [name of graph] {
    this is the root node of the graph
    has anchor [name of anchor];

    #here is where we start to connect nodes with edges creating a graph.
    spawn{
        # declare your nodes in here 

     }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="walkers-1"><a class="header" href="#walkers-1">Walkers</a></h1>
<ul>
<li>Walkers traverse nodes triggering execution at the node level.</li>
<li>Walkers have the ability to pick upand retain context, which can be taken across nodes.</li>
<li>Walkers also decides which node to travel to through next and records the path of travel to b recorded within it's own context.</li>
<li>Walkers can be spawned at any node</li>
<li>Walker can spawn other walkers.</li>
<li>Walkers can carry with them their own actions and contexts that is executed whenever specified in the walkers own code</li>
</ul>
<h2 id="defining-a-walker"><a class="header" href="#defining-a-walker">Defining a Walker</a></h2>
<pre><code class="language-jac"> walker [name_of_walker]{

}
</code></pre>
<p>Defining specific node code to execute When defining a walker, you also write specific code blocks that will only execute when the walker is on a specific node.</p>
<pre><code class="language-jac"> walker [name_of_walker]{
    [Any code here is executed regardless of the node the walker is on]
    ...
    ...

    person{
     [Any code within this block will only be executed when the walker is on a person node]
   }

   ...

   family{
    [Any code within this block will only be executed when the walker is on a family node]
   }

}
</code></pre>
<h2 id="more-on-behaivour-with-abilities"><a class="header" href="#more-on-behaivour-with-abilities">More on Behaivour with Abilities</a></h2>
<h3 id="with-entry-and-exit"><a class="header" href="#with-entry-and-exit">With Entry and Exit</a></h3>
<p>When defining a walker, you also have the ability to write specific code blocks that execute if and only if a walker enters or exists a node. Any code within the with_entry block is the first thing that executes as soon as a walker enter a node. And the opposite is true for with_exit, triggering only when the walker is about to leave a node.</p>
<pre><code class="language-jac">walker [name_of_walker]{
    with entry{
        [code to execute when a walker first enters a node]
    }
    ...
    ...

    with exit{
        [code to execute when a walker is about to leave a node]
    }
}

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="traversing-a-graph"><a class="header" href="#traversing-a-graph">Traversing a Graph</a></h1>
<ul>
<li>Take is used for nodes/Edge trversal in a walker </li>
<li>Only until all other walker logic is executed, then all queued up take operations are executed.</li>
<li>An operation would tell the walker to move/traverse on to the next node with the given filter provided when using take.</li>
<li>When using the take command, you have the ability to filter by edges or edges that have a specific node attached.</li>
</ul>
<p>Consider the following diagram</p>
<p><img src="support/guide/jac_language_guide/../assets/take.png" alt="Diagram of a road map" /></p>
<p>The take command performs a breath first search to add take operations to the queue. Let's define a walker that traverses the various nodes and prints the node data. We'll assume this walker spawns and starts from the root <code>node 0</code>.</p>
<p><strong>Traversing to a generic node from a walker</strong></p>
<pre><code class="language-jac">// generic definition of the nodes. Nodes of type 'myNode' will have a 'data' property

node myNode: has anchor data;

walker myWalker{
    myNode{
        take --&gt;;
        std.out(here.data);
    }
}
</code></pre>
<p>With the assumption that this walker starts from <code>node 0</code>, this is how the take operations are queued and executed.</p>
<p><img src="support/guide/jac_language_guide/../assets/take-2.png" alt="Diagram of a road map" /></p>
<p>Upon spawning, the walker executes whatever logic it has to when on node of type myNode and in the logic of the above code snippet, the walker executes a take operation then prints the node data.</p>
<p>However, due to the way the take command works, the data is first printed before any traversal occurs. This is becasue the take command is asynchronous and doesn't execute right away. Instead, it queues up any traversal that needs to occur, executes any logic that come after the take command and once that is complete, dequeues and executes the next operation, which would be the traversal to node1.</p>
<p><img src="support/guide/jac_language_guide/../assets/take-3.png" alt="Diagram of a road map" /></p>
<p>At node 1 the walker executes a similar logic, queuing up nodes 3 and 4 then printing the value of node 1 before any traversal. Once that logic is finished, it checks the end of the queue for the next operation, which in this case would be traversal to node 2.</p>
<p><img src="support/guide/jac_language_guide/../assets/take-4.png" alt="Diagram of a road map" /></p>
<p>This process continues until the queue is empty or the walker is killed.</p>
<p><strong>Basic traversal using take</strong></p>
<pre><code class="language-jac">walker testWalker{
    node_type{
        take --&gt;;
    }
}

 walker testWalker2{
    node_type{
        take &lt;--;
    }
}
</code></pre>
<p><strong>Traversing to a specific type of node from a walker</strong></p>
<pre><code class="language-jac">walker testWalker{
    node_type{
        take --&gt; node::node_type;
    }
}

//node of type person as the filter

walker testWalker2{
    school{
        take --&gt; node::person;
    }
}
</code></pre>
<p>Take also allows the use of an else statement, should there be no edges with the filter specified in the take command.</p>
<p><strong>Executing alternative logic should there be no edges with the take filter</strong></p>
<pre><code class="language-jac">walker testWalker{
    node_type{
        take [some filter] else {

            // some additional logic if edge of filter not found
        }
    }
}

//traverse to friend edge, else print 'no friends found'

walker testWalker2{
    person{
        take -[friend]-&gt; else{;
            std.out('no friends found');
        }
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="referencing-a-node-in-context"><a class="header" href="#referencing-a-node-in-context">Referencing a Node in Context</a></h1>
<p>The <code>here</code> keyword is used reference the node the walker is currently on.</p>
<pre><code class="language-jac">walker talker {
    has utterance;

    state {
        #the message and prompts attribute of the current node will be printed
        std.out(here.message, here.prompts);

        utterance = std.input(&quot;&gt; &quot;);

        if(utterance == &quot;quit&quot;): disengage;

        take -[transition(intent == utterance)]-&gt; node::state else {
            take here;
        }
    }
}

</code></pre>
<p>The <code>visitor</code> keyword is used to reference attributes of the walker from the node it is currently on.</p>
<pre><code class="language-jac">node state{
    has prev_value;

    can getvalue with talker entry {
        here.prev_value = visitor.value;
        std.out(here.prev_value);
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="passing-arguments"><a class="header" href="#passing-arguments">Passing Arguments</a></h1>
<p>You can pass arguments to walkers , Nodes and Edges, in a similar way as passing arguments to functions in python.</p>
<h3 id="passing-arguments-to-walkers"><a class="header" href="#passing-arguments-to-walkers">Passing Arguments to Walkers</a></h3>
<pre><code class="language-jac">walker talker {
    has name;
    has value;

}

spawn::talker(name=&quot;Jaseci&quot; ,value = 10);
</code></pre>
<h3 id="passing-arguments-to-nodes"><a class="header" href="#passing-arguments-to-nodes">Passing Arguments to Nodes</a></h3>
<pre><code class="language-jac">node::calculator(first_number, second_number);
</code></pre>
<h3 id="passing-arguments-to-edges"><a class="header" href="#passing-arguments-to-edges">Passing arguments to Edges</a></h3>
<pre><code class="language-jac"># edge named transittion with argument orperation
[transition(operation)]-&gt; node ;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="specifying-operating-context"><a class="header" href="#specifying-operating-context">Specifying Operating Context</a></h1>
<p>Several types Of  Nodes can be created and each can  have several unique abilities. The abilities of specific nodes can be activated when a walkers traverese on to it . This can be done by specifying an operating context. This allows a walker to execute any of the nodes ability that it is currently on. The operating context of each type of node must be specified for it to be used.</p>
<pre><code class="language-jac">node state {
    has title;
    has message;
    has prompts;
}

node input_state:state {
    has input;
}

node closing_state:state;

edge transition {
    has intent;
}

walker talker {

state, input_state{

    #execute code specific to the state and input_state nodes

    input_state{

        #These operating context can be embedded within other operating context.
        
    }

}

closing_state{
 
    #execute code specific to  closing_state nodes

}

}

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actions-in-jaseci"><a class="header" href="#actions-in-jaseci">Actions in Jaseci</a></h1>
<ul>
<li>Actions are computational processing elements. </li>
<li>Actions take in a list of context items as input and outputs one or many context items.</li>
<li>All possible actions are provided by Jaseci. </li>
<li>Actions attached to nodes, edges, etc will search walker, itself, then higher dimentional nodes for input contexts in that order.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="date-actions"><a class="header" href="#date-actions">Date Actions</a></h1>
<p>Jaseci has it's own set of built-in Date Functions </p>
<h3 id="quantize-to-year"><a class="header" href="#quantize-to-year">Quantize to Year</a></h3>
<pre><code class="language-jac">#take a standard python datetime string and extract the year out of it accordingly

x = '2021-12-12';
z = date.quantize_to_year(x);
std.out(z);

</code></pre>
<h3 id="quantize-to-month"><a class="header" href="#quantize-to-month">Quantize to Month</a></h3>
<pre><code class="language-jac">#take a standard python datetime string and extract the month out of it accordingly
x = '2021-12-12';
z = date.quantize_to_month(x);
std.out(z);

</code></pre>
<h3 id="quantive-to-week"><a class="header" href="#quantive-to-week">Quantive to Week</a></h3>
<pre><code class="language-jac">#take a standard python datetime string and extract the month out of it accordingly
x = '2021-12-12';
z = date.quantize_to_week(x)
std.out(z);
</code></pre>
<h3 id="quantize-to-day"><a class="header" href="#quantize-to-day">Quantize to day</a></h3>
<pre><code class="language-jac">#take a standard python datetime string and extract the day out of it accordingly

x = '2021-12-12';
z = date.quantize_to_day(x);
std.out(z);
</code></pre>
<h3 id="date-difference"><a class="header" href="#date-difference">Date Difference</a></h3>
<pre><code class="language-jac">#t akes two datetime string and returns an integer that is the number of days in between the two given dates.

z = date.date_day_diff('2021-12-12','2022-12-12');
std.out(z);
</code></pre>
<pre><code></code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="file-actions"><a class="header" href="#file-actions">File Actions</a></h1>
<h3 id="load-file-to-string"><a class="header" href="#load-file-to-string">Load file to string</a></h3>
<pre><code class="language-jac"># Converts file to string , max_chars is set to none by default
Testfile = file.load_str(test.txt, max_chars = 1000)
</code></pre>
<h3 id="load-json-file-to-dictionary"><a class="header" href="#load-json-file-to-dictionary">Load Json file to dictionary</a></h3>
<pre><code class="language-jac"># Loads json from file to dictionary format
TestJson = file.load_json(test.json)
</code></pre>
<h3 id="string-to-file"><a class="header" href="#string-to-file">String to file</a></h3>
<pre><code class="language-jac"># dumps string in to file
test = &quot;This is a test of the dump_str method
Testfile = file.dump_str(&quot;text.txt&quot;,test)
</code></pre>
<h3 id="append-string-to-a-file"><a class="header" href="#append-string-to-a-file">Append string to a file</a></h3>
<pre><code class="language-jac"># appending a string to a file.
test = &quot;This is a another test but with  the append_str method
Testfile = file.append_str(str, max_chars = 1000)
</code></pre>
<h3 id="create-json-file"><a class="header" href="#create-json-file">Create Json File</a></h3>
<pre><code class="language-jac"># dump dictionary in to json file
test = {
    &quot;name&quot;: &quot;test&quot;,
    &quot;method&quot; : &quot;dump_json&quot;,
    &quot;use&quot; : &quot;dumps dictionary to json file&quot;
}
Testfile = file.dump_json(&quot;text.json&quot;,test)
</code></pre>
<h3 id="delete-file"><a class="header" href="#delete-file">Delete file</a></h3>
<pre><code class="language-jac">#delete any file 
file.delete(&quot;text.txt&quot;)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="net-actions"><a class="header" href="#net-actions">Net Actions</a></h1>
<h3 id="max-anchor-value"><a class="header" href="#max-anchor-value">Max Anchor Value</a></h3>
<pre><code class="language-jac"># returns object (node,edge) with the highest  anchor value
node year {
    has_anchor year_num;
}

jacset  = [year1,year2,year3];
value = net.max(jac_set)
</code></pre>
<h3 id="minimum-anchor-value"><a class="header" href="#minimum-anchor-value">Minimum Anchor Value</a></h3>
<pre><code class="language-jac"># returns object (node,edges) with the lowest anchor value
node year {
  
    has_anchor year_num;
}

jacset  = [year1,year2,year3];
value = net.min(jac_set)
</code></pre>
<h3 id="get-node-root"><a class="header" href="#get-node-root">Get Node Root</a></h3>
<pre><code class="language-jac"># returns root node of a given graph 
node year {
    has_anchor year_num;
}

jacset  = [year1,year2,year3];
value = net.root(jac_set)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rand-actions"><a class="header" href="#rand-actions">Rand Actions</a></h1>
<h3 id="seeds-random-number-generator"><a class="header" href="#seeds-random-number-generator">Seeds random number generator</a></h3>
<pre><code class="language-jac"># seeds random num generator
rand.seed(4);

</code></pre>
<h3 id="generate-random-generator"><a class="header" href="#generate-random-generator">Generate random generator</a></h3>
<pre><code class="language-jac"># Generates random integer between range (0-10)
num = rand.integer(0, 10);
</code></pre>
<h3 id="random-selection"><a class="header" href="#random-selection">Random Selection</a></h3>
<pre><code class="language-jac">a_list = ['apple','mango','orange']
# Randomly selects and return item from list
num = rand.choice(a_list);
</code></pre>
<h3 id="generate-random-word"><a class="header" href="#generate-random-word">Generate Random Word</a></h3>
<pre><code class="language-jac"># generate a random word
 wrd = rand.word();
</code></pre>
<h3 id="generate-random-sentence"><a class="header" href="#generate-random-sentence">Generate Random Sentence</a></h3>
<pre><code class="language-jac"># generates a random sentence
# min_lenght - optional , minimum amount of words defaut is 4
# max_lenght - optional ,  maximum amount of words default is 10
# sen - optional
senetence  = rand.sentence();
</code></pre>
<h3 id="generate-random-paragraph"><a class="header" href="#generate-random-paragraph">Generate Random Paragraph</a></h3>
<pre><code class="language-jac"># generates a random paragraph
# min_lenght - optional , minimum amount of setences defaut is 4
# max_lenght - optional ,  maximum amount of sentences default is 8
# sen - optional
paragraph = rand.paragraph();
</code></pre>
<h3 id="generate-random-text"><a class="header" href="#generate-random-text">Generate Random Text</a></h3>
<pre><code class="language-jac"># generates a random text
# min_lenght - optional , minimum amount of paragraph ,defaut is 3
# max_lenght - optional ,  maximum amount of paragraph default is 6
# sen - optional
 test  = rand.text();
</code></pre>
<h3 id="generate-time"><a class="header" href="#generate-time">Generate time</a></h3>
<pre><code class="language-jac"># Generate a random datetime between range.

returned time = rand.time(&quot;2020-10-25&quot;, &quot;2020-11-26);

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="request-actions"><a class="header" href="#request-actions">Request Actions</a></h1>
<p>Jaseci allows for in-code use of common request methods.</p>
<h3 id="get-request"><a class="header" href="#get-request">Get Request</a></h3>
<pre><code class="language-jac"># make get request 
# url : string  - url to where the request will be made 
# data : dictionary - data being sent that will be converetd to json.
# header : dicionary -  header data 
response = request.get(url ,data , headers)
</code></pre>
<h3 id="post-request"><a class="header" href="#post-request">Post Request</a></h3>
<pre><code class="language-jac"># make post request 
# url : string  - url to where the request will be made 
# data : dictionary - data being sent that will be converetd to json.
# header : dicionary -  header data 
response = request.post(url ,data , headers)
</code></pre>
<h3 id="put-request"><a class="header" href="#put-request">Put Request</a></h3>
<pre><code class="language-jac"># make put request 
# url : string  - url to where the request will be made 
# data : dictionary - data being sent that will be converetd to json.
# header : dicionary -  header data 
response = request.put(url ,data , headers)
</code></pre>
<h3 id="delete-request"><a class="header" href="#delete-request">Delete Request</a></h3>
<pre><code class="language-jac"># make delete request 
# url : string  - url to where the request will be made 
# data : dictionary - data being sent that will be converetd to json.
# header : dicionary -  header data 
response = request.delete(url ,data , headers)
</code></pre>
<h3 id="head-request"><a class="header" href="#head-request">Head Request</a></h3>
<pre><code class="language-jac"># make head request , returns header of  a get request alone
# url : string  - url to where the request will be made 
# data : dictionary - data being sent that will be converetd to json.
# header : dicionary -  header data 
response = request.head(url ,data , headers)
</code></pre>
<h3 id="option-request"><a class="header" href="#option-request">Option Request</a></h3>
<pre><code class="language-jac"># make options request , requests permitted communications options fror a given url or server.
# url : string  - url to where the request will be made 
# data : dictionary - data being sent that will be converetd to json.
# header : dicionary -  header data 
response = request.get(url ,data , headers)
</code></pre>
<h3 id="file-upload"><a class="header" href="#file-upload">File upload</a></h3>
<pre><code class="language-jac"># used to upload a file or files
# url : string  - url to where the request will be made 
# file : single base64 encoded file
# files : list of base64 encode files.
# header : dicionary -  header data 
response = request.multipart_base64(url ,file , headers)
</code></pre>
<h3 id="download-file"><a class="header" href="#download-file">Download File</a></h3>
<pre><code class="language-jac"># url : string  - url to where the request will be made 
# header : dicionary -  header data 
# encoding : strign - file format , default is utf-8
downloaded_file = request.file_download_base64(url,header,encoding)

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standard-actions"><a class="header" href="#standard-actions">Standard Actions</a></h1>
<h3 id="logging-output"><a class="header" href="#logging-output">Logging output</a></h3>
<pre><code class="language-jac">
# printing output to log
data = {
    &quot;type&quot; : &quot;String&quot;,
    &quot;name&quot; &quot; &quot;Jaseci&quot;
}
result  = std.log(data)

</code></pre>
<h3 id="output"><a class="header" href="#output">Output</a></h3>
<pre><code class="language-jac">data = {
    &quot;type&quot; : &quot;String&quot;,
    &quot;name&quot; &quot; &quot;Jaseci&quot;
}

# print on to the termnial
std.out(data)

</code></pre>
<h3 id="input"><a class="header" href="#input">Input</a></h3>
<pre><code class="language-jac"># takes input from the terminal 
# any string passed will be printed on to the screen
std.input(&quot;&gt; &quot;)
</code></pre>
<h3 id="standar-error"><a class="header" href="#standar-error">Standar Error</a></h3>
<pre><code class="language-jac"># printing to standard error

std.eer()

</code></pre>
<h3 id="sort-columns"><a class="header" href="#sort-columns">Sort Columns</a></h3>
<pre><code class="language-jac"># Sorts in place list of lists by column
# Param 1 - list
# Param 2 - col number (optional)
# Param 3 - boolean as to whether things should be reversed (optional)
#Return - Sorted list
sorted_list = std.sort_by_col(param1,param2)

</code></pre>
<h3 id="utc-time"><a class="header" href="#utc-time">UTC time</a></h3>
<pre><code class="language-jac"># Get utc date time for now in iso format
time  = std.time_now()

</code></pre>
<h3 id="set-global-variable"><a class="header" href="#set-global-variable">Set Global Variable</a></h3>
<pre><code class="language-jac">
# set global varibale visible to all walker
# name : string
# value : value (must be json seriaziable)

global_variable = std.set_global(name,value);

</code></pre>
<h3 id="get-global-variable"><a class="header" href="#get-global-variable">Get Global Variable</a></h3>
<pre><code class="language-jac"># get global variable
# name : name of variable
global_variable = std.get_global(name);

</code></pre>
<h3 id="load-local-actions-to-jaseci"><a class="header" href="#load-local-actions-to-jaseci">Load local actions to Jaseci</a></h3>
<pre><code class="language-jac"># load local actions date to jaseci
action = std.actload_local(&quot;date.py&quot;);

</code></pre>
<h3 id="load-remote-actions-to-jaseci"><a class="header" href="#load-remote-actions-to-jaseci">Load remote actions to Jaseci</a></h3>
<pre><code class="language-jac">action = std.actload_remote(url)

</code></pre>
<h3 id="load-module-actions-to-jaseci"><a class="header" href="#load-module-actions-to-jaseci">Load module actions to Jaseci</a></h3>
<pre><code class="language-jac">#load use_qa model
action = std.actload_module('use_qa');
</code></pre>
<h3 id="destroy-global"><a class="header" href="#destroy-global">Destroy Global</a></h3>
<pre><code class="language-jac">global = std.destroy_global(name)
</code></pre>
<h3 id="set-object-permission"><a class="header" href="#set-object-permission">Set object Permission</a></h3>
<pre><code class="language-jac">element - target element
mode - valid permission (public, private, read_only)
object = std.set_perms(element,mode)
</code></pre>
<h3 id="get-object-permission"><a class="header" href="#get-object-permission">Get object Permission</a></h3>
<pre><code class="language-jac">#Returns object access mode for any Jaseci object
# object - target element
# Return - Sorted list

obj = std.get_perms(object);
</code></pre>
<h3 id="grant-object-permission"><a class="header" href="#grant-object-permission">Grant object Permission</a></h3>
<pre><code class="language-jac"># grants another user permission to access a jaseci object
# obj :target element
# element : master to be granted permission
# readonly : Boolean read-only flag
# Returns sorted list

object  = std.grant_perms(obj,element,readonly)
</code></pre>
<h3 id="revoke-permission"><a class="header" href="#revoke-permission">Revoke Permission</a></h3>
<pre><code class="language-jac"># Remove permission for user to access a jaseci object
# obj : target element
# element : master to be revoke permission
# return sorted list
objects = std.revoke_perms(obj,element);
</code></pre>
<h3 id="get-report"><a class="header" href="#get-report">Get Report</a></h3>
<pre><code class="language-jac"># Get current report so far from walker run

reprt = std.get_report();

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vector-actions"><a class="header" href="#vector-actions">Vector Actions</a></h1>
<h3 id="cosine-similarity"><a class="header" href="#cosine-similarity">Cosine Similarity</a></h3>
<pre><code class="language-jac">#Calculate the Cosine similarity score between 2 vectors.
# return float betweeen  0 and 1 
# vectora :list
# vectorb : list 
similarity = vector.cosine_sim(vectora, vectorb);

</code></pre>
<h3 id="dot-product"><a class="header" href="#dot-product">Dot Product</a></h3>
<pre><code class="language-jac"># Calculate the dot product between 2 vectors.
# return float betweeen  0 and 1 
# vectora :list
# vectorb : list

dot_product = vector.dot_product(vectora,vectorb);
</code></pre>
<h3 id="centroid"><a class="header" href="#centroid">Centroid</a></h3>
<pre><code class="language-jac"># Calculate the centroid of the given list of vectors.
# list of vectors
# returns [centroid vectors , cluster tightness]

centroid  = vector.get_centroid(vectors);
</code></pre>
<h3 id="softmax"><a class="header" href="#softmax">Softmax</a></h3>
<pre><code class="language-jac"># calculate the softmax value 
# returns list 
# vectors : dictionary
values = vectors.softmax(vectors);

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="jaseci-actions"><a class="header" href="#jaseci-actions">Jaseci Actions</a></h1>
<h2 id="alias"><a class="header" href="#alias">Alias</a></h2>
<p>Alias provides names  for long string like UUIDs.</p>
<h3 id="register-alias"><a class="header" href="#register-alias">Register Alias</a></h3>
<pre><code class="language-jac">#name (str): The name for the alias created by caller.
#value (str): The value for that name to map to (i.e., UUID)
response  = jaseci.alias_register(name,value);

</code></pre>
<h3 id="list-aliases"><a class="header" href="#list-aliases">List Aliases</a></h3>
<pre><code class="language-jac"># List all string to string alias that caller can use
jaseci.alias_list()

</code></pre>
<h3 id="delete-alias"><a class="header" href="#delete-alias">Delete Alias</a></h3>
<pre><code class="language-jac"># Delete an active string to string alias mapping
# name (str): The name for the alias to be removed from caller.
jaseci.alias_delete()
</code></pre>
<h3 id="clear-alias"><a class="header" href="#clear-alias">Clear Alias</a></h3>
<pre><code class="language-jac">#  Removes  all aliases.
jaseci.alias_clear()

</code></pre>
<h2 id="objects"><a class="header" href="#objects">Objects</a></h2>
<h3 id="get-global-variable-1"><a class="header" href="#get-global-variable-1">Get global Variable</a></h3>
<pre><code class="language-jac"># name: name of global variable
value = jaseci.global_get(name);

</code></pre>
<h3 id="object-details"><a class="header" href="#object-details">Object Details</a></h3>
<pre><code class="language-jac"># retuen detail of jaseci object
object : element - jaseci object
details = jaseci.object_get(object);
</code></pre>
<h3 id="object-access-mode"><a class="header" href="#object-access-mode">Object Access Mode</a></h3>
<pre><code class="language-jac"># Get the object access mode for any jaseci object.
# object : element - jaseci object
accessMode  = jaseci.object_perms_set(object)

</code></pre>
<h3 id="set-object-access-mode"><a class="header" href="#set-object-access-mode">Set Object access mode</a></h3>
<pre><code class="language-jac"># valid perms = [&quot;public&quot;, &quot;private&quot;, &quot;read_only&quot;]
# object : element - jaseci object
# perm : string 
jaseci.object_perms_set(element,perm);
</code></pre>
<h3 id="object-access-grant"><a class="header" href="#object-access-grant">Object access grant</a></h3>
<pre><code class="language-jac"># grants one object the acess to another object
# object : element - object to access
# master : element  - object to gain access

rent = jaseci.object_perms_grant(element, master);

</code></pre>
<h3 id="revoke-object-access"><a class="header" href="#revoke-object-access">Revoke object access</a></h3>
<pre><code class="language-jac">#Remove permissions for user to access a Jaseci object
# object : element - object that was  accessed
# master : element  - object that has access.
ret = jaseci.object_perms_revoke(element,master);

</code></pre>
<h2 id="graphs-1"><a class="header" href="#graphs-1">Graphs</a></h2>
<h3 id="create-graph"><a class="header" href="#create-graph">Create Graph</a></h3>
<pre><code class="language-jac"># Create a graph instance and return root node graph object
jaseci.graph_create()

</code></pre>
<h3 id="get-graph-content"><a class="header" href="#get-graph-content">Get Graph Content</a></h3>
<pre><code class="language-jac"># Return the content of the graph with mode
# Valid modes: {default, dot, }
# gph :graph - graph whose conten you need
# mode : string - &quot;deafult&quot; or &quot;dot&quot; , &quot;default&quot; by default
Contents = jaseci.graph_get(gph);

</code></pre>
<h3 id="list-graph-objects"><a class="header" href="#list-graph-objects">List Graph Objects</a></h3>
<pre><code class="language-jac">#  Provide complete list of all graph objects (list of root node objects)
# detailed : boolean - if eac graph details are wanted
graph_info = jaseci.graph_list(detailed);

</code></pre>
<h3 id="set-default-graph"><a class="header" href="#set-default-graph">Set Default Graph</a></h3>
<pre><code class="language-jac"># set the default graph master should use
# gph : graph - graph to be default.
message = jaseci.graph_active_set(gph);

</code></pre>
<h3 id="remove-default-graph"><a class="header" href="#remove-default-graph">Remove Default Graph</a></h3>
<pre><code class="language-jac"># Unsets the default sentinel master should use
jaseci.graph_active_unset();
</code></pre>
<h3 id="get-default-graph"><a class="header" href="#get-default-graph">Get Default Graph</a></h3>
<pre><code class="language-jac"># detailed : boolean - default false , true to return graph details (optional)
grph = jaseci.graph_active_get()
</code></pre>
<h3 id="delete-graph"><a class="header" href="#delete-graph">Delete Graph</a></h3>
<pre><code class="language-jac"># permantely  delete graph 
# grph : graph - graph to be deleted

message = jaseci.graph_delete(grph);
</code></pre>
<h3 id="return-node-value"><a class="header" href="#return-node-value">Return Node Value</a></h3>
<pre><code class="language-jac"># returns value of a given node
# nd : node : node whose value will be returned.
node_value =  jaseci.graph_node_get(nd);
</code></pre>
<h3 id="set-node-value"><a class="header" href="#set-node-value">Set Node Value</a></h3>
<pre><code class="language-jac"># Assigns values to member variables of a given node using ctx object
# nd : node : node to who a value will be assigned.
# ctx : dictionary - values to assign 

node_details = jaseci.graph_node_set(nd,ctx);
</code></pre>
<h2 id="sentinels-1"><a class="header" href="#sentinels-1">Sentinels</a></h2>
<h3 id="register-sentinel"><a class="header" href="#register-sentinel">Register Sentinel</a></h3>
<pre><code class="language-jac">#Create blank or code loaded sentinel and return object
# name: str -  &quot;default&quot; when not specified,
#encoded: bool 
#auto_run: Auto_run is the walker to execute on register (assumes active graph is selected), default is &quot;init&quot;
#ctx: dict = {},
#set_active: bool = True,

sentel = jaseci.sentinel_regsiter(name,encoded,auto_run,ctx,set_active);

</code></pre>
<h3 id="global-sentinel"><a class="header" href="#global-sentinel">Global Sentinel</a></h3>
<pre><code class="language-jac">#   Copies global sentinel to local master
#set_active : boolean - set sentinel to be active
# on_demand : boolean - 

sentl = jaseci.sentinel_pull(set_active);
</code></pre>
<h3 id="get-sentinel"><a class="header" href="#get-sentinel">Get Sentinel</a></h3>
<pre><code class="language-jac"># Get a sentinel rendered with specific mode
#Valid modes: {default, code, ir, }
#snt : sentinel : sentinel to be rendered in specific mode.
#mode : str - mode sentinel will be in 
snt  = jaseci.sentinel_get(snt,mode);
</code></pre>
<h3 id="set-sentinel-code"><a class="header" href="#set-sentinel-code">Set Sentinel Code</a></h3>
<pre><code class="language-jac"># Set code/ir for a sentinel, only replaces walkers/archs in sentinel
# Needs more clarity
jaseci.sentinel_set();
</code></pre>
<h3 id="sentinel-list"><a class="header" href="#sentinel-list">Sentinel List</a></h3>
<pre><code class="language-jac"># Provides Completed list of all sentinel objects 

#snt_list = jaseci.sentinel_list();
</code></pre>
<h3 id="sentinel-test"><a class="header" href="#sentinel-test">Sentinel Test</a></h3>
<pre><code class="language-jac"># Run battery of test cases within sentinel and provide result
#snt : sentinel - sentinel to be tested

snt_details = jaseci.sentinel_test(snt);
</code></pre>
<h3 id="default-sentinel"><a class="header" href="#default-sentinel">Default Sentinel</a></h3>
<pre><code class="language-jac"># Sets the default sentinel master should use
#snt :sentinel - sentinel to be made default

message = jaseci.sentinel_active_set(snt);
</code></pre>
<h3 id="remove-default-sentinel"><a class="header" href="#remove-default-sentinel">Remove Default Sentinel</a></h3>
<pre><code class="language-jac"># Unsets the default sentinel master should use
messsage = jaseci.sentinel_active_unset();
</code></pre>
<h3 id="set-global-sentinel"><a class="header" href="#set-global-sentinel">Set Global Sentinel</a></h3>
<pre><code class="language-jac"># Sets the default master sentinel to the global sentinel
response  = jaseci.sentinel_active_global();
</code></pre>
<h3 id="return-default-sentinel"><a class="header" href="#return-default-sentinel">Return default Sentinel</a></h3>
<pre><code class="language-jac">#  Returns the default sentinel master is using
response = jaseci.sentinel_active_get();
</code></pre>
<h3 id="delete-sentinel"><a class="header" href="#delete-sentinel">Delete Sentinel</a></h3>
<pre><code class="language-jac"># Permanently delete sentinel with given id
snt : sentinel - sentinel to be deleted

message = jaseci.sentinel_delete(snt);
</code></pre>
<h3 id="run-walker"><a class="header" href="#run-walker">Run Walker</a></h3>
<pre><code class="language-jac"># clarity needed
# Run a walker on a specific node
# wlk : walker - walker to be ran 
# nd : node -  node where walker will be placed
# ctx : dictionary  - context for walker
response  = jaseci.walker_summon()
</code></pre>
<h3 id="register-walker"><a class="header" href="#register-walker">Register Walker</a></h3>
<pre><code class="language-jac"># clarity needed
#  Create blank or code loaded walker and return object
walker_seralized = jaseci.walker_register();
</code></pre>
<h3 id="get-walker"><a class="header" href="#get-walker">Get Walker</a></h3>
<pre><code class="language-jac"># Get a walker rendered with specific mode
# wlk : walker - walker to be rendered 
# mode : str - mode to return walker
#  Valid modes: {default, code, ir, keys, }
wlk_response = jaseci.walker_get(wlk,mode);
</code></pre>
<h3 id="set-walker-code"><a class="header" href="#set-walker-code">Set Walker code</a></h3>
<pre><code class="language-jac">#  Set code/ir for a walker
# Valid modes: {code, ir, }
# wlk :walker - walker code/ir to be set
# code : str - &quot;code&quot; or  &quot;ir&quot; 
message = jaseci..walker_set(wlk,code);
</code></pre>
<h3 id="list-walkers"><a class="header" href="#list-walkers">List Walkers</a></h3>
<pre><code class="language-jac"># List walkers known to sentinel
snt :sentinel - active sentinel

walkers = jaseci.walker_list();

</code></pre>
<h3 id="delete-walker"><a class="header" href="#delete-walker">Delete Walker</a></h3>
<pre><code class="language-jac"># Permantely delete walker with given id 
# wlk : walker - walker to be deleted
# snt : sentinel - sentinel where walker resides
message = jaseci.walker_delete(wlk,snt);
</code></pre>
<h3 id="spawn-walker"><a class="header" href="#spawn-walker">Spawn Walker</a></h3>
<pre><code class="language-jac">#  Creates new instance of walker and returns new walker object
# name : str - name of walker
# snt : sentinel - sentinel the walker will be under
spawn_wlk = jaseci.walker_spawn_create(name,snt);
</code></pre>
<h3 id="delete-spawned-walker"><a class="header" href="#delete-spawned-walker">Delete spawned Walker</a></h3>
<pre><code class="language-jac">#Delete instance of walker 
# name : string - name of walker to be deleted
jaseci.walker_spawn_delete(name);
</code></pre>
<h3 id="list-spawned-walker"><a class="header" href="#list-spawned-walker">List Spawned walker</a></h3>
<pre><code class="language-jac"># List walkers spawned by master
# detailed : boolean - return details of walkers
walkers  = jaseci.walker_spawn_list(deatailed);
</code></pre>
<h3 id="assign-walker-to-node"><a class="header" href="#assign-walker-to-node">Assign walker to node</a></h3>
<pre><code class="language-jac">#  Assigns walker to a graph node and primes walker for execution 
# wlk : walker  - walker to be assigned
# nd : node - node walker will be assigned too
# ctx : dicionary  - context for node

message   = jaseci.walker_prime(wlk,nd,ctx);
</code></pre>
<h3 id="execute-walker"><a class="header" href="#execute-walker">Execute Walker</a></h3>
<pre><code class="language-jac"># execute walker assuming it is primed.
# wlk : walker -  walker to execute
# nd : node - node where execution will begin

response  = jaseci.walker_execute(wlk,nd);
</code></pre>
<h3 id="walker-run"><a class="header" href="#walker-run">Walker run</a></h3>
<pre><code class="language-jac"># Creates walker instance, primes walker on node, executes walker, reports results, and cleans up walker instance.
#name: str - name of the walker 
#nd: node = Node walker will be primed on 
#ctx: dict -  {} by default
#snt: sentinel - None  by default 
#profiling: bool - False by default

response =  jaseci.walker_run(name,nd,ctx,snt,profiling);
</code></pre>
<h3 id="walker-individual-apis"><a class="header" href="#walker-individual-apis">Walker Individual APIs</a></h3>
<pre><code class="language-jac">#name : string - name of walker
#nd :node - node walker will be primed on
# ctx : dictionary - dictionary for context information
# snt :  sentinel , none by default
# profiling : boolean , false by default
 response = jaseci.wapi(name,nd,ctx);
</code></pre>
<h2 id="architypes-1"><a class="header" href="#architypes-1">Architypes</a></h2>
<h3 id="create-architype"><a class="header" href="#create-architype">Create Architype</a></h3>
<pre><code class="language-jac"># code : string : the test or filename  for an architype jac code
#encoded : boolean : if code is encoded or not
# snt (uuid) : the uuid of the sentinel to be the owner of this architype

architype_response  = jaseci.architype_register(code,encoded,snt);

</code></pre>
<h3 id="get-architype"><a class="header" href="#get-architype">Get Architype</a></h3>
<pre><code class="language-jac"># Get an architype rendered with specific mode
# arch : architype - the architype being accessed
# mode : string - valid modes {default, code, ir}
# detailed : boolean - return detailed info also

architpe_serialized   = jaseci.architype_get(arch,mode,detailed);
</code></pre>
<h3 id="set-architype-code-or-ir"><a class="header" href="#set-architype-code-or-ir">Set Architype code or ir</a></h3>
<pre><code class="language-jac">#arch (uuid): The architype being set
#code (str): The text (or filename) for an architypes Jac code/ir
#mode (str): Valid modes: {default, code, ir, }

response  = jaseci.architype_set(arch,code,mode);
</code></pre>
<h3 id="list-architype"><a class="header" href="#list-architype">List Architype</a></h3>
<pre><code class="language-jac"># List architypes know to sentinel
#snt (uuid): The sentinel for which to list its architypes
# detailed (bool): Flag to give summary or complete set of fields

archs = jaseci.architype_list(snt,detailled);
</code></pre>
<h3 id="delete-architype"><a class="header" href="#delete-architype">Delete Architype</a></h3>
<pre><code class="language-jac"># Permanently delete sentinel with given id
#arch (uuid): The architype being set
#snt (uuid): The sentinel for which to list its architypes

response = jaseci.architype_delete(arch,snt);
</code></pre>
<h2 id="masters-1"><a class="header" href="#masters-1">Masters</a></h2>
<h3 id="create-master"><a class="header" href="#create-master">Create Master</a></h3>
<pre><code class="language-jac"># create a master instance and retrun root node master object 
# name  :str - name of master
# active : boolean 
# ctx : dictionary - additional feilds for overloaded interfaces

master_object  = jaseci.master_create(name,active,ctx);
</code></pre>
<h3 id="get-master-content"><a class="header" href="#get-master-content">Get Master Content</a></h3>
<pre><code class="language-jac"># return the content of the master with mode
# name : string - name of master to be returned
# mode : string - modes{'default',}

master_object = jaseci.master_get(name,mode);
</code></pre>
<h3 id="list-masters"><a class="header" href="#list-masters">List Masters</a></h3>
<pre><code class="language-jac">#  Provide complete list of all master objects (list of root node objects)
# detailed : boolean - detailed info wanted. 

masters  = jaseci.master_list(detailed);
</code></pre>
<h4 id="set-default-master"><a class="header" href="#set-default-master">Set Default Master</a></h4>
<pre><code class="language-jac">#  Sets the default sentinel  master should use
# name  : name of master to be set

response  = jaseci.master_active_set(name);
</code></pre>
<h3 id="unset-default-master"><a class="header" href="#unset-default-master">Unset Default Master</a></h3>
<pre><code class="language-jac"># unsets the default sentinel mastershould use
response  = jaseci.master_active_unset();
</code></pre>
<h3 id="get-default-master"><a class="header" href="#get-default-master">Get Default Master</a></h3>
<pre><code class="language-jac">#  Returns the default master master is using
# detailed : boolean  - return detailed information on the master

master_serialized = jaseci.master_active_get(detailed);
</code></pre>
<h3 id="get-master-object"><a class="header" href="#get-master-object">Get Master Object</a></h3>
<pre><code class="language-jac"># Returns the masters object

master_object = jaseci.master_self();
</code></pre>
<h3 id="delete-master"><a class="header" href="#delete-master">Delete Master</a></h3>
<pre><code class="language-jac">name : str - master to be deleted

response   = jaseci.master_delete(name);
</code></pre>
<h2 id="logger"><a class="header" href="#logger">Logger</a></h2>
<p>APIs for Jaseci Logging configuration</p>
<h3 id="connect-to-internal-logger"><a class="header" href="#connect-to-internal-logger">Connect to internal logger</a></h3>
<pre><code class="language-jac">#   Connects internal logging to http(s) (log msgs sent via POSTs)
#  Valid log params: {sys, app, all }
# host : string  - 
# port : string - 
# url : string - 
# log : string  - 
response = jaseci.logger_http_connect(host,port,url,log);
</code></pre>
<h3 id="remove-http-handler"><a class="header" href="#remove-http-handler">Remove HTTP Handler</a></h3>
<pre><code class="language-jac"># log  : string - default ,all

response  = jaseci.logger_http_clear(log);

</code></pre>
<h3 id="check-active-logger"><a class="header" href="#check-active-logger">Check Active logger</a></h3>
<pre><code class="language-jac">#  list active loggers

response = jaseci.logger_list();
</code></pre>
<h2 id="global-api"><a class="header" href="#global-api">Global API</a></h2>
<h3 id="set-global"><a class="header" href="#set-global">Set Global</a></h3>
<pre><code class="language-jac"># Set a global variable 
# name  : string - name of global
# value : string -  value of global
 response = jaseci.global_set(name,value);
</code></pre>
<h3 id="delete-global"><a class="header" href="#delete-global">Delete Global</a></h3>
<pre><code class="language-jac"># delete a global
# name : string - delete globals
response = jaseci.global_delete(name);
</code></pre>
<h3 id="set-global-sentinel-1"><a class="header" href="#set-global-sentinel-1">Set Global Sentinel</a></h3>
<pre><code class="language-jac"># set sentinel as  globally accessible
# snt : sentinel -  sentinel to be set globally accessible
response = jaseci.global_sentinel_set(snt);
</code></pre>
<h3 id="unset-global-sentinel"><a class="header" href="#unset-global-sentinel">Unset Global Sentinel</a></h3>
<pre><code class="language-jac">#unset globally accessible variable
# snt : sentinel - sentinel to be removed as globally acccessible 
response  = jaseci.sentinel_unset(snt);
</code></pre>
<h2 id="super-master"><a class="header" href="#super-master">Super Master</a></h2>
<h3 id="super-instance-of-master"><a class="header" href="#super-instance-of-master">Super Instance of Master</a></h3>
<pre><code class="language-jac">#   Create a super instance and return root node super object
# name : string - name of master
# set_active : boolean - set master to active
# other_fields : dictionary - used for additional feilds for overloaded interfaces (i.e., Dango interface)

master_object  = jaseci.master_createsuper(name,set_active,other_fields);
</code></pre>
<h3 id="masters-info"><a class="header" href="#masters-info">Masters info</a></h3>
<pre><code class="language-jac">#  Returns info on a set of users
# num : int -  specifies the number of users to return 
# start_idx :int -  specfies where to start

# in development 
</code></pre>
<h3 id="set-default-master-1"><a class="header" href="#set-default-master-1">Set Default Master</a></h3>
<pre><code class="language-jac"># Sets the default master master should use
# mast : master - master to be used
response  = jaseci.master_become(mast);
</code></pre>
<h3 id="unset--default-master"><a class="header" href="#unset--default-master">Unset  default Master</a></h3>
<pre><code class="language-jac"># Unsets the default master master should useS
response = jaseci.master_become();
</code></pre>
<h2 id="stripe"><a class="header" href="#stripe">Stripe</a></h2>
<p>Set of APIs to expose Stripe Management</p>
<h3 id="create-product"><a class="header" href="#create-product">Create Product</a></h3>
<pre><code class="language-jac"># name : string - default &quot;VIP Plan&quot;
# description : string - default &quot; Plan description&quot;

message = jaseci.stripe_product_create(name,desciption);
</code></pre>
<h3 id="modify-product-price"><a class="header" href="#modify-product-price">Modify Product Price</a></h3>
<pre><code class="language-jac"># productId : string - id of product to be modified 
# amount : float - amount for product ,default is 50
# interval : string - default  &quot;month&quot;

message = jaseci.stripe_product_price_set(productId,amount,interval);
</code></pre>
<h3 id="list-products"><a class="header" href="#list-products">List Products</a></h3>
<pre><code class="language-jac"># retrieve all products
# detailed : boolean - details of all products
 product_list = jaseci.stripe_product_list();
</code></pre>
<h3 id="create-customer"><a class="header" href="#create-customer">Create Customer</a></h3>
<pre><code class="language-jac"># paymentId : string - id of payment method
# name : string - name of customer 
# email : string - email of customer
# description : string  - description of customer

message =  jaseci.stripe_customer_create(paymentId,name,email,description);
</code></pre>
<h3 id="get-customer-information"><a class="header" href="#get-customer-information">Get Customer Information</a></h3>
<pre><code class="language-jac"># retrieve customer information
#customerId : string - id to identify customer

message = jaseci.stripe_customer_get(customerId);
</code></pre>
<h3 id="add-customer-payment-method"><a class="header" href="#add-customer-payment-method">Add Customer Payment Method</a></h3>
<pre><code class="language-jac"># paymentMethodId : string - id of payment method
# customerId  : string - id to uniquely identify customer 
message = jaseci.stripe_customer_payment_add(paymentId,customerId);
</code></pre>
<h3 id="remove-customer-payment-method"><a class="header" href="#remove-customer-payment-method">Remove Customer Payment method</a></h3>
<pre><code class="language-jac">
# paymentMethodId : string - id of payment method

message = jaseci.stripe_customer_payment_delete(paymentId);
</code></pre>
<h3 id="customers-list-of-payment-method"><a class="header" href="#customers-list-of-payment-method">Customer's List of payment Method</a></h3>
<pre><code class="language-jac"># get list of customer payment method
# customerId : string - id to uniquely identify customer

payment_methods = jaseci.stripe_customer_payment_get(customerId);
</code></pre>
<h3 id="update-customer-default-payment"><a class="header" href="#update-customer-default-payment">Update Customer default payment</a></h3>
<pre><code class="language-jac"># paymentMethodId : string - id of payment method
# customerId  : string - id to uniquely identify customer 

message = jaseci.stripe_customer_payment_default(customeId,paymentMethodId);
</code></pre>
<h3 id="create-customer-subscription"><a class="header" href="#create-customer-subscription">Create Customer Subscription</a></h3>
<pre><code class="language-jac"># create customer subscription
# paymentId : string - id pf payment method
# priceId : string - id for price 
# customerId: string - id to uniquely identify customer 

message = jaseci.stripe_subscription_create(paymentId,priceId,customerId);
</code></pre>
<h3 id="cancel-customer-subscription"><a class="header" href="#cancel-customer-subscription">Cancel Customer Subscription</a></h3>
<pre><code class="language-jac"># subscriptionId : string - id to uniquley identify subscription
message  = jaseci.stripe_subscription_delete(subscriptionId);
</code></pre>
<h3 id="get-customer-subscription"><a class="header" href="#get-customer-subscription">Get Customer Subscription</a></h3>
<pre><code class="language-jac"># retrieve customer subscription 
# customerId : string - id to uniquely identify customer

customer_subscription = jaseci.stripe_subscription_get(customerId);
</code></pre>
<h3 id="invoice-list"><a class="header" href="#invoice-list">Invoice List</a></h3>
<pre><code class="language-jac"># retrieve customer list of invoices
# customerId : string - id to uniquely identify customer`
# subscriptionId : string - id to uniquley identify subscription
# limit : int - max amount of invoices to return
# lastitem : string - id of item from where the return should start default is &quot; &quot; 

invoices = jaseci.stripe_invoice_list(customerId,subscriptionId,limit,lastitem);
</code></pre>
<h3 id="load-actions"><a class="header" href="#load-actions">Load actions</a></h3>
<h2 id="load-modules-locally"><a class="header" href="#load-modules-locally">Load modules locally</a></h2>
<pre><code class="language-jac"># hot load a python module and assimlate any jaseci action
# file  string - module to be loaded
success_message  = jaseci.actions_load_local(file);
</code></pre>
<h3 id="load-modules-remote"><a class="header" href="#load-modules-remote">Load modules remote</a></h3>
<pre><code class="language-jac">#  Hot load an actions set from live pod at URL
# url : string - link to module to be loaded
success_message = jaseci.actions_load_remote(url);
</code></pre>
<h3 id="load-modules-local"><a class="header" href="#load-modules-local">Load modules local</a></h3>
<pre><code class="language-jac">mod : string - name of module to be loaded

success_messsage = jaseci,actions_load_module(mod);
</code></pre>
<h3 id="list-actions"><a class="header" href="#list-actions">List actions</a></h3>
<pre><code class="language-jac">actions = jaseci.actions_list();
</code></pre>
<h2 id="configurations-apis"><a class="header" href="#configurations-apis">Configurations APIs</a></h2>
<h3 id="get-config"><a class="header" href="#get-config">Get config</a></h3>
<pre><code class="language-jac"># get a Connfig
# name : string - name of configurations
# do_check : boolean - deafult is True

confid_details = jaseci.config_get(name,do_check);
</code></pre>
<h3 id="set-config"><a class="header" href="#set-config">Set Config</a></h3>
<pre><code class="language-jac"># name :string - name of configuration
# value : string - value to set 
# do_check : boolean - deafult is True

config_details = jaseci.config_set(name,value,do_check);
</code></pre>
<h3 id="list-config"><a class="header" href="#list-config">List Config</a></h3>
<pre><code class="language-jac">
configs = jaseci.config_list();
</code></pre>
<h3 id="list-valid-config"><a class="header" href="#list-valid-config">List Valid Config</a></h3>
<pre><code class="language-jac">
valid_configs = jaseci.config_index();
</code></pre>
<h3 id="configuration-exits"><a class="header" href="#configuration-exits">Configuration exits</a></h3>
<pre><code class="language-jac"># name : string - name of configuration
config_exist = jaseci.config_exists(name);
</code></pre>
<h3 id="delete-configurations"><a class="header" href="#delete-configurations">Delete Configurations</a></h3>
<pre><code class="language-jac">#name : string
# do_check : boolean - deafult is True

message = jaseci.config_delete(name,do_check);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h2 id="getting-started-canonicai"><a class="header" href="#getting-started-canonicai">Getting Started CanoniCAI</a></h2>
<h5 id="clone-canoncai-repo-using-httpsgithubcommarsninjajac_convai"><a class="header" href="#clone-canoncai-repo-using-httpsgithubcommarsninjajac_convai">Clone CanonCAI repo using: https://github.com/marsninja/jac_convAI</a></h5>
<ul>
<li>
<p>Registering the sentinel by using this command: 
<code>sentinel register -set_active true -mode ir main.jir</code></p>
</li>
<li>
<p>Then create the graph by using this command:
<code>graph create -set_active true</code></p>
</li>
<li>
<p>Then initialize the entire application by using:
<code>walker run init</code> </p>
</li>
</ul>
<h2 id="explanation-of-walkers-in-canonicai"><a class="header" href="#explanation-of-walkers-in-canonicai">Explanation of Walkers in CanoniCAI</a></h2>
<ul>
<li>
<p><strong>talker</strong>: This is the main walker to interact with the conversational AI. It takes in a question from the user, which then hops from state to state and triggers various node abilities to apply NLU to the question, process some custom logic and then generates an appropriate response.</p>
</li>
<li>
<p><strong>init</strong>: This walker loads the AI models, generates the graph, loads modules and links certain nodes from state to state.</p>
</li>
<li>
<p><strong>train</strong>: These walkers teach the AI model from an existing dataset to learn to do a specific task.</p>
</li>
<li>
<p><strong>set_pretrained_model</strong>: Allows you to interchange what pretrained model you want to use. If you want to use distilbert, tinybert etc.</p>
</li>
<li>
<p><strong>save_model</strong>: Allows you to save the current state of the model you have trained for later use.</p>
</li>
<li>
<p><strong>infer</strong>:  This is where you validate the model by passing a query to see how it’s performing.</p>
</li>
<li>
<p><strong>read</strong>: This walker takes in a source url, scraps the website and then summarizes it to populate the faq state so it can teach anyone of what it has read from the website.</p>
</li>
<li>
<p><strong>forget</strong>: This walker unlearns everything that is in the faq state.</p>
</li>
<li>
<p><strong>maintainer</strong>: Keeps track of the user and its dialogue context alongside with the last conversational state. </p>
</li>
<li>
<p><strong>update_user</strong>: updates the user. </p>
</li>
</ul>
<h2 id="graph-architecture"><a class="header" href="#graph-architecture">Graph Architecture</a></h2>
<h4 id="there-are-4-architectures-of-the-graph"><a class="header" href="#there-are-4-architectures-of-the-graph">There are 4 architectures of the graph.</a></h4>
<ul>
<li>User Management</li>
<li>Conversational States</li>
<li>Faq Architecture</li>
<li>AI Model Management</li>
</ul>
<h4 id="the-user-management"><a class="header" href="#the-user-management">The User Management</a></h4>
<p>This is actually straightforward, this state allows us to create and manage users in the entire application alongside with storing the last conversational state of each user.</p>
<h4 id="conversational-states"><a class="header" href="#conversational-states">Conversational States</a></h4>
<p>This is where the user query goes to get processed and returned back to the user.</p>
<h4 id="faq-architecture"><a class="header" href="#faq-architecture">Faq Architecture</a></h4>
<p>This state intakes a link from the user which is then read to scrape data from the website into a summarized fashion inorder to be stored as a faq. Which can be later accessed through conversation from a user.</p>
<h4 id="ai-model-management"><a class="header" href="#ai-model-management">AI Model Management</a></h4>
<p>It’s a centralized area for all types of AI models that does specific functions such as NER, Classification, etc. Which can be accessed by the conversational states to perform certain actions.</p>
<p>Here I will explain some models that we used in the CanoniCAI repo and they are as follows:</p>
<p><code>use-qa</code>: This is used for text classification that requires no training data.</p>
<p><code>bi-encoder</code>: We use this for text classification for our programs. However the difference between the use-qa and this jaseci-kit tool is that this one requires the user to train data for classification. Why use this over the use-qa, sometimes you may run into cases where you want to classify complex groups of text, the use-qa in this case may probably fail and this is when this will come into action.</p>
<p><code>flair-ner</code>: this is used for text entity extraction. For example if I ask a bot to order me 3pc chicken combo. It should extract 3 as the quantity and chicken combo as the item and this is what it means by entity extraction.</p>
<h2 id="how-are-they-connected"><a class="header" href="#how-are-they-connected">How are they connected?</a></h2>
<p>The first architecture we have to take into consideration is the AI model management state. This is where we map out the types of questions a user may ask alongside with the user intent. We also have to ask ourselves if there are entities that we have to capture in a conversation, like for example where is the location, name, amount of apples in the user question and from there we begin to build out the model before we could build any logic on top of that to connect the application. After the AI model management then we have to move on to the conversational state where we will focus on what we will do with the user intent and the entities extracted from it and from there generate a specific response where applicable. The faq architecture is like a cherry on top of the conversation AI state, how this feature works we first have to feed a website link to the conversational AI and it will take out the appropriate information from the site and maps a summarization form of it which will be fed into the faq state for later processing. We can then ask questions based on the link provided and the model will give you the best answer from what it has learned from the site. The user management state stores all of the user contextual information along with the last conversation dialogue. Now you should be able to understand how they are all connected in a generalized fashion.</p>
<h2 id="what-node-actions-each-state-has-and-how-are-they-triggered-by-the-walkers"><a class="header" href="#what-node-actions-each-state-has-and-how-are-they-triggered-by-the-walkers">What node actions each state has and how are they triggered by the walkers?</a></h2>
<h4 id="state-node"><a class="header" href="#state-node">State Node</a></h4>
<ul>
<li><strong>Listen</strong>: This node action is responsible for saving results to the walker context. It performs the NLU to analyze the question.</li>
<li><strong>Plan</strong>: Based on the NLU result, this decides which state the walker should go next.</li>
<li><strong>Take</strong>: Allows the walker to travel to the destination state</li>
<li><strong>Think</strong>: The walker is now at the state corresponding to the question asked by the user and this is where State-specific logic is done through ::business_logic</li>
<li><strong>Speak</strong>: Construct a response to return to the user</li>
<li><strong>Cleanup</strong>: Save any context you wish to retain for the future conversation turns for example it saves the last thing you spoke to the AI and it also is responsible for Post-response wrap-up.</li>
</ul>
<h4 id="faq-state-node"><a class="header" href="#faq-state-node">FAQ State Node</a></h4>
<ul>
<li><strong>Seek_answer</strong>: based on all the faq nodes that is saved in the graph it will choose the best one that it closest to the original question</li>
<li><strong>Init_answer_states</strong>: Based on a file of faq answers it will create nodes in the graph with the answers and its embeddings.</li>
<li><strong>Read_url</strong>: read the website and then returns a summarized version of it in which each important sentence will be created as a node on the faq state.</li>
<li><strong>Clean_answer_db</strong>: Delete all faq answer state nodes</li>
</ul>
<h4 id="faq-answer-state"><a class="header" href="#faq-answer-state">Faq Answer State</a></h4>
<ul>
<li><strong>Speak</strong>: Construct a response to return to the user</li>
</ul>
<h4 id="user-state"><a class="header" href="#user-state">User State</a></h4>
<ul>
<li><strong>Start_conv</strong>: It collects the user context and starts to save the last conversation state</li>
<li><strong>Update_with_conv</strong>: Updates the user context everytime maintainer walker gets called.
init_user : it collects all the user data from the api</li>
</ul>
<h4 id="user-directory-state"><a class="header" href="#user-directory-state">User Directory State</a></h4>
<ul>
<li><strong>Init_users</strong>: maps the correct user based on the user id and if it's a new user it creates that user.</li>
</ul>
<h4 id="ai-model-state"><a class="header" href="#ai-model-state">AI Model State</a></h4>
<ul>
<li><strong>Load_model</strong>: load an ai model that was already trained</li>
<li><strong>Train_model</strong>: teaches an ai model</li>
<li><strong>Save_model</strong>: save the existing model</li>
<li><strong>Set_pretrained_model</strong>: switch between models that was already created and saved</li>
<li><strong>Infer</strong>: test out the model</li>
</ul>
<h2 id="how-to-build-upon-canoncai-for-your-conversational-ai-use-cases"><a class="header" href="#how-to-build-upon-canoncai-for-your-conversational-ai-use-cases">How to build upon canonCAI for your conversational AI use cases</a></h2>
<p>I have build out a simple KFC application which I will be running you through. After running you through this application you should be able to understand how to build a simple conversation AI using canoniCAI.</p>
<h4 id="step-1"><a class="header" href="#step-1">Step 1</a></h4>
<p>I've created 5 states for the KFC application. One for the start of conversation (soc), end of conversation (eoc), one that accepts order (order), order confirmation and order denial. You can reference it in the fixture.jac from line 35 to line 40.</p>
<h4 id="step-2"><a class="header" href="#step-2">Step 2</a></h4>
<p>We then proceed to link each states to their corresponding states for example we linked the eoc, soc and order state to the conversation root state because a conversation can be initiated  by greeting the AI or directly by ordering a item from kfc or it can be ended just incase you had an emergency that pops up. The order confirmation and denial states are linked to the order state because when you order an item you will have to confirm or deny the item while the AI keep context of the item that asked for initially. You can reference this in the fixture.jac file from line 42 to line 58.</p>
<h4 id="step-3"><a class="header" href="#step-3">Step 3</a></h4>
<p>This stage we are dealing with the business logic. In the nodes.jac file from line 291 - 306. This is how far you will put your business logics when it comes in terms of slot data extracted. You can pull data from the net and manipulate slots or just add functionality that is convienent to you. But in this KFC example we didn't need anything extra.</p>
<h4 id="step-4"><a class="header" href="#step-4">Step 4</a></h4>
<p>In this stage we will be adding responses based on each state. In nodes.jac from line 308. This is how far we add the responses for this basic applcation we created.</p>
<h4 id="step-5"><a class="header" href="#step-5">Step 5</a></h4>
<p>In this example we used the use qa model for classification so no need for us to add training data for this basic example for classification, we just have to go to the clf label json file in the data folder and add the labels, this should correspond to the global.jac file, however we had to train the AI for entity extraction meaning allowing the AI to extract items from the user input. how we did that is as follows, In the data folder flair_ner.json file we added user input that people would usually ask and how far the items are located using the start index and end index of the slot, the entity value is the actual value you want to be extracted and the entity type is the type of slot you want to create. In this example we created a slot named &quot;item&quot; but you can create multiple slot as you wish for one user input. Now you can go ahead and run the train flair ner walker and it will work.</p>
<h5 id="step-6"><a class="header" href="#step-6">Step 6</a></h5>
<p>In this stage you have completed building your first conversational AI. Now you can go ahead and test how good it is and tweak what's necessary. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="canonicai"><a class="header" href="#canonicai">CanoniCAI</a></h1>
<h5 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h5>
<ul>
<li><a href="examples/canoniCAI/documentation/add_competency.html#what-is-a-competency">What is a competency</a></li>
<li><a href="examples/canoniCAI/documentation/add_competency.html#what-are-the-components-to-make-up-a-competency">What are the components to make up a competency</a></li>
<li><a href="examples/canoniCAI/documentation/add_competency.html#step-1-build-the-skeleton-for-your-new-competency">Build the skeleton for your new competency</a></li>
<li><a href="examples/canoniCAI/documentation/add_competency.html#step-2-how-to-write-custom-business-logics-for-canoniCAI">How to write custom business logics for canonicai</a></li>
<li><a href="examples/canoniCAI/documentation/add_competency.html#step-3-how-to-edit-or-create-responses-from-each-state">How to edit or create responses from each state</a></li>
<li><a href="examples/canoniCAI/documentation/add_competency.html#step-4-how-to-test-competency">How to test competency</a></li>
</ul>
<h1 id="what-is-a-competency"><a class="header" href="#what-is-a-competency">What is a competency</a></h1>
<p>A competency is a specialized piece of an AI model program that comes together to solve a problem.</p>
<h1 id="what-are-the-components-to-make-up-a-competency"><a class="header" href="#what-are-the-components-to-make-up-a-competency">What are the components to make up a competency</a></h1>
<p>They are several components that makes up the competency and they are as follows:</p>
<ul>
<li>ai model</li>
<li>states</li>
<li>business logic</li>
<li>response</li>
</ul>
<h1 id="step-1-build-the-skeleton-for-your-new-competency"><a class="header" href="#step-1-build-the-skeleton-for-your-new-competency">Step 1: Build the skeleton for your new competency</a></h1>
<p>This step involves the following jac files:</p>
<ul>
<li>fixtures.jac</li>
<li>nodes.jac</li>
<li>globals.jac</li>
</ul>
<p>Navigate to <code>fixtures.jac</code> file, we will be adding states to the graph.
<br />
We will be creating a state called <strong>check_order</strong> for demo purposes, this will be an extension to the KFC bot. The code we will be adding is 
<code>state_check_order = spawn node::state(name=&quot;check_order&quot;);</code> into the file. What this does it spawns a node to the graph.</p>
<pre><code>graph conv_graph {
    has anchor conv_root;
       spawn {
        state_check_order = spawn node::state(name=&quot;check_order&quot;);    
       }
</code></pre>
<p><br />
Next, we will be adding this state to the global state. What this does is allow us to connect other states to this in the future, incase if we want the conversation to go back to this state anytime in the future. You will have to go to the <code>globals.jac</code> file to make the state global.
<br />
Navigate to the <code>globals.jac</code> file and add this to the file </p>
<p>ADD: <code>global check_order_label = &quot;check order&quot;;</code></p>
<pre><code>global soc_label = &quot;greetings&quot;;
global check_order_label = &quot;check order&quot;; 
global eoc_label = &quot;bye&quot;;
global order_label = &quot;order&quot;;
global yes_label = &quot;confirmation&quot;;
global no_label = &quot;denial&quot;;
</code></pre>
<p>Now we can proceed to the next step. Navigate back to the <code>fixture.jac</code> file
<br />
Add: <code>[state_check_order, global.check_order_label]</code></p>
<pre><code>spawn {
    global_states = [
            [state_check_order, global.check_order_label],
            [state_eoc, global.eoc_label],
            [state_order, global.order_label]
        ];
}
</code></pre>
<p><br />
We will go forward and connect this state to the conversation state, which is the root/main state of the entire application. Because previously we just only created a state but we did not connect it to the root.</p>
<p>ADD: <code>conv_root -[transition(intent_label = global.check_order_label)]-&gt; state_check_order;</code></p>
<pre><code> spawn { 
     conv_root -[transition(intent_label = global.check_order_label)]-&gt; state_check_order;
 }
</code></pre>
<h1 id="step-2-how-to-write-custom-business-logics-for-canonicai"><a class="header" href="#step-2-how-to-write-custom-business-logics-for-canonicai">Step 2: How to write custom business logics for canoniCAI</a></h1>
<p><br />
In the <code>nodes.jac</code> file, this is where the business logic and the responses for each states resides.
<br />
Navigate to <code>nodes.jac</code> file, we will be editing or adding to existing node abilities from the states</p>
<p>In this section, we will be editing the state node only. </p>
<p>For this example we will be using the <strong>[item]</strong> slot for the business logic and we will use this slot to put into our response for the <strong>check order</strong> state. We will also just add a default item just for this small application, So lets start off adding these:</p>
<p>ADD: <code> visitor.dialogue_context[&quot;item&quot;] =  '3pc chicken combo';</code></p>
<pre><code>node state {
    can business_logic { 
         if (!visitor.hoping) {
            // here.name is the title of the state so when we hit that state it runs the code
             if (here.name == &quot;check_order&quot;) { 
                 visitor.dialogue_context[&quot;item&quot;] = '3pc chicken combo';
             }
         }
    }
}
</code></pre>
<h1 id="step-3-how-to-edit-or-create-responses-from-each-state"><a class="header" href="#step-3-how-to-edit-or-create-responses-from-each-state">Step 3: How to edit or create responses from each state</a></h1>
<p><br />
In the next section we will focus on creating a response for this competency called <strong>check order</strong>.
<br />
Navigate to the node ability <strong>gen_response</strong>, this is where it hosts all the responses for each state and using the existing slot from the application, we will add it to the response. So when we query to the application it will give us this exact response, once it classifies correctly.</p>
<p>ADD: <code>visitor.answer = &quot;In your cart you have ordered &quot; + visitor.dialogue_context[&quot;item&quot;];</code></p>
<pre><code>    can gen_response {
        if (!visitor.hoping) {
            if (here.name == &quot;check_order&quot;) {
                visitor.answer = visitor.answer = &quot;In your cart you have ordered &quot; + visitor.dialogue_context[&quot;item&quot;];
            }
        }
    }
</code></pre>
<p>This is how you build a simple competency called check order to canonicai. Hope you guys enjoy this section.</p>
<h1 id="step-4-how-to-test-competency"><a class="header" href="#step-4-how-to-test-competency">Step 4: How to test competency</a></h1>
<p>In this section we will be testing the competency to see whether it work or not.</p>
<p>They are genuinely two ways to test this application</p>
<ul>
<li>writing test in a <code>test.jac</code> file</li>
<li>manually test the application through console or frontend</li>
</ul>
<p>Let's start with testing manually using the console.
The steps are as follows:</p>
<ul>
<li>run jaseci console: <code>jsctl -m</code></li>
<li>load all the actions required: <code>actions load module [module]</code></li>
<li>builing the application using:  <code>jac build main.jac</code></li>
<li>registering the sentinel: <code>sentinel register -set_active true -mode ir main.jir</code></li>
<li>delete any graph if exists: <code>graph delete active:graph</code></li>
<li>create the graph: <code>graph create -set_active true</code></li>
<li>run init walker: <code>walker run init</code></li>
<li>testing the application by running talker: <code>walker run talker -ctx &quot;{\&quot;question\&quot;: \&quot;can you check what I have ordered so far.\&quot;}&quot;</code></li>
</ul>
<p>Let's continue with the other method of testing which involves writing a test.</p>
<p>First we will have to navigate to the <code>test.jac file</code>.
<br />
In this example we will create a simple test that tests the greeting competency and check if it returns a response with the correct user.</p>
<pre><code>test &quot;test response in greetings&quot;
with graph::empty by walker::init {
    cai_root = *(global.cai_root);
        # Reset user
        spawn cai_root walker::update_user;
        new_dialogue = true;
        
        spawn cai_root walker::talker(
            question=&quot;can you check what I have ordered so far.&quot;,
            start_new_dialogue=new_dialogue
        );
        
        res = std.get_report();
        assert (res[-1][&quot;response&quot;] == &quot;In your cart you have ordered 3pc chicken combo&quot;);
}
</code></pre>
<h1 id="how-to-load-model"><a class="header" href="#how-to-load-model">How to load model</a></h1>
<p>We will load model in canonicai using fast api</p>
<p>First we will explore how to load model through jaseci console in canonicai, We will try to load the bi-encoder model because that is vastly used in the modern AI world.</p>
<p>We have to go to the console and follow the steps below: </p>
<ul>
<li>run jaseci console: <code>jsctl -m</code></li>
<li>load bi-encoder actions: <code>actions load module jaseci_kit.bi_enc</code></li>
<li></li>
<li>go to the docs website</li>
<li>click <code>/load_model/</code></li>
<li>click try it out</li>
<li>replace string with the name of model for key model path and click execute</li>
</ul>
<p>That's how you load a model</p>
<h1 id="how-to-save-model"><a class="header" href="#how-to-save-model">How to save model</a></h1>
<p>We will save model in canonicai using fast api</p>
<p>First we will explore how to save model through jaseci console in canonicai, We will try to load the bi-encoder model because that is vastly used in the modern AI world.</p>
<p>We have to go to the console and follow the steps below: </p>
<ul>
<li>run jaseci console: <code>jsctl -m</code></li>
<li>load bi-encoder actions: <code>actions load module jaseci_kit.bi_enc</code></li>
<li></li>
<li>go to the docs website</li>
<li>click <code>/save_model/</code></li>
<li>click try it out</li>
<li>replace string with the name of model for key model path and click execute</li>
</ul>
<h1 id="how-to-add-or-update-training-data-to-canonicai"><a class="header" href="#how-to-add-or-update-training-data-to-canonicai">How to add or update training data to CanoniCAI</a></h1>
<p>We will be adding training data to bi-encoder model in CanoniCAI</p>
<p>First we have to navigate to <code>/data/clf_train.json</code> if the file does not exist create one.</p>
<p>ADD: <code>&quot;check order&quot;: [&quot;can you check my order&quot;,&quot;can i have a look at my order&quot;]</code></p>
<p><code>NOTE: the key must be the same as in the global label in the globals.jac file. This is what helps the classifier to train.</code></p>
<pre><code>{
  &quot;check order&quot;: [&quot;can you check my order&quot;,&quot;can i have a look at my order&quot;],
  &quot;hello&quot;: [
    &quot;hi how's your day so far&quot;,
    &quot;how's it going&quot;,
    &quot;how are you&quot;,
    &quot;whats up&quot;,
    &quot;what's going on&quot;,
    &quot;what's good&quot;,
    &quot;how goes it&quot;,
    &quot;i have had a crazy day, how's yours&quot;,
    &quot;what is the latest&quot;,
    &quot;what's up with you&quot;,
    &quot;what is going on with you kev&quot;,
    &quot;how are you doing today man&quot;,
    &quot;good morning&quot;,
    &quot;good day to you!&quot;,
    &quot;what's cracking&quot;,
    &quot;what's popping yall&quot;
  ],
  &quot;goodbye&quot;: [
    &quot;bye bye&quot;,
    &quot;see you later&quot;,
    &quot;see you soon&quot;,
    &quot;talk to you later&quot;,
    &quot;gotta go&quot;,
    &quot;i am off&quot;,
    &quot;take care&quot;,
    &quot;peace out&quot;
  ],
  &quot;order&quot;: [
    &quot;i want a cheeseburder&quot;,
    &quot;I would like to order a burger&quot;,
    &quot;can i have a milkshake&quot;,
    &quot;i need a 3 piece chicken combo&quot;,
    &quot;can i have a family meal&quot;
  ]
}
</code></pre>
<h1 id="how-to-train-models-in-canonicai"><a class="header" href="#how-to-train-models-in-canonicai">How to train models in CanoniCAI</a></h1>
<p>There are two ways to train the bi-encoder model:</p>
<ul>
<li>walkers</li>
<li>fastapi</li>
</ul>
<p>Next step we have to train the model. Here are the steps as follows:</p>
<ul>
<li>run jaseci console: <code>jsctl -m</code></li>
<li>load bi-encoder actions: <code>actions load module jaseci_kit.bi_enc</code></li>
<li></li>
<li>go to the docs website</li>
<li>click <code>/train/</code></li>
<li>click try it out</li>
<li>copy everything in <code>/data/clf_train.json</code></li>
<li>paste all the data you copied to the dataset key as shown below</li>
</ul>
<pre><code>{
  &quot;dataset&quot;: {
  &quot;goodbye&quot;: [
    &quot;bye bye&quot;,
    &quot;see you later&quot;,
    &quot;see you soon&quot;,
    &quot;talk to you later&quot;,
    &quot;gotta go&quot;,
    &quot;i am off&quot;,
    &quot;take care&quot;,
    &quot;peace out&quot;
  ]
  },
  &quot;from_scratch&quot;: false,
  &quot;training_parameters&quot;: {}
}
</code></pre>
<ul>
<li>change key value of <code>from_scratch</code> to true</li>
</ul>
<pre><code>{
  &quot;dataset&quot;: {},
  &quot;from_scratch&quot;: true,
  &quot;training_parameters&quot;: {}
}
</code></pre>
<ul>
<li>change key value of <code>training_parameters </code> to suit your needs, example shown below</li>
</ul>
<pre><code>{
  &quot;dataset&quot;: {},
  &quot;from_scratch&quot;: false,
  &quot;training_parameters&quot;: { &quot;num_train_epochs&quot;: 50 }
}
</code></pre>
<ul>
<li>click execute</li>
</ul>
<p>Thats how you add and train the model using fastapi. How let's move on to how to train the model using walkers from CanoniCAI</p>
<p>The steps to doing this is a follows:</p>
<ul>
<li>run jaseci console: <code>jsctl -m</code></li>
<li>load bi-encoder actions: <code>actions load module jaseci_kit.bi_enc</code></li>
<li>builing the application using:  <code>jac build main.jac</code></li>
<li>registering the sentinel: <code>sentinel register -set_active true -mode ir main.jir</code></li>
<li>delete any graph if exists: <code>graph delete active:graph</code></li>
<li>create the graph: <code>graph create -set_active true</code></li>
<li>run init walker: <code>walker run init</code></li>
<li>run train_biencoder walker: <code>walker run train_biencoder</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-add-follow-up-to-a-state"><a class="header" href="#how-to-add-follow-up-to-a-state">How to add follow up to a state</a></h1>
<h5 id="table-of-contents-1"><a class="header" href="#table-of-contents-1">Table of Contents</a></h5>
<ul>
<li><a href="examples/canoniCAI/documentation/add_followup_state.html#introduction"> Introduction </a></li>
<li><a href="examples/canoniCAI/documentation/add_followup_state.html#step-1-create-follow-up-states">Create follow up states</a></li>
<li><a href="examples/canoniCAI/documentation/add_followup_state.html#step-2-connect-follow-up-state-to-a-state">Connect follow up state to a state</a></li>
<li><a href="examples/canoniCAI/documentation/add_followup_state.html#step-3-add-business-logicc-to-follow-up-state">Add business logic to follow up state</a></li>
<li><a href="examples/canoniCAI/documentation/add_followup_state.html#step-4-add-response-to-follow-up-state">Add response to follow up state</a></li>
</ul>
<h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>In the example KFC bot we have a follow up state. In this tutorial we will explain how we build the follow up. In the order state there is a follow state attached to it, where the customer could either confirm the order or decline the order. So let's dive into it. Let pretend that there was no follow up state, let's build it from scratch.</p>
<h1 id="step-1-create-follow-up-states"><a class="header" href="#step-1-create-follow-up-states">Step 1: Create follow up states</a></h1>
<p>Navigate to the <code>fixture.jac</code> file</p>
<p>We will be adding an order confirmation state and an order denial state which are follow ups attached to the order state.</p>
<p>ADD: <code>state_order_confirmation = spawn node::state(name=&quot;order_confirmation&quot;);</code>
ADD: <code>state_order_denial = spawn node::state(name=&quot;order_denial&quot;);</code></p>
<pre><code>spawn { 
    state_order = spawn node::state(name=&quot;order&quot;);
    state_order_confirmation = spawn node::state(name=&quot;order_confirmation&quot;);
    state_order_denial = spawn node::state(name=&quot;order_denial&quot;);
}
</code></pre>
<h1 id="step-2-connect-follow-up-state-to-a-state"><a class="header" href="#step-2-connect-follow-up-state-to-a-state">Step 2: Connect follow up state to a state</a></h1>
<p>Next step we will attach the follow up state to the origin state, in this case it's the order state.</p>
<p>ADD: <code>state_order -[transition(intent_label = global.yes_label)]-&gt; state_order_confirmation;</code></p>
<p>If yes_label for intent_label is true it will go to the order confirmation state</p>
<p>ADD: <code>state_order -[transition(intent_label = global.no_label)]-&gt; state_order_denial;</code></p>
<p>If no_label for intent_label is true it will go to the order denial state</p>
<pre><code>spawn { 
    conv_root -[transition(intent_label = global.order_label)]-&gt; state_order;
    state_order -[transition(intent_label = global.yes_label)]-&gt; state_order_confirmation;
    state_order -[transition(intent_label = global.no_label)]-&gt; state_order_denial;
}
</code></pre>
<h1 id="step-3-add-business-logic-to-follow-up-state"><a class="header" href="#step-3-add-business-logic-to-follow-up-state">Step 3: Add business logic to follow up state</a></h1>
<p>Since there is no business logic required, we will create a slot <code>user</code> and attach their name to it so we could then use this slot for later use.</p>
<p>Navigate to <code>nodes.jac</code>, then search for <code>state node</code> and look for the node ability called <code> business_logic</code></p>
<p>ADD: <code>visitor.dialogue_context[&quot;user&quot;] = &quot;Jemmott&quot;;</code></p>
<pre><code>can business_logic {
    if (!visitor.hoping) { 
        if (here.name == &quot;order_confirmation&quot; or here.name == &quot;order_denial&quot;) {
            // HERE YOU COULD DO ALL YOUR LOGICS FOR THESE SPECIFIC FOLLOW UP STATES
            visitor.dialogue_context[&quot;user&quot;] = &quot;Jemmott&quot;;
        }
    }
}
</code></pre>
<h1 id="step-4-add-response-to-follow-up-state"><a class="header" href="#step-4-add-response-to-follow-up-state">Step 4: Add response to follow up state</a></h1>
<p>Here we will add a response to the follow up state.</p>
<p>Navigate to <code>nodes.jac</code>, then search for <code>state node</code> and look for the node ability called <code>gen_response</code></p>
<p>IF <code>here.name == &quot;order_confirmation&quot;</code> then ADD: <code> visitor.answer = &quot;Thank you for ordering with us&quot;;</code></p>
<p>IF <code>here.name == &quot;order_denial&quot;</code> then ADD: <code> visitor.answer = &quot;TNo problem, If there anything I can help with feel free to ask&quot;;</code></p>
<pre><code>can gen_response {
        if (!visitor.hoping) {
            if (here.name == &quot;soc&quot;) {
                visitor.answer = &quot;Hello there, Welcome to KFC!&quot;;
            } elif (here.name == &quot;order_confirmation&quot;) {
                visitor.answer = &quot;Thank you for ordering with us&quot;;
            } elif (here.name == &quot;order_denial&quot;) {
                visitor.answer = &quot;No problem, If there anything I can help with feel free to ask&quot;;
            }
        }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-add-follow-up-to-a-state-1"><a class="header" href="#how-to-add-follow-up-to-a-state-1">How to add follow up to a state</a></h1>
<h5 id="table-of-contents-2"><a class="header" href="#table-of-contents-2">Table of Contents</a></h5>
<ul>
<li><a href="examples/canoniCAI/documentation/add_followup_state.html#introduction"> Introduction </a></li>
<li><a href="examples/canoniCAI/documentation/add_followup_state.html#step-1-create-follow-up-states">Create follow up states</a></li>
<li><a href="examples/canoniCAI/documentation/add_followup_state.html#step-2-connect-follow-up-state-to-a-state">Connect follow up state to a state</a></li>
<li><a href="examples/canoniCAI/documentation/add_followup_state.html#step-3-add-business-logicc-to-follow-up-state">Add business logic to follow up state</a></li>
<li><a href="examples/canoniCAI/documentation/add_followup_state.html#step-4-add-response-to-follow-up-state">Add response to follow up state</a></li>
</ul>
<h1 id="introduction-1"><a class="header" href="#introduction-1">Introduction</a></h1>
<p>In the example KFC bot we have a follow up state. In this tutorial we will explain how we build the follow up. In the order state there is a follow state attached to it, where the customer could either confirm the order or decline the order. So let's dive into it. Let pretend that there was no follow up state, let's build it from scratch.</p>
<h1 id="step-1-create-follow-up-states-1"><a class="header" href="#step-1-create-follow-up-states-1">Step 1: Create follow up states</a></h1>
<p>Navigate to the <code>fixture.jac</code> file</p>
<p>We will be adding an order confirmation state and an order denial state which are follow ups attached to the order state.</p>
<p>ADD: <code>state_order_confirmation = spawn node::state(name=&quot;order_confirmation&quot;);</code>
ADD: <code>state_order_denial = spawn node::state(name=&quot;order_denial&quot;);</code></p>
<pre><code>spawn { 
    state_order = spawn node::state(name=&quot;order&quot;);
    state_order_confirmation = spawn node::state(name=&quot;order_confirmation&quot;);
    state_order_denial = spawn node::state(name=&quot;order_denial&quot;);
}
</code></pre>
<h1 id="step-2-connect-follow-up-state-to-a-state-1"><a class="header" href="#step-2-connect-follow-up-state-to-a-state-1">Step 2: Connect follow up state to a state</a></h1>
<p>Next step we will attach the follow up state to the origin state, in this case it's the order state.</p>
<p>ADD: <code>state_order -[transition(intent_label = global.yes_label)]-&gt; state_order_confirmation;</code></p>
<p>If yes_label for intent_label is true it will go to the order confirmation state</p>
<p>ADD: <code>state_order -[transition(intent_label = global.no_label)]-&gt; state_order_denial;</code></p>
<p>If no_label for intent_label is true it will go to the order denial state</p>
<pre><code>spawn { 
    conv_root -[transition(intent_label = global.order_label)]-&gt; state_order;
    state_order -[transition(intent_label = global.yes_label)]-&gt; state_order_confirmation;
    state_order -[transition(intent_label = global.no_label)]-&gt; state_order_denial;
}
</code></pre>
<h1 id="step-3-add-business-logic-to-follow-up-state-1"><a class="header" href="#step-3-add-business-logic-to-follow-up-state-1">Step 3: Add business logic to follow up state</a></h1>
<p>Since there is no business logic required, we will create a slot <code>user</code> and attach their name to it so we could then use this slot for later use.</p>
<p>Navigate to <code>nodes.jac</code>, then search for <code>state node</code> and look for the node ability called <code> business_logic</code></p>
<p>ADD: <code>visitor.dialogue_context[&quot;user&quot;] = &quot;Jemmott&quot;;</code></p>
<pre><code>can business_logic {
    if (!visitor.hoping) { 
        if (here.name == &quot;order_confirmation&quot; or here.name == &quot;order_denial&quot;) {
            // HERE YOU COULD DO ALL YOUR LOGICS FOR THESE SPECIFIC FOLLOW UP STATES
            visitor.dialogue_context[&quot;user&quot;] = &quot;Jemmott&quot;;
        }
    }
}
</code></pre>
<h1 id="step-4-add-response-to-follow-up-state-1"><a class="header" href="#step-4-add-response-to-follow-up-state-1">Step 4: Add response to follow up state</a></h1>
<p>Here we will add a response to the follow up state.</p>
<p>Navigate to <code>nodes.jac</code>, then search for <code>state node</code> and look for the node ability called <code>gen_response</code></p>
<p>IF <code>here.name == &quot;order_confirmation&quot;</code> then ADD: <code> visitor.answer = &quot;Thank you for ordering with us&quot;;</code></p>
<p>IF <code>here.name == &quot;order_denial&quot;</code> then ADD: <code> visitor.answer = &quot;TNo problem, If there anything I can help with feel free to ask&quot;;</code></p>
<pre><code>can gen_response {
        if (!visitor.hoping) {
            if (here.name == &quot;soc&quot;) {
                visitor.answer = &quot;Hello there, Welcome to KFC!&quot;;
            } elif (here.name == &quot;order_confirmation&quot;) {
                visitor.answer = &quot;Thank you for ordering with us&quot;;
            } elif (here.name == &quot;order_denial&quot;) {
                visitor.answer = &quot;No problem, If there anything I can help with feel free to ask&quot;;
            }
        }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-thought-process-of-fixing-utterances"><a class="header" href="#the-thought-process-of-fixing-utterances">The thought process of fixing utterances</a></h1>
<h5 id="table-of-contents-3"><a class="header" href="#table-of-contents-3">Table of Contents</a></h5>
<ul>
<li><a href="examples/canoniCAI/documentation/fixing_utterances.html#introduction"> Introduction </a></li>
<li><a href="examples/canoniCAI/documentation/fixing_utterances.html#fixing-misclassifications-from-bi-encoder-model">Fixing misclassifications from bi-encoder model</a></li>
<li><a href="examples/canoniCAI/documentation/fixing_utterances.html#fixing-misclassifications-from-use-qa-model">Fixing misclassifications from use-qa model</a></li>
</ul>
<h1 id="introduction-2"><a class="header" href="#introduction-2">Introduction</a></h1>
<p>Sometimes we will run into cases where we trained the utterances with one of the model for example using the bi-encoder or use-qa and there is misclassification. We will go through how we can solve each of those in this section.</p>
<h1 id="fixing-misclassifications-from-bi-encoder-model"><a class="header" href="#fixing-misclassifications-from-bi-encoder-model">Fixing misclassifications from bi-encoder model</a></h1>
<p>There could be several cases why the data is being misclassified. </p>
<ul>
<li><strong>overfitted</strong>: Meaning that they are so much of the same utterances in the dataset and there is basically just a one word change or there is not any distinguishing difference between these utterances. Try removing those.</li>
</ul>
<p>If you navigate to the <code>/data/clf_train.json/</code></p>
<p>Try your best to avoid training data like these add more diverse data to the dataset.</p>
<pre><code>{
    &quot;order&quot;: [
    &quot;i want a cheeseburger&quot;,
    &quot;i need a cheeseburger&quot;,
    &quot;want a cheeseburger&quot;,
    &quot;I want burger&quot;,
  ]
}
</code></pre>
<ul>
<li><strong>label is not specific enough</strong>: Most time it's either the label is vague or label does not extend for a wider scope. I'll explain this a bit more through the example below</li>
</ul>
<p>If you navigate to the <code>/data/clf_train.json/</code></p>
<p>The word <code>order</code> in this case is the label. Sometimes all you need is to add an extra word to the label or remove, be more specific and it will increase the chances for being classified to the correct label. In this case if you want it to classify better remove <code>cancel order</code> to <code>cancel</code> and maybe it will work better rather than making most of the utterances classify to <code>order</code>. Simple changes like that could work miracles.</p>
<pre><code>{
    &quot;order&quot;: [
    &quot;i want a cheeseburger&quot;,
    &quot;i need a cheeseburger&quot;,
    &quot;want a cheeseburger&quot;,
    &quot;I want burger&quot;,
  ],
  &quot;cancel order&quot;: [
  &quot;cancel the order please&quot;
  ]
}
</code></pre>
<ul>
<li><strong>missing diverse dataset</strong>: In this case you will have to go to the dataset and just add more training data with have more different strutural utterances for the label. Sometimes you need to add longer utterances, shorter utterances and etc. Most times you might have to go to the other dataset and see if there is conflicting utterances and delete and replace. These minor things can drastically change the accuracy.</li>
</ul>
<h1 id="fixing-misclassifications-from-use-qa-model"><a class="header" href="#fixing-misclassifications-from-use-qa-model">Fixing misclassifications from use-qa model</a></h1>
<p>This is relatively easy since there is minimal training data required.</p>
<p>Navigate to <code>/data/clf_labels.json/</code></p>
<p>If you look below sometimes the use qa would misclassify utterances that is meant to label <code>no</code> to <code>greetings</code>. Try changing up the label <code>no</code> to <code>agree</code> and <code>yes</code> to <code>disagree</code> . Simple changes like these will increase your chances for utterances to be classified better than orders. Even adding more words can also increase the chance of it classifying a larger dataset accurately for example instead of removing label <code>no</code> to <code>no disagree</code> can largely increase accuracy. Just change around these and test it to a large dataset and you will see better results.</p>
<pre><code>[
    &quot;greetings&quot;,
    &quot;bye&quot;,
    &quot;order&quot;,
    &quot;yes&quot;,
    &quot;no&quot;
]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-set-up-jaseci-for-actions-load-local"><a class="header" href="#how-to-set-up-jaseci-for-actions-load-local">How to set up jaseci for actions load local</a></h1>
<h5 id="table-of-contents-4"><a class="header" href="#table-of-contents-4">Table of Contents</a></h5>
<ul>
<li><a href="examples/canoniCAI/documentation/jaseci_actions_load_local.html#introduction">Introduction</a></li>
<li><a href="examples/canoniCAI/documentation/jaseci_actions_load_local.html#step-1-build-a-custom-jaseci-module">Build A Custom Jaseci Module</a></li>
<li><a href="examples/canoniCAI/documentation/jaseci_actions_load_local.html#step-2-load-a-custom-jaseci-module">Load a Custom Jaseci Module</a></li>
<li><a href="examples/canoniCAI/documentation/jaseci_actions_load_local.html#step-3-test-a-custom-jaseci-module">Test a Custom Jaseci Module</a></li>
</ul>
<h1 id="introduction-3"><a class="header" href="#introduction-3">Introduction</a></h1>
<p>In this tutorial we will guide you through on how to set up jaseci for actions load local. We will create a simple calculation module and load it locally.</p>
<h1 id="step-1---build-a-custom-jaseci-module"><a class="header" href="#step-1---build-a-custom-jaseci-module">Step 1 - Build A Custom Jaseci Module:</a></h1>
<p>We will create a folder name calculator and in the folder create a file name calculator.py.</p>
<p>In the file import jaseci_action module, this will give us power to all jaseci action functionality.</p>
<p>ADD: <code>from jaseci.actions.live_actions import jaseci_action</code></p>
<pre><code>from jaseci.actions.live_actions import jaseci_action

</code></pre>
<p>Then, we will proceed to add a function called <code>add</code>. Which will add two numbers.</p>
<pre><code>from jaseci.actions.live_actions import jaseci_action

@jaseci_action(act_group=[&quot;calc&quot;], allow_remote=True)
def add(
    first_number: int, second_number: int
):
answer = first_number + second_number
return answer
</code></pre>
<p>Lastly, we will create a port (8000) where we will use to launch the server for jaseci action.</p>
<pre><code>from jaseci.actions.live_actions import jaseci_action

@jaseci_action(act_group=[&quot;calc&quot;], allow_remote=True)
def add(
    first_number: int, second_number: int
):
answer = first_number + second_number
return answer

if __name__ == &quot;__main__&quot;:
    from jaseci.actions.remote_actions import launch_server

    launch_server(port=8000)
</code></pre>
<h1 id="step-2---load-a-custom-jaseci-module"><a class="header" href="#step-2---load-a-custom-jaseci-module">Step 2 - Load a Custom Jaseci Module:</a></h1>
<p>In this step we will show you how to load this module we created from the jaseci console (jsctl)</p>
<p>The steps are as follows:</p>
<ul>
<li>jsctl -m</li>
<li>actions load local <code>PATH_TO_PYTHON_FILE</code></li>
</ul>
<p>After running that it should be loaded to the console.</p>
<h1 id="step-3---test-a-custom-jaseci-module"><a class="header" href="#step-3---test-a-custom-jaseci-module">Step 3 - Test a Custom Jaseci Module:</a></h1>
<p>In this step we will test via browser to see if the module you created works.</p>
<p>The steps are as follows:</p>
<ul>
<li>In the terminal, cd into the directory where the calculator.py file is</li>
<li>then run python calculator.py, you should see <code>Application startup complete</code></li>
<li>Go to the browser and type localhost:8000/docs and you should be redirected to fast api frontend application</li>
<li>click on <code>/add/</code> </li>
<li>click <code>try it out</code></li>
<li>Enter a value for first_number and second_number</li>
<li>click <code>execute</code></li>
</ul>
<p>Now you should see the results. That is the entire process on how to build a custom module, load and test.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-for-running-ner-examples"><a class="header" href="#command-for-running-ner-examples">Command for running ner examples</a></h1>
<h3 id="compile-jac-program"><a class="header" href="#compile-jac-program">Compile jac program</a></h3>
<pre><code class="language-.jac">jac build main.jac
</code></pre>
<h3 id="activate-sentinel"><a class="header" href="#activate-sentinel">Activate sentinel</a></h3>
<pre><code>sentinel set -snt active:sentinel -mode ir main.jir
</code></pre>
<h3 id="call-walker-fro-training-and-pass-dataset-name-and-all-other-parameter"><a class="header" href="#call-walker-fro-training-and-pass-dataset-name-and-all-other-parameter">Call walker fro training and pass dataset name and all other parameter</a></h3>
<pre><code>walker run train_and_eval_all_models -ctx &quot;{\&quot;train_file\&quot;:\&quot;ner.json\&quot;,\&quot;eval_file\&quot;:\&quot;ner.json\&quot;,\&quot;num_train_epochs\&quot;:\&quot;10\&quot;,\&quot;batch_size\&quot;:\&quot;16\&quot;,\&quot;learning_rate\&quot;:\&quot;0.02\&quot;,\&quot;mode\&quot;:\&quot;default\&quot;}&quot;
</code></pre>
<h3 id="predict-entity-from-tfm"><a class="header" href="#predict-entity-from-tfm">Predict entity from tfm</a></h3>
<pre><code>walker run predict_entity_from_tfm -ctx &quot;{\&quot;text\&quot;:\&quot;Can you explain to me,please,what Homeowners Warranty Program means,what it applies to,what is its purpose? Thank you. The Humboldt University of Berlin is situated in Berlin, Germany\&quot;}&quot;
</code></pre>
<h3 id="predict-entity-from-flair"><a class="header" href="#predict-entity-from-flair">predict entity from flair</a></h3>
<pre><code>walker run predict_entity_from_flair -ctx &quot;{\&quot;labels\&quot;:\&quot;Fin_Corp\&quot;,\&quot;text\&quot;:\&quot;Can you explain to me,please,what Homeowners Warranty Program means,what it applies to,what is its purpose? Thank you. The Humboldt University of Berlin is situated in Berlin, Germany\&quot;}&quot;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="jaseci-kit"><a class="header" href="#jaseci-kit">Jaseci Kit</a></h1>
<p>Jaseci Kit is a collection of state-of-the-art machine learning models and useful tools that may be used in your application development.</p>
<h2 id="encoders"><a class="header" href="#encoders">Encoders</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Example</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><code>use_enc</code></td><td>USE Encoder</td><td><a href="jaseci_kit/modules/encoders/use_enc/README.html">Link</a></td><td>Zero-shot</td><td>Ready</td><td>Sentence-level embedding pre-trained on general text corpus</td><td><a href="https://arxiv.org/abs/1803.11175">Paper</a></td></tr>
<tr><td><code>use_qa</code></td><td>USE QA</td><td><a href="jaseci_kit/modules/encoders/use_qa/README.html">Link</a></td><td>Zero-shot</td><td>Ready</td><td>Sentence-level embedding pre-trained on Q&amp;A data corpus</td><td><a href="https://arxiv.org/abs/1803.11175">Paper</a></td></tr>
<tr><td><code>fast_enc</code></td><td>FastText</td><td><a href="jaseci_kit/modules/encoders/fast_enc/README.html">Link</a></td><td>Training req.</td><td>Ready</td><td>FastText Text Classifier</td><td><a href="https://arxiv.org/abs/1712.09405">Paper</a></td></tr>
<tr><td><code>bi_enc</code></td><td>Bi-encoder</td><td><a href="jaseci_kit/modules/encoders/bi_enc/README.html">Link</a></td><td>Training req./Zero-shot</td><td>Ready</td><td>Dual sentence-level encoders</td><td><a href="https://arxiv.org/abs/1803.11175">Paper</a></td></tr>
<tr><td><code>poly_enc</code></td><td>Poly-encoder</td><td></td><td>Training req./Zero-shot</td><td>Experimental</td><td>Poly Encoder</td><td><a href="https://arxiv.org/abs/1905.01969">Paper</a></td></tr>
<tr><td><code>cross_enc</code></td><td>Cross-encoder</td><td></td><td>Training req./Zero-shot</td><td>Experimental</td><td>Cross Encoder</td><td><a href="https://arxiv.org/abs/1905.01969">Paper</a></td></tr>
</tbody></table>
</div>
<h2 id="entity"><a class="header" href="#entity">Entity</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Example</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><code>ent_ext</code>/ <code>lstm_ner</code></td><td>Flair NER</td><td><a href="jaseci_kit/modules/entity_utils/flair_ner/README.html">Link</a></td><td>Training req.</td><td>Ready</td><td>Entity extraction using the FLAIR NER framework</td><td></td></tr>
<tr><td><code>tfm_ner</code></td><td>Transformer NER</td><td><a href="jaseci_kit/modules/entity_utils/tfm_ner/README.html">Link</a></td><td>Training req.</td><td>Ready</td><td>Token classification on Transformer models, can be used for NER</td><td><a href="https://huggingface.co/docs/transformers/tasks/token_classification#token-classification">Huggingface</a></td></tr>
<tr><td><code>lstm_ner</code></td><td>LSTM NER</td><td></td><td>Traininig req.</td><td>Experimental</td><td>Entity extraction/Slot filling via Long-short Term Memory Network</td><td></td></tr>
</tbody></table>
</div>
<h2 id="summarization"><a class="header" href="#summarization">Summarization</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Example</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><code>cl_summer</code></td><td>Summarizer</td><td><a href="jaseci_kit/modules/summarization/cl_summer/README.html">Link</a></td><td>No Training req.</td><td>Ready</td><td>Extractive Summarization using Sumy</td><td><a href="https://miso-belica.github.io/sumy/">Doc.</a></td></tr>
<tr><td><code>t5_sum</code></td><td>Summarizer</td><td><a href="jaseci_kit/modules/summarization/t5_sum/README.html">Link</a></td><td>No Training req.</td><td>Ready</td><td>Abstractive Summarization using the T5 Model</td><td><a href="https://huggingface.co/docs/transformers/model_doc/t5">Doc.</a>, <a href="https://arxiv.org/pdf/1910.10683.pdf">Paper</a></td></tr>
</tbody></table>
</div>
<h2 id="text-processing"><a class="header" href="#text-processing">Text Processing</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Example</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><code>text_seg</code></td><td>Text Segmenter</td><td><a href="jaseci_kit/modules/text_processing/text_seg/README.html">Link</a></td><td>No Training req.</td><td>Experimetal</td><td>Topical Change Detection in Documents</td><td><a href="https://huggingface.co/dennlinger/roberta-cls-consec">Huggingface</a></td></tr>
</tbody></table>
</div>
<h2 id="object-detection"><a class="header" href="#object-detection">Object Detection</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Example</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><code>yolo_v5</code></td><td>Object Recognition</td><td><a href="jaseci_kit/modules/object_detection/yolo_v5/README.html">Link</a></td><td>Training req.</td><td>Ready</td><td>'You only look once', is an object detection algorithm that divides images into a grid system</td><td><a href="https://docs.ultralytics.com/">Documentation</a></td></tr>
</tbody></table>
</div>
<h2 id="non-ai-tools"><a class="header" href="#non-ai-tools">Non-AI Tools</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Example</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><code>pdf_ext</code></td><td>PDF Extractor</td><td><a href="jaseci_kit/modules/non_ai/pdf_ext/README.html">Link</a></td><td>Ready</td><td>Extract content from a PDF file via PyPDF2</td><td><a href="https://pypdf2.readthedocs.io/en/latest/">Doc.</a></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="encoders-1"><a class="header" href="#encoders-1">Encoders</a></h1>
<p>Text encoding is a process to convert meaningful text into number / vector representation so as to preserve the context and relationship between words and sentences, such that a machine can understand the pattern associated in any text and can make out the context of sentences.</p>
<p>Jaseci Kit provides the following optimized text encoders:</p>
<h2 id="encoders-2"><a class="header" href="#encoders-2">Encoders</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><a href="jaseci_kit/modules/encoders/use_enc/README.html"><code>use_enc</code></a></td><td>USE Encoder</td><td>Zero-shot</td><td>Ready</td><td>Sentence-level embedding pre-trained on general text corpus</td><td><a href="jaseci_kit/modules/encoders/use_enc/README.html">Documentation</a> <a href="https://arxiv.org/abs/1803.11175">Paper</a></td></tr>
<tr><td><a href="jaseci_kit/modules/encoders/use_qa/README.html"><code>use_qa</code></a></td><td>USE QA</td><td>Zero-shot</td><td>Ready</td><td>Sentence-level embedding pre-trained on Q&amp;A data corpus</td><td><a href="jaseci_kit/modules/encoders/use_qa/README.html">Documentation</a> <a href="https://arxiv.org/abs/1803.11175">Paper</a></td></tr>
<tr><td><a href="jaseci_kit/modules/encoders/fast_enc/README.html"><code>fast_enc</code></a></td><td>FastText</td><td>Training required</td><td>Ready</td><td>FastText Text Classifier</td><td><a href="jaseci_kit/modules/encoders/fast_enc/README.html">Documentation</a>  <a href="https://arxiv.org/abs/1712.09405">Paper</a></td></tr>
<tr><td><a href="jaseci_kit/modules/encoders/bi_enc/README.html"><code>bi_enc</code></a></td><td>Bi-encoder</td><td>Training required / Zero-shot</td><td>Ready</td><td>Dual sentence-level encoders</td><td><a href="jaseci_kit/modules/encoders/bi_enc/README.html">Documentation</a>  <a href="https://arxiv.org/abs/1803.11175">Paper</a></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="use-encoder-use_enc"><a class="header" href="#use-encoder-use_enc">USE Encoder (<code>use_enc</code>)</a></h1>
<p><code>use_enc</code> module uses the universal sentence encoder to generate sentence level embeddings.
The sentence level embeddings can then be used to calculate the similarity between two given text via cosine similarity and/or dot product.</p>
<ul>
<li><code>encode</code>: encodes the text and returns a embedding of 512 length
<ul>
<li>Alternate name: <code>get_embedding</code></li>
<li>Input:
<ul>
<li><code>text</code> (string or list of strings): text to be encoded</li>
</ul>
</li>
<li>Return: Encoded embeddings</li>
</ul>
</li>
<li><code>cos_sim_score</code>:
<ul>
<li>Input:
<ul>
<li><code>q_emb</code> (string or list of strings): first text to be embeded</li>
<li><code>a_emb</code> (string or list of strings): second text to be embedded</li>
</ul>
</li>
<li>Return: cosine similarity score</li>
</ul>
</li>
<li><code>text_simliarity</code>: calculate the simlarity score between given texts
<ul>
<li>Input:
<ul>
<li><code>text1</code> (string): first text</li>
<li><code>text2</code> (string): second text</li>
</ul>
</li>
<li>Return: cosine similarity score</li>
</ul>
</li>
<li><code>text_classify</code>: use USE encoder as a classifier
<ul>
<li>Input:
<ul>
<li><code>text</code> (string): text to classify</li>
<li><code>classes</code> (list of strings): candidate classification classes</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="example-jac-usage"><a class="header" href="#example-jac-usage">Example Jac Usage:</a></h2>
<pre><code class="language-jac"># Use USE encoder for zero-shot intent classification
walker use_enc_example {
    can use.encode, use.cos_sim_score;
    has text = &quot;What is the weather tomorrow?&quot;;
    has candidates = [
        &quot;weather forecast&quot;,
        &quot;ask for direction&quot;,
        &quot;order food&quot;
    ];
    text_emb = use.encode(text)[0];
    cand_embs = use.encode(candidates); # use.encode handles string/list

    max_score = 0;
    max_cand = 0;
    cand_idx = 0;
    for cand_emb in cand_embs {
        cos_score = use.cos_sim_score(cand_emb, text_emb);
        if (cos_score &gt; max_score) {
            max_score = cos_score;
            max_cand = cand_idx;
        }
        cand_idx += 1;
    }

    predicted_cand = candidates[max_cand];
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="use-qa-use_qa"><a class="header" href="#use-qa-use_qa">USE QA (<code>use_qa</code>)</a></h1>
<p><code>use_qa</code> module uses the multilingual-qa to generate sentence level embeddings.
The sentence level embeddings can then be used to calculate best match between question and available answers via cosine similarity and/or dist_score.</p>
<ul>
<li>
<p><code>question_encode</code>: encodes question and returns a embedding of 512 length</p>
<ul>
<li>Alternate name: <code>enc_question</code></li>
<li>Input:
<ul>
<li><code>text</code> (string or list of strings): question to be encoded</li>
</ul>
</li>
<li>Return: Encoded embeddings</li>
</ul>
</li>
<li>
<p><code>answer_encode</code>: encodes answers and returns a embedding of 512 length</p>
<ul>
<li>Alternate name: <code>enc_answer</code></li>
<li>Input:
<ul>
<li><code>text</code> (string or list of strings): question to be encoded</li>
<li><code>context</code> (string or list of strings): usually the text around the answer text, for example it could be 2 sentences before plus 2 sentences after.</li>
</ul>
</li>
<li>Return: Encoded embeddings</li>
</ul>
</li>
<li>
<p><code>cos_sim_score</code>:</p>
<ul>
<li>Input:
<ul>
<li><code>q_emb</code> (string or list of strings): first embeded text</li>
<li><code>a_emb</code> (string or list of strings): second embeded text</li>
</ul>
</li>
<li>Return: cosine similarity score</li>
</ul>
</li>
<li>
<p><code>dist_score</code>:</p>
<ul>
<li>Input:
<ul>
<li><code>q_emb</code> (string or list of strings): first embeded text</li>
<li><code>a_emb</code> (string or list of strings): second embeded text</li>
</ul>
</li>
<li>Return: inner product score</li>
</ul>
</li>
<li>
<p><code>question_similarity</code>: calculate the simlarity score between given questions</p>
<ul>
<li>Input:
<ul>
<li><code>text1</code> (string): first text</li>
<li><code>text2</code> (string): second text</li>
</ul>
</li>
<li>Return: cosine similarity score</li>
</ul>
</li>
<li>
<p><code>question_classify</code>: use USE QA as question classifier</p>
<ul>
<li>Input:
<ul>
<li><code>text</code> (string): text to classify</li>
<li><code>classes</code> (list of strings): candidate classification classes</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>answer_similarity</code>: calculate the simlarity score between given answer</p>
<ul>
<li>Input:
<ul>
<li><code>text1</code> (string): first text</li>
<li><code>text2</code> (string): second text</li>
</ul>
</li>
<li>Return: cosine similarity score</li>
</ul>
</li>
<li>
<p><code>answer_classify</code>: use USE encoder as answer classifier</p>
<ul>
<li>Input:
<ul>
<li><code>text</code> (string): text to classify</li>
<li><code>classes</code> (list of strings): candidate classification classes</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>qa_similarity</code>: calculate the simlarity score between question and answer</p>
<ul>
<li>Input:
<ul>
<li><code>text1</code> (string): first text</li>
<li><code>text2</code> (string): second text</li>
</ul>
</li>
<li>Return: cosine similarity score</li>
</ul>
</li>
<li>
<p><code>qa_classify</code>: use USE encoder as a QA classifier</p>
<ul>
<li>Input:
<ul>
<li><code>text</code> (string): text to classify</li>
<li><code>classes</code> (list of strings): candidate classification classes</li>
</ul>
</li>
<li>Returns: </li>
</ul>
</li>
</ul>
<h2 id="example-jac-usage-1"><a class="header" href="#example-jac-usage-1">Example Jac Usage:</a></h2>
<pre><code class="language-jac"># Use USE_QA model for zero-shot text classification
walker use_qa_example {
    can use.qa_similarity;
    has questions = &quot;What is your age?&quot;;
    has responses = [&quot;I am 20 years old.&quot;, &quot;good morning&quot;];
    has response_contexts = [&quot;I will be 21 next year.&quot;, &quot;great day.&quot;];

    max_score = 0;
    max_cand = 0;
    cand_idx = 0;
    for response in responses {
        cos_score = use.qa_similarity(text1=questions,text2=response);
        std.out(cos_score);
        if (cos_score &gt; max_score) {
            max_score = cos_score;
            max_cand = cand_idx;
        }
        cand_idx += 1;
    }

    predicted_cand = responses[max_cand];
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fasttext-encoder-fast_enc"><a class="header" href="#fasttext-encoder-fast_enc">FastText Encoder (<code>fast_enc</code>)</a></h1>
<p><code>fast_enc</code> module uses the facebook's fasttext -- efficient learning of word representations and sentence classification.</p>
<ul>
<li><code>train</code>: used to train the Bi-Encoder for custom input
<ul>
<li>Input:
<ul>
<li><code>traindata</code> (Dict): dictionary of candidates and suportting contexts for each candidate</li>
<li><code>train_with_existing</code> (bool): if set to true train the model from scratch otherwise trains incrementally </li>
</ul>
</li>
</ul>
</li>
<li><code>predict</code>: predits the most suitable candidate for a provided context, takes text or embedding 
<ul>
<li>Input:
<ul>
<li><code>sentences</code> (list of strings): list of sentences the needs to be classified</li>
</ul>
</li>
<li>Return: a dictionary of sentence, predicted intent and probability </li>
</ul>
</li>
<li><code>save_model</code>:
<ul>
<li>Input 
<ul>
<li><code>model_path</code> (string): the path to save model</li>
</ul>
</li>
<li>Returns: &quot;[Saved model at] : &lt;model_path&gt;&quot; if model successfully saved</li>
</ul>
</li>
<li><code>load_model</code>:
<ul>
<li>Input 
<ul>
<li><code>model_path</code> (string): the path to save model</li>
</ul>
</li>
<li>Returns: &quot;[loaded model from] : &lt;model_path&gt;&quot; if model successfully loaded</li>
</ul>
</li>
</ul>
<h2 id="example-jac-usage-2"><a class="header" href="#example-jac-usage-2">Example Jac Usage:</a></h2>
<pre><code class="language-jac"># Train and inference with a fasttext classifier
walker fast_enc_example {
    has train_file = &quot;fast_enc_train.json&quot;;
    has train_with_existing = false;
    has test_sentence=  [&quot;what's going on ?&quot;];
    can fast_enc.train,fast_enc.predict;

    # Training the model
    train_data = file.load_json(train_file);
    fast_enc.train(traindata=train_data,train_with_existing=false);
    
    # Getting inference from the model
    resp_data=fast_enc.predict(sentences=test_sentence);
    std.out(resp_data);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bi-encoder-bi_enc"><a class="header" href="#bi-encoder-bi_enc"><strong>Bi-Encoder (<code>bi_enc</code>)</strong></a></h1>
<p><strong><code>bi_enc</code></strong> is a arrangement of two encoder modules from BERT, it represents context and candidate separately using twin-structured encoders, it takes contexts and candidates, to predict the best suitable candidate for each context. You can train the module on custom data to behave accordingly. Let's take a deep dive into the trainning culture.</p>
<p>This tutorial shows you how to train a Bi-Encoder with a custom training loop to categorize contexts by candidates. In this you use jaseci(jac) and python.</p>
<ol>
<li>Preparing <a href="jaseci_kit/modules/encoders/bi_enc/index.html#1-praparing-dataset">dataset</a></li>
<li>Import <a href="jaseci_kit/modules/encoders/bi_enc/index.html#2-import-bi-encoderbi_enc-module-in-jac">Bi-Encoder(bi_enc)</a> module in jac</li>
<li><a href="jaseci_kit/modules/encoders/bi_enc/index.html#3-train-the-model">Train</a> the model</li>
<li><a href="jaseci_kit/modules/encoders/bi_enc/index.html#4-evaluation-of-the-model-effectiveness-">Evaluate</a> the model's effectiveness</li>
<li>Use the trained model to make <a href="jaseci_kit/modules/encoders/bi_enc/index.html#5-use-the-trained-model-to-make-predictions-">predictions</a></li>
</ol>
<h2 id="walk-through"><a class="header" href="#walk-through"><strong>Walk through</strong></a></h2>
<h3 id="1-praparing-dataset"><a class="header" href="#1-praparing-dataset"><strong>1. Praparing dataset</strong></a></h3>
<p>For this tutorial, we are going to leverage the biencoder for intent classification, which is categorizing an incoming text into a one of predefined intents. for demonstration purpose, we are going to use the SNIPS dataset as an example here. <a href="https://huggingface.co/datasets/snips_built_in_intents">snips dataset</a>.</p>
<p>SNIPS is a popular intent classificawtion datasets that covers intents such as <code>[ &quot;BookRestaurant&quot;, &quot;ComparePlaces&quot;, &quot;GetDirections&quot;, &quot;GetPlaceDetails&quot;, &quot;GetTrafficInformation&quot;, &quot;GetWeather&quot;, &quot;RequestRide&quot;, &quot;SearchPlace&quot;, &quot;ShareCurrentLocation&quot;, &quot;ShareETA&quot; ]</code>
We need to do a little data format conversion to create a version of SNIPS that work with our biencoder implemenation.
For this part, we are going to use Python. First, </p>
<ol>
<li>
<p><code>Import the dataset</code> from huggingface <a href="https://huggingface.co/datasets/snips_built_in_intents">dataset library</a>.</p>
<pre><code class="language-python"># import library
from datasets import load_dataset
# load dataset
dataset = load_dataset(&quot;snips_built_in_intents&quot;)
print(dataset[&quot;train&quot;][:2])
</code></pre>
<p>If imported successsfuly, you should see the data format to be something like this in output</p>
<blockquote>
<p>{&quot;text&quot;: [&quot;Share my location with Hillary's sister&quot;, &quot;Send my current location to my father&quot;], &quot;label&quot;: [5, 5]}</p>
</blockquote>
</li>
<li>
<p><code>Converting the format</code> from the SNIPS out of the box to the format that can be ingested by biencoder.</p>
<pre><code class="language-python">import pandas as pd
from sklearn.model_selection import train_test_split
import json

# get labels names
lab = dataset[&quot;train&quot;].features[&quot;label&quot;].names
# create labels dictionary
label_dict = {v: k for v, k in enumerate(lab)}
# dataset
dataset = dataset[&quot;train&quot;]

# create dataset function
def CreateData(data):
    # Create dataframe
    df = pd.DataFrame(data)
    # Map labels dict on label column
    df[&quot;label&quot;] = df[&quot;label&quot;].apply(lambda x : label_dict[x])
    # grouping text on basis of label
    df = df.groupby(&quot;label&quot;).agg({&quot;text&quot;: &quot;\t&quot;.join, &quot;label&quot;: &quot;\t&quot;.join})
    df[&quot;label&quot;] = df[&quot;label&quot;].apply(lambda x: x.split(&quot;\t&quot;)[0])

    # Create data dictionary
    data_dict = {}
    for i in range(len(df)):
        data_dict[df[&quot;label&quot;][i]] = df[&quot;text&quot;][i].split(&quot;\t&quot;)
    return data_dict
# Split dataset: Create train and test dataset and store in json file `train_bi.json` and `test_bi.json` and save to disk.
# Split dataset in train and test set
train, test = train_test_split(dataset, test_size=0.2, random_state=42)

# Create train dataset
train_data = CreateData(train)
# write data in json file 'train_bi.json'
with open(&quot;train_bi.json&quot;, &quot;w&quot;, encoding=&quot;utf8&quot;) as f:
    f.write(json.dumps(train_data, indent = 4))
    

# Create test dataset
test_data = CreateData(test)
data = {
    &quot;contexts&quot;: [],
    &quot;candidates&quot;: [],
    &quot;context_type&quot;: &quot;text&quot;,
    &quot;candidate_type&quot;: &quot;text&quot;
    }
for itm in test_data:
    data[&quot;candidates&quot;].append(itm)
    data[&quot;contexts&quot;].extend(test_data[itm])
# write data in json file 'test_bi.json'
with open(&quot;test_bi.json&quot;, &quot;w&quot;, encoding=&quot;utf8&quot;) as f:
        f.write(json.dumps(data, indent = 4))
</code></pre>
<p><strong>The resulting format should look something like this.</strong></p>
<ul>
<li>
<p><strong>train_bi.json</strong></p>
<pre><code>&quot;BookRestaurant&quot;: [
    &quot;Book me a table for 2 people at the sushi place next to the show tomorrow night&quot;,&quot;Find me a table for four for dinner tonight&quot;
    ],
&quot;ComparePlaces&quot;: [
    &quot;What's the cheapest between the two restaurants the closest to my hotel?&quot;
    ]
</code></pre>
</li>
<li>
<p><strong>test_bi.json</strong></p>
<pre><code>{
    {
        &quot;contexts&quot;: [
            &quot;We are a party of 4 people and we want to book a table at Seven Hills for sunset&quot;,
            &quot;Book a table at Saddle Peak Lodge for my diner with friends tonight&quot;,
            &quot;How do I go to Montauk avoiding tolls?&quot;,
            &quot;What's happening this week at Smalls Jazz Club?&quot;,
            &quot;Will it rain tomorrow near my all day event?&quot;,
            &quot;Send my current location to Anna&quot;,
            &quot;Share my ETA with Jo&quot;,
            &quot;Share my ETA with the Snips team&quot;
        ],
        &quot;candidates&quot;: [
            &quot;BookRestaurant&quot;,
            &quot;ComparePlaces&quot;,
            &quot;GetDirections&quot;,
            &quot;GetPlaceDetails&quot;,
            &quot;GetTrafficInformation&quot;,
            &quot;GetWeather&quot;,
            &quot;RequestRide&quot;,
            &quot;SearchPlace&quot;,
            &quot;ShareCurrentLocation&quot;,
            &quot;ShareETA&quot;
        ],
        &quot;context_type&quot;: &quot;text&quot;,
        &quot;candidate_type&quot;: &quot;text&quot;
    }
}
</code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="2-import-bi-encoderbi_enc-module-in-jac"><a class="header" href="#2-import-bi-encoderbi_enc-module-in-jac"><strong>2. Import <code>Bi-Encoder(bi_enc)</code> module in jac</strong></a></h3>
<ol>
<li>Open terminal and run jaseci by cmd
<blockquote>
<p>jsctl -m</p>
</blockquote>
</li>
<li>Load <code>bi_enc</code> module in jac by cmd
<blockquote>
<p>actions load module jaseci_kit.bi_enc</p>
</blockquote>
</li>
</ol>
<h3 id="3-train-the-model"><a class="header" href="#3-train-the-model"><strong>3. Train the model</strong></a></h3>
<p>For this tutorial, we are going to <code>train and infer</code> the <code>biencoder</code> for <code>intent classification</code> its <code>train</code> on snips <code>train datasets</code> and <code>infer</code> on <code>test dataset</code>, which is categorizing an incoming text into a one of predefined intents.</p>
<ul>
<li>
<p><strong>Creating Jac Program (<code>train and infer</code> bi_enc)</strong></p>
<ol>
<li>
<p>Create a file by name <code>bi_encoder.jac</code></p>
</li>
<li>
<p>Create node <code>model_dir</code> and <code>bi_encoder</code> in <code>bi_encoder.jac</code> file</p>
<pre><code>node model_dir;
node bi_encoder {};
</code></pre>
</li>
<li>
<p>Initializing <code>node bi_encoder</code> and import <code>train</code> and <code>infer</code> ability inside node.</p>
<pre><code># import train and infer ability
can bi_enc.train, bi_enc.infer;
</code></pre>
</li>
<li>
<p>Initialize module <code>train</code> and <code>infer</code> inside <code>bi_encoder node</code>
<code>bi_enc.train</code> take training argument and start traing <code>bi_enc</code> module</p>
<pre><code class="language-python">can train_bi_enc with train_bi_enc entry{
# Code snippet for training the model
train_data = file.load_json(visitor.train_file);

# Train the model 
report bi_enc.train(
    dataset=train_data,
    from_scratch=visitor.from_scratch,
    training_parameters={
        &quot;num_train_epochs&quot;: visitor.num_train_epochs.int
        }
    );
}
# prediction on test dataset
can infer with train_bi_enc exit{
    # Use the model to perform inference
    # returns the list of context with the suitable candidates
    test_data = file.load_json(visitor.test_file);
    resp_data = bi_enc.infer(
        contexts=test_data[&quot;contexts&quot;],
        candidates=test_data[&quot;candidates&quot;],
        context_type=test_data[&quot;context_type&quot;],
        candidate_type=test_data[&quot;candidate_type&quot;]
    );
    # the infer action returns all the candidate with the confidence scores
    # Iterate through the candidate labels and their predicted scores
    result = [];
    for pred in resp_data.list{
        text = pred[&quot;context&quot;];
        max_score = 0;
        max_intent = &quot;&quot;;
        for j=0 to j&lt;pred[&quot;candidate&quot;].length by j+=1 {
            if (pred[&quot;score&quot;][j] &gt; max_score){
                max_intent = pred[&quot;candidate&quot;][j];
                max_score = pred[&quot;score&quot;][j];
            }
        }
        result.list::append({
            &quot;context&quot;:text,
            &quot;predicted intent&quot;:max_intent,
            &quot;Conf_Score&quot;:max_score
            });
    }
    report [result];
}
# predict intent on new text
can predict with predict entry{        
# Use the model to perform inference
# returns the list of context with the suitable candidates
test_data = file.load_json(visitor.test_data_file);
resp_data = bi_enc.infer(
    contexts=test_data[&quot;contexts&quot;],
    candidates=test_data[&quot;candidates&quot;],
    context_type=test_data[&quot;context_type&quot;],
    candidate_type=test_data[&quot;candidate_type&quot;]
    );
# the infer action returns all the candidate with the confidence scores
# Iterate through the candidate labels and their predicted scores
pred = resp_data[0]
context = pred[&quot;contexts&quot;]
max_score = 0;
max_intent = &quot;&quot;;
for j=0 to j&lt;pred[&quot;candidate&quot;].length by j+=1 {
    if (pred[&quot;score&quot;][j] &gt; max_score){
        max_intent = pred[&quot;candidate&quot;][j];
        max_score = pred[&quot;score&quot;][j];
    }
}
report [{
        &quot;context&quot;:text,
        &quot;pred intent&quot;:max_intent,
        &quot;Conf_Score&quot;:max_score
        }];
}
</code></pre>
<p><strong>Parameter details</strong></p>
<ul>
<li><code>train</code>: will be used to train the Bi-Encoder on custom data
<ul>
<li>Input:
<ul>
<li><code>dataset</code> (Dict): dictionary of candidates and suportting contexts for each candidate</li>
<li><code>from_scratch</code> (bool): if set to true train the model from scratch otherwise trains incrementally </li>
<li><code>training_parameters</code> (Dict): dictionary of training parameters</li>
</ul>
</li>
<li>Returns: text when model training is completed</li>
</ul>
</li>
<li><code>infer</code>: will be used to predits the most suitable candidate for a provided context, takes text or embedding 
<ul>
<li>Input:
<ul>
<li><code>contexts</code> (string or list of strings): context which needs to be classified</li>
<li><code>candidates</code> (string or list of strings): list of candidates for the context </li>
<li><code>context_type</code> (string): can be text or embedding type</li>
<li><code>candidate_type</code> (string): can be text or embedding type</li>
</ul>
</li>
<li>Return: a dictionary of similarity score for each candidate and context </li>
</ul>
</li>
</ul>
</li>
<li>
<p>Adding edge name of <code>bi_model</code> in <code>bi_encoder.jac</code> file for connecting nodes inside graph.</p>
<pre><code># adding edge
edge bi_model {
    has model_type;
}
</code></pre>
</li>
<li>
<p>Adding graph name of <code>bi_encoder_graph</code> for initializing node .</p>
<pre><code>graph bi_encoder_graph {
    has anchor bi_model_dir;
    spawn {
        bi_model_dir = spawn node::model_dir;
        bi_encoder_node = spawn node::bi_encoder;
        bi_model_dir -[bi_model(model_type=&quot;bi_encoder&quot;)]-&gt; bi_encoder_node;
    }
}
</code></pre>
</li>
<li>
<p>Initializing <code>walker init</code> for calling graph</p>
<pre><code>walker init {
    root {
    spawn here --&gt; graph::bi_encoder_graph; 
    }
}
</code></pre>
</li>
<li>
<p>Creating walker name of <code>train_bi_enc</code> for getting parameter from <strong>context or default</strong> and calling ability <code>train and infer</code> bi_encoder.</p>
<pre><code># Declaring the walker: 
walker train_bi_enc{
    # the parameters required for training    
    has train_file = &quot;train_bi.json&quot;;
    has from_scratch = true;
    has num_train_epochs = 20;
    has test_file = &quot;test_bi.json&quot;;    

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
<p><strong>Default parameter for train and test biencoder</strong> </br>
<code>train_file</code> : local path of <strong>train_bi.json</strong> file </br>
<code>from_scratch</code> : <strong>true</strong> </br>
<code>num_train_epochs</code> : <strong>20</strong> </br>
<code>test_file</code> : local path of <strong>test_bi.json</strong> file </br></p>
</li>
<li>
<p>Declaring walker for <code>predicting intents</code> on new text</p>
<pre><code>walker predict{
    has test_data_file = &quot;test_dataset.json&quot;;    

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
<p><strong>Final bi_encoder.jac</strong> program
we are conmbining all steps from <strong>2 to 8</strong> inside <strong>bi_encoder.jac</strong></p>
<pre><code class="language-python">node model_dir;
node bi_encoder{
    # import train and infer ability
    can bi_enc.train, bi_enc.infer;

    can train_bi_enc with train_bi_enc entry{
        #Code snippet for training the model
        train_data = file.load_json(visitor.train_file);
        
        # Train the model 
        report bi_enc.train(
            dataset=train_data,
            from_scratch=visitor.from_scratch,
            training_parameters={
                &quot;num_train_epochs&quot;: visitor.num_train_epochs.int
                }
            );
        }

    can infer with train_bi_enc exit{
        # Use the model to perform inference
        # returns the list of context with the suitable candidates
        test_data = file.load_json(visitor.test_file);
        resp_data = bi_enc.infer(
            contexts=test_data[&quot;contexts&quot;],
            candidates=test_data[&quot;candidates&quot;],
            context_type=test_data[&quot;context_type&quot;],
            candidate_type=test_data[&quot;candidate_type&quot;]
        );
        # the infer action returns all the candidate with the confidence scores
        # Iterate through the candidate labels and their predicted scores

        result = [];
        for pred in resp_data.list{
            text = pred[&quot;context&quot;];
            max_score = 0;
            max_intent = &quot;&quot;;
            for j=0 to j&lt;pred[&quot;candidate&quot;].length by j+=1 {
                if (pred[&quot;score&quot;][j] &gt; max_score){
                    max_intent = pred[&quot;candidate&quot;][j];
                    max_score = pred[&quot;score&quot;][j];
                }
            }
            result.list::append({
                &quot;context&quot;:text,
                &quot;predicted intent&quot;:max_intent,
                &quot;Conf_Score&quot;:max_score
                });
        }
        report [result];
    }

    # predict intent on new text
    can predict with predict entry{        
    # Use the model to perform inference
    test_data = file.load_json(visitor.test_data_file);
    resp_data = bi_enc.infer(
        contexts=test_data[&quot;contexts&quot;],
        candidates=test_data[&quot;candidates&quot;],
        context_type=test_data[&quot;context_type&quot;],
        candidate_type=test_data[&quot;candidate_type&quot;]
        );
    
    # the infer action returns all the candidate with the confidence scores
    # Iterate through the candidate labels and their predicted scores
    pred = resp_data[0];
    max_score = 0;
    max_intent = &quot;&quot;;
    for j=0 to j&lt;pred[&quot;candidate&quot;].length by j+=1 {
        if (pred[&quot;score&quot;][j] &gt; max_score){
            max_intent = pred[&quot;candidate&quot;][j];
            max_score = pred[&quot;score&quot;][j];
        }
    }
    report [{
        &quot;context&quot;: pred[&quot;context&quot;],
        &quot;pred intent&quot;: max_intent,
        &quot;Conf_Score&quot;: max_score
        }];
    }
}


# adding edge
edge bi_model {
    has model_type;
}

graph bi_encoder_graph {
    has anchor bi_model_dir;
    spawn {
        bi_model_dir = spawn node::model_dir;
        bi_encoder_node = spawn node::bi_encoder;
        bi_model_dir -[bi_model(model_type=&quot;bi_encoder&quot;)]-&gt; bi_encoder_node;
    }
}

walker init {
    root {
    spawn here --&gt; graph::bi_encoder_graph; 
    }
}


# Declaring the walker: 
walker train_bi_enc{
    # the parameters required for training    
    has train_file = &quot;train_bi.json&quot;;
    has from_scratch = true;
    has num_train_epochs = 20;
    has test_file = &quot;test_bi.json&quot;;    

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}

# declaring walker for predicting intents on new text
walker predict{
    # passing input data for prediction
    has test_data_file = &quot;test_dataset.json&quot;;    

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
</li>
</ol>
<p><strong>Steps for running <code>bi_encoder.jac</code> programm</strong></p>
<ol>
<li>
<p>Build <code>bi_encoder.jac</code> by run cmd</p>
<blockquote>
<p>jac build bi_encoder.jac</p>
</blockquote>
</li>
<li>
<p>Activate sentinal by run cmd</p>
<blockquote>
<p>sentinel set -snt active:sentinel -mode ir bi_encoder.jir</p>
</blockquote>
<p><strong>Note</strong>: If getting error <strong><code>ValueError: badly formed hexadecimal UUID string</code></strong> execute only once</p>
<blockquote>
<p>sentinel register -set_active true -mode ir bi_encoder.jir</p>
</blockquote>
</li>
<li>
<p>Calling walker <code>train_bi_enc</code> with <code>default parameter</code> for training <code>bi_enc</code> module by cmd</p>
<blockquote>
<p>walker run train_bi_enc </br></p>
</blockquote>
</li>
</ol>
<p>After <code>3rd step</code> running logging will shown on console </br>
<strong><code>training logs</code></strong></p>
<pre><code>jaseci &gt; walker run train_bi_enc
Saving non-shared model to : modeloutput
non shared model created
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 33/33 [00:13&lt;00:00,  2.42it/s]
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 33/33 [00:13&lt;00:00, 14.12it/s]

            Epoch : 1
            loss : 0.11524221436543898
            LR : 0.000891891891891892

100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 33/33 [00:01&lt;00:00, 21.54it/s]
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 33/33 [00:01&lt;00:00, 21.42it/s]

            Epoch : 2
            loss : 0.030822114031197445
            LR : 0.0006689189189189189

100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 33/33 [00:01&lt;00:00, 20.99it/s]
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 33/33 [00:01&lt;00:00, 20.67it/s]

            Epoch : 3
            loss : 0.016803985327538667
            LR : 0.000445945945945946

100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 33/33 [00:01&lt;00:00, 19.98it/s]
97%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▊     | 32/33 [00:01&lt;00:00, 19.59it/s]

            Epoch : 4
            loss : 0.011880970348350027
            LR : 0.000222972972972973

100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 33/33 [00:04&lt;00:00,  8.16it/s]
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 33/33 [00:04&lt;00:00,  6.06it/s]

            Epoch : 5
            loss : 0.010109249611780273
            LR : 0.0

Epoch: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 5/5 [00:22&lt;00:00,  4.49s/batch]

</code></pre>
</li>
</ul>
<h3 id="4-evaluation-of-the-model-effectiveness"><a class="header" href="#4-evaluation-of-the-model-effectiveness"><strong>4. Evaluation of the model effectiveness</strong></a></h3>
<ul>
<li>
<p>Performing model effectiveness on <code>test_bi.json</code> dataset.</p>
<pre><code>Model testing Accuracy : 0.9090909090909091
Model testing F1_Score : 0.886656034024455

Model classification Report

                        precision    recall  f1-score   support

        BookRestaurant       1.00      1.00      1.00        14
         ComparePlaces       0.57      1.00      0.73         4
         GetDirections       1.00      1.00      1.00         7
       GetPlaceDetails       1.00      0.80      0.89        10
 GetTrafficInformation       1.00      0.50      0.67         4
            GetWeather       0.90      1.00      0.95         9
           RequestRide       0.83      1.00      0.91         5
           SearchPlace       0.80      0.67      0.73         6
  ShareCurrentLocation       1.00      1.00      1.00         3
              ShareETA       1.00      1.00      1.00         4

              accuracy                           0.91        66
             macro avg       0.91      0.90      0.89        66
          weighted avg       0.93      0.91      0.91        66
</code></pre>
<p><strong>Sample Result Data</strong></p>
<pre><code>[
    {
        &quot;context&quot;: &quot;I want a table for friday 8pm for 2 people at Katz's Delicatessen&quot;,
        &quot;pred intent&quot;: &quot;BookRestaurant&quot;,
        &quot;true intent&quot;: &quot;BookRestaurant&quot;,
        &quot;Conf_Score&quot;: 16.789536811645576
    },
    {
        &quot;context&quot;: &quot;Is Vertigo Sky Lounge more expensive than the bar I usually go to in New York?&quot;,
        &quot;pred intent&quot;: &quot;ComparePlaces&quot;,
        &quot;true intent&quot;: &quot;ComparePlaces&quot;,
        &quot;Conf_Score&quot;: 10.970629125448095
    },
    {
        &quot;context&quot;: &quot;Directions to Disneyworld avoiding traffic&quot;,
        &quot;pred intent&quot;: &quot;GetDirections&quot;,
        &quot;true intent&quot;: &quot;GetDirections&quot;,
        &quot;Conf_Score&quot;: 18.088717110248858
    },
    {
        &quot;context&quot;: &quot;Show me the fastest itinerary to my Airbnb on a Friday night&quot;,
        &quot;pred intent&quot;: &quot;GetDirections&quot;,
        &quot;true intent&quot;: &quot;GetDirections&quot;,
        &quot;Conf_Score&quot;: 12.83485819143171
    },
    {
        &quot;context&quot;: &quot;Is there any traffic on US 20?&quot;,
        &quot;pred intent&quot;: &quot;GetTrafficInformation&quot;,
        &quot;true intent&quot;: &quot;GetTrafficInformation&quot;,
        &quot;Conf_Score&quot;: 12.378884709882225
    },
    {
        &quot;context&quot;: &quot;Can I take my bike to go to work today?&quot;,
        &quot;pred intent&quot;: &quot;GetTrafficInformation&quot;,
        &quot;true intent&quot;: &quot;GetWeather&quot;,
        &quot;Conf_Score&quot;: 13.005006348394783
    },
    {
        &quot;context&quot;: &quot;Book a Lyft car to go to 33 greene street&quot;,
        &quot;pred intent&quot;: &quot;RequestRide&quot;,
        &quot;true intent&quot;: &quot;RequestRide&quot;,
        &quot;Conf_Score&quot;: 18.330015462917917
    },
    
    {
        &quot;context&quot;: &quot;Get me a ride to the airport&quot;,
        &quot;pred intent&quot;: &quot;RequestRide&quot;,
        &quot;true intent&quot;: &quot;RequestRide&quot;,
        &quot;Conf_Score&quot;: 27.063900934951988
    },
    {
        &quot;context&quot;: &quot;Find me the finest sushi restaurant in the area of my next meeting&quot;,
        &quot;pred intent&quot;: &quot;SearchPlace&quot;,
        &quot;true intent&quot;: &quot;SearchPlace&quot;,
        &quot;Conf_Score&quot;: 13.798050719287755
    }
]
</code></pre>
</li>
</ul>
<h3 id="5-use-the-trained-model-to-make-predictions"><a class="header" href="#5-use-the-trained-model-to-make-predictions"><strong>5. Use the trained model to make predictions</strong> </br></a></h3>
<ul>
<li>
<p>Create new input data for prdiction stored in <code>test_dataset.json</code> file (can take any name) </br></p>
<p><strong>Input data</strong></p>
<pre><code>  {
      &quot;contexts&quot;: [
          &quot;We are a party of 4 people and we want to book a table at Seven Hills for sunset&quot;
      ],
      &quot;candidates&quot;: [
          &quot;BookRestaurant&quot;,
          &quot;ComparePlaces&quot;,
          &quot;GetDirections&quot;,
          &quot;GetPlaceDetails&quot;,
          &quot;GetTrafficInformation&quot;,
          &quot;GetWeather&quot;,
          &quot;RequestRide&quot;,
          &quot;SearchPlace&quot;,
          &quot;ShareCurrentLocation&quot;,
          &quot;ShareETA&quot;
      ],
      &quot;context_type&quot;: &quot;text&quot;,
      &quot;candidate_type&quot;: &quot;text&quot;
  }
</code></pre>
</li>
<li>
<p>Calling walker for predict intents by cmd</p>
<pre><code>walker run predict -ctx &quot;{\&quot;test_data_file\&quot;:\&quot;test_dataset.json\&quot;}&quot;
</code></pre>
<p><strong>Output Result</strong></p>
<pre><code> [
  {
    &quot;context&quot;: &quot;We are a party of 4 people and we want to book a table at Seven Hills for sunset&quot;,
    &quot;pred intent&quot;: &quot;BookRestaurant&quot;,
    &quot;Conf_Score&quot;: 19.72020419731474
  }
]
</code></pre>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="entity-extraction--recognition"><a class="header" href="#entity-extraction--recognition">Entity Extraction / Recognition</a></h1>
<p>Named entity recognition (NER) is the process of categroizing and identifying informational entities in text. Jaseci provides the following NER engines: </p>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><a href="jaseci_kit/modules/entity_utils/flair_ner/README.html"><code>ent_ext</code></a></td><td>Flair NER</td><td>Training req.</td><td>Ready</td><td>Entity extraction using the FLAIR NER framework</td><td><a href="jaseci_kit/modules/entity_utils/flair_ner/README.html">Documentation</a></td></tr>
<tr><td><a href="jaseci_kit/modules/entity_utils/flair_ner/README.html"><code>tfm_ner</code></a></td><td>Transformer NER</td><td>Training req.</td><td>Ready</td><td>Token classification on Transformer models, can be used for NER</td><td><a href="jaseci_kit/modules/entity_utils/tfm_ner/README.html">Documentation</a> <a href="https://huggingface.co/docs/transformers/tasks/token_classification#token-classification">Huggingface</a></td></tr>
<tr><td><code>lstm_ner</code></td><td>LSTM NER</td><td>Training Required</td><td>Experimental</td><td>Entity extraction/Slot filling via Long-short Term Memory Network</td><td></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h3 id="entity-extraction-using-flair-nerent_ext"><a class="header" href="#entity-extraction-using-flair-nerent_ext">Entity Extraction Using <code>FLAIR NER(ent_ext)</code></a></h3>
<h3 id="flair-nerent_ext-module-uses-flair-named-entity-recognition-architecture-it-can-either-be-used-zero-shot-or-few-shot-entity-recognition"><a class="header" href="#flair-nerent_ext-module-uses-flair-named-entity-recognition-architecture-it-can-either-be-used-zero-shot-or-few-shot-entity-recognition"><strong>FLAIR NER</strong><code>(ent_ext)</code> module uses flair named entity recognition architecture. It can either be used <code>zero-shot</code> or <code>few-shot</code> entity recognition.</a></h3>
<p>For this tutorial we are going to leaverage the flair ner <code>Zero-shot classification</code> and <code>Few-shot classification</code> Use Case</p>
<p><strong>USE CASE I : <a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#use-case-i--zero-shot-entity-detection-classify-entity-without-training-ner-data">Zero-Shot entity detection</a></strong></p>
<ol>
<li>Import <a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#1-import-flair-ner-module-in-jac">flair ner(ent_ext)</a> module</li>
<li><a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#2-classify-entity-">Classify Entity</a></li>
</ol>
<p><strong>USE CASE II : <a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#use-case-ii--few-shot-classification">Few-shot classification</a></strong></p>
<ol>
<li>Preparing <a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#1-creating-input-datasets">dataset</a></li>
<li>Import <a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#2-import-flair-nerent_ext-module-in-jac">flair ner(ent_ext)</a> module</li>
<li><a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#3-few-shot-classification-train-test-and-validate-model">Few-shot classification</a></li>
</ol>
<p><strong><a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#experiment-and-methodology">Eperiment and methodology</a></strong></p>
<h1 id="walk-through-1"><a class="header" href="#walk-through-1"><strong>Walk through</strong></a></h1>
<h2 id="use-case-i--zero-shot-entity-detection-classify-entity-without-training-ner-data"><a class="header" href="#use-case-i--zero-shot-entity-detection-classify-entity-without-training-ner-data"><strong>USE CASE I</strong> : <code>Zero-Shot entity detection</code> Classify entity without training <code>NER Data</code>:</a></h2>
<h3 id="1-import-flair-ner-module-in-jac"><a class="header" href="#1-import-flair-ner-module-in-jac"><strong>1. Import Flair Ner Module in jac</strong></a></h3>
<ol>
<li>Open terminal an run jaseci by cmd
<pre><code>jsctl -m
</code></pre>
</li>
<li>Load module <code>ent_ext</code> in jac by cmd
<pre><code>actions load module jaseci_kit.ent_ext
</code></pre>
</li>
</ol>
<h3 id="2-classify-entity-"><a class="header" href="#2-classify-entity-"><strong>2. Classify Entity</strong> :</a></h3>
<p>For this tutorial we are going to classify entity text with <code>flair ner(ent_ext)</code> module on <code>tars-ner</code> pretrained model.</p>
<ul>
<li>
<p>Creating jac program for <strong>zero-shot(ent_ext)</strong></p>
<ol>
<li>
<p>Create a file by name <code>zero_shot_ner.jac</code></p>
</li>
<li>
<p>Create node <code>model_dir</code> and <code>flair_ner</code> in <code>zero_shot_ner.jac</code> file</p>
<pre><code>node model_dir;
node flair_ner {};
</code></pre>
</li>
<li>
<p>Initializing node flair_ner and adding abilty <code>set_config</code> and <code>entity_detection</code></p>
<pre><code>node flair_ner{
    # set model configuration and infer entity
    ent_ext.set_config, can ent_ext.entity_detection;
    }
</code></pre>
</li>
<li>
<p>Initializing module for <code>set_config</code> inside node <code>flair_ner</code></p>
<p><code>set_config</code> will get parameter from context and load model in module. its take two argument <code>model_name(str)</code> an <code>model_type(str)</code>.</p>
<pre><code>can set_config with infer_zero_shot entry{
    report ent_ext.set_config(
        ner_model = visitor.model_name,
        model_type = visitor.model_type
    );
}
</code></pre>
</li>
<li>
<p>Initializing module <code>infer_zero_shot</code> for <strong>zero_shot tokenclassification</strong> inside <strong>flair_ner node</strong></p>
<p><code>infer_zero_shot</code> module take two arguments <code>text</code> and <code>labels list</code> for infer entity.</p>
<pre><code>can infer_zero_shot with infer_zero_shot entry{
    text = visitor.text;
    labels = visitor.labels.list;
    result =  ent_ext.entity_detection(
        text=text,
        ner_labels= labels
        );
    fn = &quot;result.json&quot;;
    result = {&quot;text&quot;:text,&quot;entities&quot;:result[&quot;entities&quot;]};
    file.dump_json(fn, result);
}
</code></pre>
</li>
<li>
<p>Adding edge name of <code>ner_model</code> in <code>zero_shot_ner.jac</code> file for connecting nodes inside graph.</p>
<pre><code># adding edge
edge ner_model {
    has model_type;
}
</code></pre>
</li>
<li>
<p>Adding graph name of <code>ner_val_graph</code> for initializing node .</p>
<pre><code>graph ner_eval_graph {
    has anchor ner_model_dir;
    spawn {
        ner_model_dir = spawn node::model_dir;
        flair_ner_node = spawn node::flair_ner;
        ner_model_dir -[ner_model(model_type=&quot;flair_ner&quot;)]-&gt; flair_ner_node;
    }
}
</code></pre>
</li>
<li>
<p>Initializing <code>walker init</code> for calling graph</p>
<pre><code>walker init {
    root {
    spawn here --&gt; graph::ner_val_graph; 
    }
}
</code></pre>
</li>
<li>
<p>Creating <code>walker</code> name of <code>infer_zero_shot</code> for getting parameter from context and calling ability <code>set_config</code> and <code>infer_zero_shot</code> entity detection.</p>
<pre><code># creating walker for entity predictions
walker infer_zero_shot{
    has model_name;
    has model_type;
    has text;
    has labels;

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
<p>It take arguments from context and call ability to set model configuration <code>set_config</code> and <code>infer_zero_shot</code> for detecting entity from text and store <code>result</code> in <code>result.json file</code></p>
</li>
</ol>
<ul>
<li>
<p><strong>Final jac program <code>zero_shot_ner.jac</code></strong></p>
<pre><code>node model_dir;
node flair_ner {
    # load the model actions here
    can ent_ext.entity_detection, ent_ext.set_config;

    can set_config with infer_zero_shot entry{
        report ent_ext.set_config(
            ner_model = visitor.model_name,
            model_type = visitor.model_type
        );
    }

    can infer_zero_shot with infer_zero_shot entry{
        text = visitor.text;
        labels = visitor.labels.list;
        result =  ent_ext.entity_detection(
            text=text,
            ner_labels= labels
            );
        fn = &quot;result.json&quot;;
        result = {&quot;text&quot;:text,&quot;entities&quot;:result[&quot;entities&quot;]};
        file.dump_json(fn, result);
    }
}

edge ner_model {
    has model_type;
}

graph ner_eval_graph {
    has anchor ner_model_dir;
    spawn {
        ner_model_dir = spawn node::model_dir;
        flair_ner_node = spawn node::flair_ner;
        ner_model_dir -[ner_model(model_type=&quot;flair_ner&quot;)]-&gt; flair_ner_node;
    }
}



walker init {
    root {
    spawn here --&gt; graph::ner_eval_graph; 
    }
}

# creating walker for entity predictions
walker infer_zero_shot{
    has model_name;
    has model_type;
    has text;
    has labels;

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
</li>
</ul>
</li>
<li>
<p>Steps for calling jac program <code>use case 1</code> and <code>infer_zero_shot entity</code> from new text.</p>
<ol>
<li>
<p>Build <code>zero_shot_ner.jac</code> by run cmd</p>
<pre><code>jac build zero_shot_ner.jac
</code></pre>
</li>
<li>
<p>Activate <code>sentinal</code> by run cmd:</p>
<pre><code>sentinel set -snt active:sentinel -mode ir zero_shot_ner.jir
</code></pre>
<p><strong>Note</strong>: If getting error <strong><code>ValueError: badly formed hexadecimal UUID string</code></strong> execute only once</p>
<blockquote>
<p>sentinel register -set_active true -mode ir zero_shot_ner.jir</p>
</blockquote>
</li>
<li>
<p>Module <code>entity_detection</code>: detects all availabe entities from the provided context</p>
<ul>
<li>
<h3 id="input-data"><a class="header" href="#input-data">Input Data:</a></h3>
<ul>
<li><code>model_name</code>: name of model which we are using for zero-shot entity detection e.g. <code>tars-ner</code></li>
<li><code>model_type</code> : type of model using in entity detection e.g. <code>tars</code> </li>
<li><code>text (string)</code>: context to detect entities. e.g. &quot;They had a record of five wins and two losses in Opening Day games at Bennett Park 19 wins and 22 losses at Tiger Stadium and three wins and four losses at Comerica Park for a total home record in Opening Day games of 26 wins and 28 losses&quot;</li>
<li><code>ner_labels(list of strings)</code>: List of entities, e.g. <code>[&quot;LOC&quot;,&quot;PER&quot;]</code></li>
</ul>
</li>
<li>
<h3 id="output-1"><a class="header" href="#output-1">Output</a></h3>
<ul>
<li><code>Result</code>: Created a json file that stored <code>input text</code> and <code>predicted entities</code> in result.json file`</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Run the following command to execute walker for <code>entity_detection</code> and pass <a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#input-data"><code>Input Data</code></a> in context.</p>
<pre><code>walker run infer_zero_shot -ctx &quot;{\&quot;model_name\&quot;:\&quot;tars-ner\&quot;,\&quot;model_type\&quot;:\&quot;tars\&quot;,\&quot;text\&quot;:\&quot;They had a record of five wins and two losses in Opening Day games at Bennett Park 19 wins and 22 losses at Tiger Stadium and three wins and four losses at Comerica Park for a total home record in Opening Day games of 26 wins and 28 losses\&quot;,\&quot;labels\&quot;:[\&quot;building\&quot;, \&quot;organization\&quot;]}&quot;
</code></pre>
</li>
<li>
<p>After executing step 6 entity output will be stored in <code>result.json</code> file </p>
<pre><code>{
    &quot;text&quot;: &quot;They had a record of five wins and two losses in Opening Day games at Bennett Park 19 wins and 22 losses at Tiger Stadium and three wins and four losses at Comerica Park for a total home record in Opening Day games of 26 wins and 28 losses&quot;,
    &quot;entities&quot;: [
        {
            &quot;entity_text&quot;: &quot;Bennett Park&quot;,
            &quot;entity_value&quot;: &quot;building&quot;,
            &quot;conf_score&quot;: 0.9999510645866394,
            &quot;start_pos&quot;: 70,
            &quot;end_pos&quot;: 82
        },
        {
            &quot;entity_text&quot;: &quot;Tiger Stadium&quot;,
            &quot;entity_value&quot;: &quot;building&quot;,
            &quot;conf_score&quot;: 0.9999762773513794,
            &quot;start_pos&quot;: 108,
            &quot;end_pos&quot;: 121
        },
        {
            &quot;entity_text&quot;: &quot;Comerica Park&quot;,
            &quot;entity_value&quot;: &quot;building&quot;,
            &quot;conf_score&quot;: 0.999976634979248,
            &quot;start_pos&quot;: 156,
            &quot;end_pos&quot;: 169
        }
    ]
}
</code></pre>
</li>
</ol>
</li>
</ul>
<h2 id="use-case-ii--few-shot-classification"><a class="header" href="#use-case-ii--few-shot-classification"><strong>Use Case II : Few-shot classification</strong></a></h2>
<p>In Few shot classification we are going train, test and validate <code>ent_ext</code> module</p>
<h3 id="1-creating-input-datasets"><a class="header" href="#1-creating-input-datasets">1. Creating Input Datasets</a></h3>
<p>For <code>train</code> <code>test</code> and <code>validation</code> we are going to prepare dataset from <a href="https://huggingface.co/datasets/conll2003">Conll2003</a> dataset, we are creating list of dict and storing in json file by name <code>train.json, validation.json and test.json</code>, 
and storing dataset file in directory name <code>dataset</code> and put all required file in this.</p>
<ul>
<li><strong>train_file : <code>dataset/train.json</code></strong>
<pre><code>[
    {
        &quot;context&quot;: &quot;EU rejects German call to boycott British lamb&quot;,
        &quot;entities&quot;: [
            {
                &quot;entity_value&quot;: &quot;EU&quot;,
                &quot;entity_type&quot;: &quot;ORG&quot;,
                &quot;start_index&quot;: 0,
                &quot;end_index&quot;: 2
            },
            {
                &quot;entity_value&quot;: &quot;German&quot;,
                &quot;entity_type&quot;: &quot;MISC&quot;,
                &quot;start_index&quot;: 11,
                &quot;end_index&quot;: 17
            },
            {
                &quot;entity_value&quot;: &quot;British&quot;,
                &quot;entity_type&quot;: &quot;MISC&quot;,
                &quot;start_index&quot;: 34,
                &quot;end_index&quot;: 41
            }
        ]
    }
]
</code></pre>
</li>
<li><strong>val_file : <code>dataset/val.json</code></strong>
<pre><code>[
    {
        &quot;context&quot;: &quot;CRICKET LEICESTERSHIRE TAKE OVER AT TOP AFTER INNINGS VICTORY&quot;,
        &quot;entities&quot;: [
            {
                &quot;entity_value&quot;: &quot;LEICESTERSHIRE&quot;,
                &quot;entity_type&quot;: &quot;ORG&quot;,
                &quot;start_index&quot;: 8,
                &quot;end_index&quot;: 22
            }
        ]
    }
]
</code></pre>
</li>
<li><strong>test_file : <code>dataset/test.json</code></strong>
<pre><code>[
    {
        &quot;context&quot;: &quot;The former Soviet republic was playing in an Asian Cup finals tie for the first time&quot;,
        &quot;entities&quot;: [
            {
                &quot;entity_value&quot;: &quot;Soviet&quot;,
                &quot;entity_type&quot;: &quot;MISC&quot;,
                &quot;start_index&quot;: 11,
                &quot;end_index&quot;: 17
            },
            {
                &quot;entity_value&quot;: &quot;Asian&quot;,
                &quot;entity_type&quot;: &quot;MISC&quot;,
                &quot;start_index&quot;: 45,
                &quot;end_index&quot;: 50
            },
            {
                &quot;entity_value&quot;: &quot;Asian&quot;,
                &quot;entity_type&quot;: &quot;MISC&quot;,
                &quot;start_index&quot;: 45,
                &quot;end_index&quot;: 50
            }
        ]
    }
]
</code></pre>
</li>
</ul>
<h3 id="2-import-flair-nerent_ext-module-in-jac"><a class="header" href="#2-import-flair-nerent_ext-module-in-jac"><strong>2. Import Flair ner(ent_ext) Module in jac</strong></a></h3>
<ol>
<li>Open terminal an run jaseci by cmd
<pre><code>jsctl -m
</code></pre>
</li>
<li>Load module <code>ent_ext</code> in jac by cmd
<pre><code>actions load module jaseci_kit.ent_ext
</code></pre>
</li>
</ol>
<h3 id="3-few-shot-classification-train-test-and-validate-model"><a class="header" href="#3-few-shot-classification-train-test-and-validate-model"><strong>3. Few-shot classification <code>(Train, Test and Validate model)</code></strong></a></h3>
<p>For this tutorial we are going to train the model on train dataset and validate the model on validation dataset and final test model on the test dataset.</p>
<ul>
<li>
<p><strong>Creating Jac Program</strong></p>
<ol>
<li>
<p>Create a file by name <code>flair_ner.jac</code></p>
</li>
<li>
<p>Create node <code>model_dir</code> and <code>flair_ner</code> in <code>flair_ner.jac</code> file</p>
<pre><code>node model_dir;
node flair_ner {};
</code></pre>
</li>
<li>
<p>Initializing node flair_ner and adding abilty <code>set_config</code> and <code>entity_detection</code></p>
<pre><code>node flair_ner{
    # set ability model configuration and train model
    ent_ext.set_config, can ent_ext.train, ent_ext.entity_detection;
    }
</code></pre>
</li>
<li>
<p>Initializing module for <code>set_config</code> inside node <code>flair_ner</code></p>
<pre><code>can set_config with infer_zero_shot entry{
    report ent_ext.set_config(
        ner_model = visitor.model_name,
        model_type = visitor.model_type
    );
}
</code></pre>
<p><strong>set_config</strong> will take two argument <code>model_name(str)</code> and <code>model_type(str)</code>.
and load model for training and validation.</p>
</li>
<li>
<p>Initializing module for <code>train</code> and <code>infer</code> inside node <code>flair_ner</code></p>
<pre><code>can train with train_and_val_flair entry{
    # train the model with a given dataset
    train_data = file.load_json(visitor.train_file);
    val_data = file.load_json(visitor.val_file);
    test_data = file.load_json(visitor.test_file);

    # training model
    ent_ext.train(
        train_data = train_data,
        val_data = val_data,
        test_data = test_data,
        train_params = {
            &quot;num_epoch&quot;: visitor.num_train_epochs.int,
            &quot;batch_size&quot;: visitor.batch_size.int,
            &quot;LR&quot;: visitor.learning_rate.float
            });
}

can infer with predict_flair entry{
    report ent_ext.entity_detection(
        text = visitor.text,
        ner_labels = visitor.ner_labels.list
    );
}
</code></pre>
<p><strong>train</strong> will take 4 parameter describing in upcoming steps <a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#input-data-for-train-and-validation">parameter_description</a></p>
</li>
<li>
<p>Adding edge name of <code>ner_model</code> in <code>flair_ner.jac</code> file for connecting nodes inside graph.</p>
<pre><code># adding edge
edge ner_model {
    has model_type;
}
</code></pre>
</li>
<li>
<p>Adding graph name of <code>ner_val_graph</code> for initializing node .</p>
<pre><code>graph ner_eval_graph {
    has anchor ner_model_dir;
    spawn {
        ner_model_dir = spawn node::model_dir;
        flair_ner_node = spawn node::flair_ner;
        ner_model_dir -[ner_model(model_type=&quot;flair_ner&quot;)]-&gt; flair_ner_node;
    }
}
</code></pre>
</li>
<li>
<p>Initializing <code>walker init</code> for calling graph</p>
<pre><code>walker init {
    root {
    spawn here --&gt; graph::ner_val_graph; 
    }
}
</code></pre>
</li>
<li>
<p>Creating <code>walker</code> name of <code>train_and_val_flair</code> for getting parameter from context and calling ability <code>set_config</code> and <code>train</code> and start training model on new dataset, validate and test</p>
<pre><code>## creating walker 
walker train_and_val_flair {
    # Take in a training and eval dataset
    has train_file;
    has val_file;
    has test_file;
    has model_name=&quot;prajjwal1/bert-tiny&quot;;
    has model_type=&quot;trfmodel&quot;;
    has num_train_epochs=3;
    has batch_size=8;
    has learning_rate=0.02;

    # Train all NER models on the train set
    # and validate them on the val set
    # report accuracy performance on flair NER models
    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
<p>Here we are initialize some default argument and also we are providing all argument from context. it take arguments from context and call ability to set model configuration <code>set_config</code> and <code>train</code> is for training, val and test model on new datasets.</p>
</li>
<li>
<p>Creating walker for <code>predicting</code> <code>entities</code> from trained flair model.</p>
<pre><code># infer
walker predict_flair{
    has text;
    #declare default labels
    has ner_labels = [&quot;PER&quot;,&quot;ORG&quot;, &quot;LOC&quot;, &quot;MISC&quot;];

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }

}
</code></pre>
</li>
</ol>
</li>
<li>
<p><strong>Final Jac Program</strong></p>
<ul>
<li><code>flair_ner.jac</code>
<pre><code>node model_dir;
node flair_ner {
    # load the model actions here
    can ent_ext.set_config, ent_ext.train, ent_ext.entity_detection;


    can set_config with train_and_val_flair entry{
        ent_ext.set_config(
            ner_model = visitor.model_name,
            model_type = visitor.model_type
        );
    }


    can train with train_and_val_flair entry{
        # train the model with a given dataset
        train_data = file.load_json(visitor.train_file);
        val_data = file.load_json(visitor.val_file);
        test_data = file.load_json(visitor.test_file);

        # training model
        ent_ext.train(
            train_data = train_data,
            val_data = val_data,
            test_data = test_data,
            train_params = {
                &quot;num_epoch&quot;: visitor.num_train_epochs.int,
                &quot;batch_size&quot;: visitor.batch_size.int,
                &quot;LR&quot;: visitor.learning_rate.float
                });
    }

    can infer with predict_flair entry{
        report ent_ext.entity_detection(
            text = visitor.text,
            ner_labels = visitor.ner_labels.list
        );
    }
}


edge ner_model {
    has model_type;
}

graph ner_eval_graph {
    has anchor ner_model_dir;
    spawn {
        ner_model_dir = spawn node::model_dir;
        flair_ner_node = spawn node::flair_ner;
        ner_model_dir -[ner_model(model_type=&quot;flair_ner&quot;)]-&gt; flair_ner_node;
    }
}


walker init {
    root {
    spawn here --&gt; graph::ner_eval_graph; 
    }
}

## creating walker for:
# Train all NER models on the train set
# and validate them on the val set
# and test on test set
# report accuracy performance on flair NER models

walker train_and_val_flair {
    # Take in a training and eval dataset
    has train_file;
    has val_file;
    has test_file;
    has model_name=&quot;prajjwal1/bert-tiny&quot;;
    has model_type=&quot;trfmodel&quot;;
    has num_train_epochs=3;
    has batch_size=8;
    has learning_rate=0.02;

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}

# infer
walker predict_flair{
    has text;
    #declare default labels
    has ner_labels = [&quot;PER&quot;,&quot;ORG&quot;, &quot;LOC&quot;, &quot;MISC&quot;];

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }

}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Steps for calling jac program(<code>flair_ner.jac</code>)</strong></p>
<ol>
<li>
<p>Build <code>flair_ner.jac</code> by run cmd :</p>
<pre><code>jac build flair_ner.jac
</code></pre>
</li>
<li>
<p>Activate <code>sentinal</code> by run cmd:</p>
<pre><code>sentinel set -snt active:sentinel -mode ir flair_ner.jir
</code></pre>
<p><strong>Note</strong>: If getting error <strong><code>ValueError: badly formed hexadecimal UUID string</code></strong> execute only once</p>
<blockquote>
<p>sentinel register -set_active true -mode ir flair_ner.jir</p>
</blockquote>
</li>
<li>
<p>Create <code>train and validation context</code>: train model on train dataset file and validate and test on validate and test dataset file.</p>
<ul>
<li>
<h3 id="input-data-for-train-and-validation"><a class="header" href="#input-data-for-train-and-validation">Input data for train and validation:</a></h3>
<ul>
<li><code>train_file(List(Dict))</code> : training dataset file</li>
<li><code>val_file(List(Dict))</code>: validation datase file</li>
<li><code>test_file(List(Dict))</code>: test dataset file</li>
<li><code>model_name(str)</code> : <code>prajjwal1/bert-tiny</code> or <code>tars-ner</code></li>
<li><code>model_type(str)</code> : <code>trfmodel</code> or <code>tars</code></li>
<li><code>num_train_epochs(int)</code> : <code>3</code> (default)</li>
<li><code>batch_size(int)</code>: <code>8</code></li>
<li><code>learning_rate(float)</code>:<code>0.02</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Run the following command to execute walker for <code>model train and validation</code> and pass <a href="jaseci_kit/modules/entity_utils/flair_ner/index.html#input-data-for-train-and-validation"><code>input data</code></a> in context.</p>
<pre><code>walker run train_and_val_flair -ctx &quot;{\&quot;train_file\&quot;:\&quot;dataset/train.json\&quot;,\&quot;val_file\&quot;:\&quot;dataset/val.json\&quot;,\&quot;test_file\&quot;:\&quot;dataset/test.json\&quot;,\&quot;model_name\&quot;:\&quot;prajjwal1/bert-tiny\&quot;,\&quot;model_type\&quot;:\&quot;trfmodel\&quot;,\&quot;num_train_epochs\&quot;:\&quot;10\&quot;,\&quot;batch_size\&quot;:\&quot;8\&quot;,\&quot;learning_rate\&quot;:\&quot;0.02\&quot;}&quot;

</code></pre>
</li>
<li>
<p>You'll find the following logs in train folder inside model name.
<code>Console logs</code></p>
<pre><code>2022-06-14 10:58:47,583 ----------------------------------------------------------------------------------------------------
2022-06-14 10:58:47,583 Corpus: &quot;Corpus: 14041 train + 3250 dev + 3453 test sentences&quot;
2022-06-14 10:58:47,583 ----------------------------------------------------------------------------------------------------
2022-06-14 10:58:47,583 Parameters:
2022-06-14 10:58:47,584  - learning_rate: &quot;0.02&quot;
2022-06-14 10:58:47,584  - mini_batch_size: &quot;128&quot;
2022-06-14 10:58:47,584  - patience: &quot;3&quot;
2022-06-14 10:58:47,584  - anneal_factor: &quot;0.5&quot;
2022-06-14 10:58:47,584  - max_epochs: &quot;10&quot;
2022-06-14 10:58:47,584  - shuffle: &quot;True&quot;
2022-06-14 10:58:47,584  - train_with_dev: &quot;False&quot;
2022-06-14 10:58:47,584  - batch_growth_annealing: &quot;False&quot;
2022-06-14 10:58:47,584 ----------------------------------------------------------------------------------------------------
2022-06-14 10:58:47,584 Model training base path: &quot;train/prajjwal1/bert-tiny&quot;
2022-06-14 10:58:47,584 ----------------------------------------------------------------------------------------------------
2022-06-14 10:58:47,584 Device: cuda:0
2022-06-14 10:58:47,584 ----------------------------------------------------------------------------------------------------
2022-06-14 10:58:47,584 Embeddings storage mode: cpu
2022-06-14 10:58:47,585 ----------------------------------------------------------------------------------------------------
2022-06-14 10:59:11,725 epoch 1 - iter 11/110 - loss 0.46690662 - samples/sec: 58.35 - lr: 0.020000
2022-06-14 10:59:36,854 epoch 1 - iter 22/110 - loss 0.35627199 - samples/sec: 56.04 - lr: 0.020000
2022-06-14 10:59:56,318 epoch 1 - iter 33/110 - loss 0.32018351 - samples/sec: 72.35 - lr: 0.020000
2022-06-14 11:00:16,082 epoch 1 - iter 44/110 - loss 0.30274213 - samples/sec: 71.25 - lr: 0.020000
2022-06-14 11:00:35,760 epoch 1 - iter 55/110 - loss 0.28451030 - samples/sec: 71.56 - lr: 0.020000
2022-06-14 11:00:58,241 epoch 1 - iter 66/110 - loss 0.26581275 - samples/sec: 62.64 - lr: 0.020000
2022-06-14 11:01:24,133 epoch 1 - iter 77/110 - loss 0.25145255 - samples/sec: 54.39 - lr: 0.020000
2022-06-14 11:01:48,914 epoch 1 - iter 88/110 - loss 0.24174765 - samples/sec: 56.82 - lr: 0.020000
2022-06-14 11:02:15,320 epoch 1 - iter 99/110 - loss 0.23233378 - samples/sec: 53.33 - lr: 0.020000
2022-06-14 11:02:40,455 epoch 1 - iter 110/110 - loss 0.22324374 - samples/sec: 56.03 - lr: 0.020000
2022-06-14 11:02:40,455 ----------------------------------------------------------------------------------------------------
2022-06-14 11:02:40,456 EPOCH 1 done: loss 0.2232 - lr 0.0200000
2022-06-14 11:04:15,844 DEV : loss 0.08416544854674485 - f1-score (micro avg)  0.1417
2022-06-14 11:04:15,876 BAD EPOCHS (no improvement): 0
2022-06-14 11:04:15,922 saving best model
..............
..............
..............

2022-06-14 11:48:43,609 epoch 10 - iter 11/110 - loss 0.05611527 - samples/sec: 61.04 - lr: 0.020000
2022-06-14 11:49:06,084 epoch 10 - iter 22/110 - loss 0.05563375 - samples/sec: 62.66 - lr: 0.020000
2022-06-14 11:49:29,709 epoch 10 - iter 33/110 - loss 0.05567900 - samples/sec: 59.61 - lr: 0.020000
2022-06-14 11:49:52,993 epoch 10 - iter 44/110 - loss 0.05584901 - samples/sec: 60.48 - lr: 0.020000
2022-06-14 11:50:16,497 epoch 10 - iter 55/110 - loss 0.05558204 - samples/sec: 59.91 - lr: 0.020000
2022-06-14 11:50:39,222 epoch 10 - iter 66/110 - loss 0.05536536 - samples/sec: 61.97 - lr: 0.020000
2022-06-14 11:51:03,463 epoch 10 - iter 77/110 - loss 0.05519602 - samples/sec: 58.09 - lr: 0.020000
2022-06-14 11:51:27,246 epoch 10 - iter 88/110 - loss 0.05550491 - samples/sec: 59.21 - lr: 0.020000
2022-06-14 11:51:50,920 epoch 10 - iter 99/110 - loss 0.05559963 - samples/sec: 59.48 - lr: 0.020000
2022-06-14 11:52:13,645 epoch 10 - iter 110/110 - loss 0.05556217 - samples/sec: 61.97 - lr: 0.020000
2022-06-14 11:52:13,646 ----------------------------------------------------------------------------------------------------
2022-06-14 11:52:13,646 EPOCH 10 done: loss 0.0556 - lr 0.0200000
2022-06-14 11:53:51,555 DEV : loss 0.03640907264452083 - f1-score (micro avg)  0.7614
2022-06-14 11:53:51,587 BAD EPOCHS (no improvement): 0
2022-06-14 11:53:51,634 saving best model
2022-06-14 11:53:51,725 ----------------------------------------------------------------------------------------------------
2022-06-14 11:53:51,726 loading file train/prajjwal1/bert-tiny/best-model.pt
2022-06-14 11:53:54,423 No model_max_length in Tokenizer's config.json - setting it to 512. Specify desired model_max_length by passing it as attribute to embedding instance.
2022-06-14 11:55:30,534 0.7138	0.7305	0.7221	0.6166
2022-06-14 11:55:30,534 
Results:
- F-score (micro) 0.7221
- F-score (macro) 0.5625
- Accuracy 0.6166

By class:
            precision    recall  f1-score   support

        PER     0.7186    0.8751    0.7892      1617
        LOC     0.7645    0.8118    0.7874      1668
        ORG     0.6902    0.5527    0.6138      1661
        MISC    0.6192    0.6254    0.6223       702
     &lt;STOP&gt;     0.0000    0.0000    0.0000         0

  micro avg     0.7138    0.7305    0.7221      5648
  macro avg     0.5585    0.5730    0.5625      5648
weighted avg    0.7115    0.7305    0.7164      5648
samples avg     0.6166    0.6166    0.6166      5648

</code></pre>
</li>
<li>
<p>Run the following command to execute walker <code>predict_flair</code> for predicting entities.</p>
<pre><code>walker run predict_flair -ctx &quot;{\&quot;text\&quot;:\&quot;Two goals from defensive errors in the last six minutes allowed Japan to come from behind and collect all three points from their opening meeting against Syria\&quot;}&quot;
</code></pre>
<p>After executing walker <code>predict_flair</code> will get output e.g.</p>
<pre><code>[
    {
        &quot;entities&quot;: [
            {
                &quot;entity_text&quot;: &quot;Japan&quot;,
                &quot;entity_value&quot;: &quot;LOC&quot;,
                &quot;conf_score&quot;: 0.9944729208946228,
                &quot;start_pos&quot;: 64,
                &quot;end_pos&quot;: 69
            },
            {
                &quot;entity_text&quot;: &quot;Syria&quot;,
                &quot;entity_value&quot;: &quot;LOC&quot;,
                &quot;conf_score&quot;: 0.9952408075332642,
                &quot;start_pos&quot;: 154,
                &quot;end_pos&quot;: 159
            }
        ]
    }
]
</code></pre>
</li>
</ol>
</li>
</ul>
<h2 id="experiment-and-methodology"><a class="header" href="#experiment-and-methodology"><strong>Experiment and methodology</strong></a></h2>
<ul>
<li>
<p><strong>Zero-Shot entity detection</strong></p>
<p>Let us further look our <code>zero-shot entity</code> detection on <a href="https://ningding97.github.io/fewnerd/">Few-Nerd Dataset</a>, Few-NERD is a large-scale, fine-grained manually annotated named entity recognition dataset, which contains <code>8 coarse-grained(Major)</code> types, <code>66 fine-grained(All)</code> labels types. Three benchmark tasks are built, one is supervised (Few-NERD (SUP)) and the other two are few-shot (Few-NERD (INTRA) and Few-NERD (INTER)).</p>
<h3 id="dataset-details"><a class="header" href="#dataset-details"><strong>Dataset details</strong></a></h3>
<p>| Dataset Name                   | train dataset             | validation dataset         | test dataset          |
|--------------------------------|---------------------------|----------------------------|-----------------------|
| FEW-NERD (SUP)                 | 131767                    | 18824                      | 37648                 |</p>
<p>For zero-shot entity-detection we are using flair <strong>tars-ner</strong> model.</p>
<p><strong>Results</strong></p>
<h2 id="zero-shot-performance-on-few-nerdinter-test-dataset"><a class="header" href="#zero-shot-performance-on-few-nerdinter-test-dataset">Zero-shot performance on FEW-NERD(INTER) test Dataset.</a></h2>
<p>| Labels          | Accuracy        | F1_Score     |
|-----------------|-----------------|--------------|
| All             | 0.32053081      | 0.305329825  |
| Major           | 0.475163372	    | 0.447818008  |</p>
<h2 id="zero-shot-performance-on-few-nerdintra-test-dataset"><a class="header" href="#zero-shot-performance-on-few-nerdintra-test-dataset">Zero-shot performance on FEW-NERD(INTRA) test Dataset.</a></h2>
<p>| Labels          | Accuracy         | F1_Score     |
|-----------------|------------------|--------------|
| All             | 0.143001171      | 0.171142318  |
| Major           | 0.540210805	     | 0.462717092  |</p>
<h2 id="zero-shot-performance-on-few-nerdsup-test-dataset"><a class="header" href="#zero-shot-performance-on-few-nerdsup-test-dataset">Zero-shot performance on FEW-NERD(SUP) test Dataset.</a></h2>
<p>| Labels          | Accuracy         | F1_Score     |
|-----------------|------------------|--------------|
| All             | 0.105859864      | 0.128166615  |
| Major           | 0.475106014	     | 0.431429256  |</p>
<p>From this results we will get following insight, if we have number of labels is less, we will get higher accuracy and f1_score.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="entity-extraction-using-transformers-tfm_ner"><a class="header" href="#entity-extraction-using-transformers-tfm_ner">Entity Extraction Using Transformers (<code>tfm_ner</code>)</a></h1>
<p><strong>What is NER:</strong> named entity recognition (NER) — sometimes referred to as entity chunking, extraction, or identification — is the task of identifying and categorizing key information (entities) in text. An entity can be any word or series of words that consistently refers to the same thing. Every detected entity is classified into a predetermined category.</p>
<p><strong><code>tfm_ner</code></strong>: module based on transformers to identify and extract entities. It uses TokenClassification method from Huggingface.</p>
<p>This tutorial show you how to train test and validate <strong>tfm_ner</strong> module.</p>
<h1 id="transformer-ner"><a class="header" href="#transformer-ner">Transformer NER</a></h1>
<ol>
<li>Preparing <a href="jaseci_kit/modules/entity_utils/tfm_ner/index.html#1-preparing-dataset">Dataset</a></li>
<li>Import <a href="jaseci_kit/modules/entity_utils/tfm_ner/index.html#2-import-tfm_ner-module-in-jaseci">tfm_ner</a> module</li>
<li>Model <a href="jaseci_kit/modules/entity_utils/tfm_ner/index.html#3-model-training-and-validation">training and validation</a></li>
<li><a href="jaseci_kit/modules/entity_utils/tfm_ner/index.html#4-predicting-entities">Predicting entities</a></li>
<li><a href="jaseci_kit/modules/entity_utils/tfm_ner/index.html#5-experiments-and-methodology">Experiments and methodology</a></li>
</ol>
<h2 id="1-preparing-dataset"><a class="header" href="#1-preparing-dataset"><strong>1. Preparing Dataset</strong></a></h2>
<p>For train, test and validation dataset, we are going to creating list of dict and storing in json file by name <code>train.json</code>, <code>validation.json</code> and <code>test.json</code> for demonstration perpose we are using here <a href="https://huggingface.co/datasets/conll2003">conll2003 dataset</a> and storing dataset file in directory name <code>dataset</code> and put all required file in this directory.</p>
<p><strong>Example Dataset file <code>data format</code></strong></p>
<ul>
<li>
<p><strong><code>train_data</code>:</strong>: (List(Dict)): a list dictionary containing contexts and list of entities in each context.</p>
<pre><code>[{
    &quot;context&quot;: &quot;However a loophole in the law allowed Buddharakkita and Jayewardene evade the death penalty as the Capital Punishment Repeal Act allowed for a sentence of death to a person convicted for murder committed prior to December 2 1959 and not for the offence of conspiracy to commit murder&quot;,
    &quot;entities&quot;: [
        {
            &quot;entity_value&quot;: &quot;Buddharakkita&quot;,
            &quot;entity_type&quot;: &quot;person&quot;,
            &quot;start_index&quot;: 38,
            &quot;end_index&quot;: 51
        },
        {
            &quot;entity_value&quot;: &quot;Jayewardene&quot;,
            &quot;entity_type&quot;: &quot;person&quot;,
            &quot;start_index&quot;: 56,
            &quot;end_index&quot;: 67
        },
        {
            &quot;entity_value&quot;: &quot;Capital Punishment Repeal Act&quot;,
            &quot;entity_type&quot;: &quot;event&quot;,
            &quot;start_index&quot;: 99,
            &quot;end_index&quot;: 128
        }
    ]
    }
]
</code></pre>
</li>
<li>
<p><strong><code>val_data</code>:</strong> (List(Dict)): a list dictionary containing contexts and list of entities in each context</p>
<pre><code>[
    {
        &quot;context&quot;: &quot;The Stavros Niarchos Foundation Cultural Center inaugurated in 2016 will house the National Library of Greece and the Greek National Opera&quot;,
        &quot;entities&quot;: [
            {
                &quot;entity_value&quot;: &quot;Stavros Niarchos Foundation Cultural Center&quot;,
                &quot;entity_type&quot;: &quot;building&quot;,
                &quot;start_index&quot;: 4,
                &quot;end_index&quot;: 47
            },
            {
                &quot;entity_value&quot;: &quot;National Library of Greece&quot;,
                &quot;entity_type&quot;: &quot;building&quot;,
                &quot;start_index&quot;: 83,
                &quot;end_index&quot;: 109
            },
            {
                &quot;entity_value&quot;: &quot;Greek National Opera&quot;,
                &quot;entity_type&quot;: &quot;building&quot;,
                &quot;start_index&quot;: 118,
                &quot;end_index&quot;: 138
            }
        ]
    }
]
</code></pre>
</li>
<li>
<p><strong><code>test_data</code>:</strong> (List(Dict)): a list dictionary containing contexts and list of entities in each context</p>
<pre><code>[
    {
        &quot;context&quot;: &quot;The project proponents told the Australian Financial Review in December that year that they had been able to demonstrate that the market for backpacker tourism was less affected by these events and that they intended to apply for an air operator 's certificate in January 2004&quot;,
        &quot;entities&quot;: [
            {
                &quot;entity_value&quot;: &quot;Australian Financial Review&quot;,
                &quot;entity_type&quot;: &quot;organization&quot;,
                &quot;start_index&quot;: 32,
                &quot;end_index&quot;: 59
            }
        ]
    }
]
</code></pre>
</li>
</ul>
<h2 id="2-import-tfm_ner-module-in-jaseci"><a class="header" href="#2-import-tfm_ner-module-in-jaseci"><strong>2. Import <code>tfm_ner</code> module in jaseci</strong></a></h2>
<ol>
<li>Open terminal and run jaseci by cmd
<pre><code>jsctl -m
</code></pre>
</li>
<li>Load module tfm_ner in jac by cmd
<pre><code>actions load module jaseci_kit.tfm_ner
</code></pre>
</li>
</ol>
<h2 id="3-model-training-and-validation"><a class="header" href="#3-model-training-and-validation"><strong>3. Model training and validation</strong></a></h2>
<p>For this tutorial we are going to train the model on train dataset and validate the model on validation dataset and finaly we test model on the test dataset.</p>
<p><strong>1. Creating Jac Program</strong></p>
<ol>
<li>
<p><code>Create a file (main.jac)</code></p>
</li>
<li>
<p>Create node <code>model_dir</code> and  <code>tfm_ner</code> in <code>main.jac</code></p>
<pre><code>node model_dir;
node tfm_ner {}
</code></pre>
</li>
<li>
<p>Initializing <code>node tfm_ner</code> and adding abilty:- <code>train</code>, <code>infer</code></p>
<p>Here we are importing ability to train and infer model.</p>
<pre><code>node tfm_ner {
    # train, infer
    can tfm_ner.train, tfm_ner.extract_entity, tfm_ner.load_model, tfm_ner.save_model, tfm_ner.get_train_config, tfm_ner.set_train_config;
}

</code></pre>
</li>
<li>
<p>Initializing module for <code>train and validation</code> inside <code>node tfm_ner</code>
In this step we are initializing <code>training</code> and <code>validation</code> of tfm_ner model. It will take 5 parameter train, test, val (file contain <code>list of dict</code>) and mode and epochs</p>
<pre><code># train and validation model 
can train_and_val with train_and_val_tfm entry {
    train_data = file.load_json(visitor.train_file);
    val_data = file.load_json(visitor.val_file);
    test_data = file.load_json(visitor.test_file);
    std.out(&quot;corpus : &quot;,train_data.length,&quot; train + &quot;,val_data.length,&quot; val +&quot;,test_data.length,&quot; test sentences&quot;);
    tfm_ner.train(
        mode = visitor.mode,
        epochs = visitor.num_train_epochs.int,
        train_data = train_data,
        dev_data = val_data,
        test_data = test_data
        );
    std.out(&quot;training and validation done &quot;);
    }
</code></pre>
</li>
<li>
<p>Adding module for <code>infer entity</code> inside node <code>tfm_ner</code></p>
<p><code>Infer</code> module will take text input and return entities list.</p>
<pre><code># infer entity from text
can infer with predict_entity_from_tfm entry {
    report tfm_ner.extract_entity(
        text = visitor.text
    );
}
</code></pre>
</li>
<li>
<p>Adding <code>edge</code> name of  <code>ner_model</code> in <code>main.jac</code> file for connecting nodes inside graph.</p>
<pre><code># adding edge
edge ner_model {
    has model_type;
}
</code></pre>
</li>
<li>
<p>Adding <code>graph</code> name of <code>ner_val_graph</code> for initializing node . </p>
<pre><code># Adding Graph
graph ner_val_graph {
    has anchor ner_model_dir;
    spawn {
        ner_model_dir = spawn node::model_dir;
        tfm_ner_node = spawn node::tfm_ner;
        ner_model_dir -[ner_model(model_type=&quot;tfm_ner&quot;)]-&gt; tfm_ner_node;
    }
}
</code></pre>
</li>
<li>
<p>Initializing <code>walker init</code> for calling graph</p>
<pre><code>walker init {
    root {
    spawn here --&gt; graph::ner_val_graph; 
    }
}
</code></pre>
</li>
<li>
<p>Creating <code>walker</code> name of <code>train_and_val_tfm</code> for getting parameter from context and calling ability <code>training and validation</code> model.</p>
<pre><code># creating walker 
walker train_and_val_tfm {
    has train_file;
    has val_file;
    has test_file;
    has num_train_epochs;
    has mode;

    # Train NER models on the train set
    # and validate them on the val set (Optional)
    # and test them on the test set (Optional)

    # report accuracy performance of NER model on inside dir creating on place of current path `main.jac` file &quot;train/logs/&quot;
    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
</li>
<li>
<p>Creating a walker name of <code>predict_entity_from_tfm</code> for getting new text as input from context and infer entities.</p>
<pre><code>walker predict_entity_from_tfm{
    has text;

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
</li>
</ol>
<ul>
<li>
<p><strong>Final jac programm <code>(main.jac)</code></strong></p>
<pre><code>node model_dir;
node tfm_ner {
    # train,infer
    can tfm_ner.extract_entity, tfm_ner.train;

    # extracting entities
    can infer with predict_entity_from_tfm entry {
        report tfm_ner.extract_entity(
            text = visitor.text
        );
    }

    ## train and validate
    can train_and_val with train_and_val_tfm entry {

        train_data = file.load_json(visitor.train_file);
        val_data = file.load_json(visitor.val_file);
        test_data = file.load_json(visitor.test_file);
        std.out(&quot;corpus : &quot;,train_data.length,&quot; train + &quot;,val_data.length,&quot; dev +&quot;,test_data.length,&quot; test sentences&quot;);
        tfm_ner.train(
            mode = visitor.mode,
            epochs = visitor.num_train_epochs.int,
            train_data = train_data,
            dev_data = val_data,
            test_data = test_data
            );
        std.out(&quot;training and validation done &quot;);
        }
}


edge ner_model {
    has model_type;
}

graph ner_val_graph {
    has anchor ner_model_dir;
    spawn {
        ner_model_dir = spawn node::model_dir;
        tfm_ner_node = spawn node::tfm_ner;
        ner_model_dir -[ner_model(model_type=&quot;tfm_ner&quot;)]-&gt; tfm_ner_node;
    }
}


walker init {
    root {
    spawn here --&gt; graph::ner_val_graph; 
    }
}

## creating walker 
walker train_and_val_tfm {
    has train_file;
    has val_file;
    has test_file;
    has num_train_epochs;
    has mode;

    # Train all NER models on the train set
    # and validate them on the val set
    # report accuracy performance across all NER models
    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}

walker predict_entity_from_tfm{
    has text;

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}

</code></pre>
</li>
</ul>
<p><strong>2. Steps for running <code>main.jac</code> file</strong> and <code>train</code> and <code>validate</code> tfm_ner model</p>
<ol>
<li>
<p>Build main.jac by run:</p>
<pre><code>jac build main.jac
</code></pre>
</li>
<li>
<p>Run the following command to Activate sentinal:</p>
<pre><code>sentinel set -snt active:sentinel -mode ir main.jir
</code></pre>
</li>
<li>
<p>Create <code>Training Input</code></p>
<ul>
<li><code>mode</code>: (String): mode for training the model, available options are :
* <code>default</code>: train the model from scratch.
* <code>incremental</code>: providing more training data for current set of entities.
* <code>append</code>: changing the number of entities (model is restarted and trained with all of traindata).</li>
<li><code>epochs </code>: (int): Number of epoch you want model to train.</li>
<li><code>train_file</code>: <code>list[dict]</code> train data file name.</li>
<li><code>val_file</code>: <code>list[dict]</code> validation data file name.</li>
<li><code>test_file</code>: <code>list[dict]</code> test data file name.</li>
</ul>
</li>
<li>
<p>Run the following command to execute walker <code>train_and_val_tfm</code></p>
<pre><code>walker run train_and_val_tfm -ctx &quot;{\&quot;train_file\&quot;:\&quot;dataset/train.json\&quot;,\&quot;val_file\&quot;:\&quot;dataset/dev.json\&quot;,\&quot;test_file\&quot;:\&quot;dataset/test.json\&quot;,\&quot;num_train_epochs\&quot;:\&quot;50\&quot;,\&quot;mode\&quot;:\&quot;default\&quot;}&quot;
</code></pre>
</li>
<li>
<p>You'll find the following logs in <code>train</code> folder.</p>
<pre><code>2022-06-06 11:23:46.832007    Training epoch: 1/50
2022-06-06 11:23:46.847969    Training loss per 100 training steps: 0.9243220090866089
2022-06-06 11:23:47.186904    Training loss epoch: 0.8817697350795453
2022-06-06 11:23:47.191905    Training accuracy epoch: 0.11538461538461539
2022-06-06 11:23:47.330845    Validation loss epoch: 0.7973677378434402
2022-06-06 11:23:47.336076    Validation accuracy epoch: 0.038461538461538464
2022-06-06 11:23:47.442199    Epoch 1 total time taken : 0:00:00.610192
2022-06-06 11:23:47.448885    ------------------------------------------------------------
2022-06-06 11:23:47.456886    Training epoch: 2/50
2022-06-06 11:23:47.474848    Training loss per 100 training steps: 0.8383979797363281
2022-06-06 11:23:47.814906    Training loss epoch: 0.7714704366830679
2022-06-06 11:23:47.820939    Training accuracy epoch: 0.023076923076923078
2022-06-06 11:23:47.969910    Validation loss epoch: 0.70741940003175
2022-06-06 11:23:47.976287    Validation accuracy epoch: 0.0
2022-06-06 11:23:48.075297    Epoch 2 total time taken : 0:00:00.618411
2022-06-06 11:23:48.081293    ------------------------------------------------------------
............
............
............
2022-06-01 07:07:56.382809     Training epoch: 50/50
2022-06-01 07:08:22.558677     Training loss epoch: 0.06641783774011399
2022-06-01 07:08:22.558712     Training accuracy epoch: 0.9109369783381449
2022-06-01 07:08:22.558778     evaluation loss epoch: 0.16095292149111629
2022-06-01 07:08:22.558790     evaluation accuracy epoch: 0.8269142243363511
2022-06-01 07:08:22.647852     Epoch 50 total time taken : 0:00:26.265050
2022-06-01 07:08:22.647874     ------------------------------------------------------------
2022-06-01 07:08:22.797730     Model Training is Completed
2022-06-01 07:08:22.797769     ------------------------------------------------------------
2022-06-01 07:08:22.797779     Total time taken to completed training :  0:22:06.770898
2022-06-01 07:08:22.797795     ------------------------------------------------------------
2022-06-01 07:08:22.797807     Model testing is started
2022-06-01 07:08:22.797819     ------------------------------------------------------------
2022-06-01 07:08:27.092534     f1_score(macro) : 0.6822521889259535
2022-06-01 07:08:27.092573     Accuracy : 0.7892490767336889 
2022-06-01 07:08:27.092581     Classification Report
2022-06-01 07:08:27.092584     ------------------------------------------------------------
            precision    recall  f1-score   support

        O       0.00      0.00      0.00         0
    I-PER       0.91      0.90      0.91      2496
    I-ORG       0.82      0.68      0.74      1018
    I-MISC      0.84      0.54      0.66       236
    I-LOC       0.66      0.64      0.65       252
    B-PER       0.84      0.85      0.85      2714
    B-ORG       0.83      0.71      0.77      2513
    B-MISC      0.82      0.64      0.72       991
    B-LOC       0.85      0.84      0.85      1965

 accuracy                           0.79     12185
macro avg       0.73      0.65      0.68     12185
weighted avg    0.85      0.79      0.82     12185

2022-06-01 07:08:27.092694     ------------------------------------------------------------
2022-06-01 07:08:27.092707     Total time taken to completed testing :  0:00:04.294899
2022-06-01 07:08:27.092722     ------------------------------------------------------------ 

</code></pre>
</li>
</ol>
<h2 id="4-predicting-entities"><a class="header" href="#4-predicting-entities"><strong>4. Predicting Entities</strong></a></h2>
<ul>
<li>
<p>For predicting entities we are going execute walker <code>predict_entity_from_tfm</code> and provide text input in context and will get output <code>list of entities</code> available in text-data.
Run the following command to execute walker <code>predict_entity_from_tfm</code></p>
<pre><code>walker run predict_entity_from_tfm -ctx &quot;{\&quot;text\&quot;:\&quot;It was the second costly blunder by Syria in four minute\&quot;}&quot;
</code></pre>
</li>
<li>
<p>After executing walker <code>predict_entity_from_tfm</code> , will get <code>predicted entities</code> list as</p>
<pre><code>[
    {
        &quot;entity_value&quot;: &quot;syria&quot;,
        &quot;entity_type&quot;: &quot;B-LOC&quot;,
        &quot;score&quot;: 0.8613966703414917,
        &quot;start_index&quot;: 36,
        &quot;end_index&quot;: 41
    }
]
</code></pre>
</li>
</ul>
<h1 id="5-experiments-and-methodology"><a class="header" href="#5-experiments-and-methodology"><strong>5. Experiments and methodology</strong></a></h1>
<p>Let us further look into our model training and evaluation methodology</p>
<h2 id="evaluation-of-tfm_ner-with-tiny-bert-and-bert"><a class="header" href="#evaluation-of-tfm_ner-with-tiny-bert-and-bert"><strong>Evaluation of tfm_ner with <code>tiny-bert</code> and <code>bert</code></strong></a></h2>
<p>We are evaluating <code>tiny-bert</code> and <code>bert-base-uncased</code> model on following datasets.</p>
<h2 id="dataset-description"><a class="header" href="#dataset-description"><strong>Dataset description</strong></a></h2>
<p>We are using two different dataset.</p>
<p><strong>1. CONLL2003 <a href="https://huggingface.co/datasets/conll2003">dataset</a></strong> is a named entity recognition dataset released as a part of CoNLL-2003 shared task. CoNLL-2003 dataset have <strong>4 labels</strong>(PER, ORG, LOC, MISC).</p>
<p><strong>2. FEW-NERD <a href="https://ningding97.github.io/fewnerd/">dataset</a></strong> is a large-scale, fine-grained manually annotated named entity recognition dataset, which contains <code>8 coarse-grained(Major)</code> types, <code>66 fine-grained(All)</code> types labels.</p>
<h3 id="dataset-details-1"><a class="header" href="#dataset-details-1"><strong>Dataset details</strong></a></h3>
<div class="table-wrapper"><table><thead><tr><th>Dataset Name</th><th>train dataset</th><th>validation dataset</th><th>test dataset</th></tr></thead><tbody>
<tr><td>Conll2003</td><td>14,041</td><td>3,250</td><td>3,453</td></tr>
<tr><td>FEW-NERD (SUP)</td><td>131,767</td><td>18,824</td><td>37,648</td></tr>
</tbody></table>
</div>
<h2 id="training-methodology"><a class="header" href="#training-methodology"><strong>Training methodology</strong></a></h2>
<p>For training model we are using pytorch model from huggingface for token classification .</p>
<ul>
<li>
<p><strong>Default training parameter are following</strong>.</p>
<pre><code>&quot;MAX_LEN&quot;: 128,
&quot;TRAIN_BATCH_SIZE&quot;: 64,
&quot;VALID_BATCH_SIZE&quot;: 32,
&quot;EPOCHS&quot;: 50,
&quot;LEARNING_RATE&quot;: 2e-05,
&quot;MAX_GRAD_NORM&quot;: 10,
&quot;MODE&quot;: &quot;default&quot;
</code></pre>
<h3 id="machine-description-for-training-model"><a class="header" href="#machine-description-for-training-model"><strong><code>Machine</code> description for training model</strong></a></h3>
<ul>
<li><strong>RAM</strong> : <strong><code>32GB</code></strong></li>
<li><strong>GPU</strong> : <strong><code>TESLA T4</code></strong></li>
<li><strong>Memory GPU</strong> : <strong><code>16GB</code></strong></li>
</ul>
<h3 id="results"><a class="header" href="#results"><strong>Results</strong></a></h3>
<h3 id="training-on-sample-data-from-few-nerdsup-dataset-on-major-labels"><a class="header" href="#training-on-sample-data-from-few-nerdsup-dataset-on-major-labels">Training on sample data from <code>FEW-NERD(SUP)</code> Dataset on <code>major labels</code></a></h3>
<p>| Model_Name               | Evaluation_Accuracy  | Test_Accuracy   | Test F1_Score       |Time Taken(avg)  |
|--------------------------|----------------------|-----------------|---------------------|-----------------|
|bert-base-uncased         | 0.6910               | 0.6888	        | 0.6353              | 2HR+20MIN       |
|prajjwal1/bert-tiny       | 0.2184	              | 0.2182          | 0.2090	          | 26MIN           |</p>
<h3 id="training-on-sample-data-from-few-nerdsup-dataset"><a class="header" href="#training-on-sample-data-from-few-nerdsup-dataset">Training on sample data from <code>FEW-NERD(SUP)</code> Dataset</a></h3>
<p>| Model_Name               | Evaluation_Accuracy  | Test_Accuracy   | Test F1_Score       | Time Taken(avg) |
|--------------------------|----------------------|-----------------|---------------------|-----------------|
|bert-base-uncased         | 0.5841               | 0.5830	        | 0.5702              | 3HR+36MIN       |
|prajjwal1/bert-tiny       | 0.1900	              | 0.1894          | 0.0546    	      | 35MIN           |</p>
<h3 id="training-on-conll2003-dataset"><a class="header" href="#training-on-conll2003-dataset">Training on <code>CONLL2003</code> dataset</a></h3>
<p>| Model_Name               | Evaluation_Accuracy  | Test_Accuracy   | Test F1_Score       | Time Taken(avg) |
|--------------------------|----------------------|-----------------|---------------------|-----------------|
|bert-base-uncased         | 0.9585               | 0.9859	        | 0.8100              | 3HR+45MIN       |
|prajjwal1/bert-tiny       | 0.8269	              | 0.7892          | 0.6823              | 35MIN           |</p>
<p>After comparing these results we will get the insight from this</p>
<ul>
<li>
<p><strong>Number of labels upto 4</strong></p>
<ul>
<li>We prefare training time, we need to go with small model e.g. <code>tiny-bert</code></li>
<li>We are focussing higher accuracy result, we need to go with bigger model e.g. <code>bert-base-uncased</code></li>
</ul>
</li>
<li>
<p><strong>Number of labels greater then 4</strong></p>
<ul>
<li>We need to go with bigger model so we will get higher <code>accuracy</code> and <code>f1-score</code> e.g. <code>bert-base-uncased</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="text-summarization"><a class="header" href="#text-summarization">Text Summarization</a></h1>
<p>Text summarization consists of condensing or creating a shorter version of an initial text while preserving the key meaning of the text. Text summarization may be used in text classification, headline generation, question answering, etc. Jaseci provides the following text summarization engines:</p>
<h2 id="summarization-models"><a class="header" href="#summarization-models">Summarization Models</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><a href="jaseci_kit/modules/summarization/cl_summer/README.html"><code>cl_summer</code></a></td><td>Summarizer</td><td>No Training req.</td><td>Ready</td><td>Extractive Summarization using Sumy</td><td><a href="jaseci_kit/modules/summarization/cl_summer/README.html">Documenatation</a> <a href="https://miso-belica.github.io/sumy/">Doc.</a></td></tr>
<tr><td><a href="jaseci_kit/modules/summarization/t5_sum/README.html"><code>t5_sum</code></a></td><td>Summarizer</td><td>No Training req.</td><td>Ready</td><td>Abstractive Summarization using the T5 Model</td><td><a href="jaseci_kit/modules/summarization/t5_sum/README.html">Documentation</a> <a href="https://huggingface.co/docs/transformers/model_doc/t5">Doc.</a>, <a href="https://arxiv.org/pdf/1910.10683.pdf">Paper</a></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="summarizer-cl_summer"><a class="header" href="#summarizer-cl_summer"><strong>Summarizer (<code>cl_summer</code>)</strong></a></h1>
<p>Module <code>cl_summer</code> uses the <code>sumy summarizer</code> to extract summary from text.</p>
<ol>
<li>Import <a href="jaseci_kit/modules/summarization/cl_summer/index.html#1-import-summarizer-cl_summer-module-in-jac"><code>cl_summer</code></a> module in jac</li>
<li><a href="jaseci_kit/modules/summarization/cl_summer/index.html#2-summarizer">Summarizer</a></li>
</ol>
<h1 id="walk-through-2"><a class="header" href="#walk-through-2"><strong>Walk through</strong></a></h1>
<h2 id="1-import-summarizer-cl_summer-module-in-jac"><a class="header" href="#1-import-summarizer-cl_summer-module-in-jac"><strong>1. Import Summarizer (<code>cl_summer</code>) module in jac</strong></a></h2>
<ol>
<li>For executing jaseci Open terminal and run follow command.
<pre><code>jsctl -m
</code></pre>
</li>
<li>Load cl_summer module in jac by command
<pre><code>actions load module jaseci_kit.cl_summer
</code></pre>
</li>
</ol>
<h2 id="2-summarizer"><a class="header" href="#2-summarizer"><strong>2. Summarizer</strong></a></h2>
<p>For this tutorial, we are going to leverage the <strong>Summarizer</strong> (<code>cl_summer</code>) which would help us to generate summary of the provided text.</p>
<ul>
<li>
<p>Creating Jac Program for <strong>summarizer</strong> (<code>cl_summer</code>)</p>
<ol>
<li>
<p>Create a file by name summarizer.jac</p>
</li>
<li>
<p>Create node model_dir and <code>summarizer</code> in <code>summarizer.jac</code> file.</p>
<pre><code>node model_dir;
node summarizer{};
</code></pre>
</li>
<li>
<p>Initializing node <code>summarizer</code> and import <code>cl_summer.summarize</code> ability inside node <code>summarizer</code>.</p>
<pre><code># import ability
can cl_summer.summarize;
</code></pre>
</li>
<li>
<p>Initialize module <code>summarize</code> inside <code>summarizer</code> node.</p>
<pre><code class="language-python"># summarizer
can summarize with summarizer entry{
    data = file.load_json(visitor.data);
    
    report cl_summer.summarize(
        text = data[&quot;text&quot;],
        url = data[&quot;url&quot;],
        sent_count = data[&quot;sent_count&quot;],
        summarizer_type = data[&quot;summarizer_type&quot;]
        );      
}
</code></pre>
<p><code>summarize</code>: to get the extractive summary of the text in the given number of sentence counts .</p>
<p><strong>Parameter details</strong></p>
<ul>
<li>
<p><strong>Input Data</strong></p>
<p><strong>data.json</strong> file</p>
<pre><code>{
    &quot;text&quot;: &quot;There was once a king of Scotland whose name was Robert Bruce. He needed to be both brave and wise because the times in which he lived were wild and   rude. The King of England was at war with him and had led a great army into Scotland to drive him out of the land. Battle after battle had been fought. Six times Bruce had led his brave little army against his foes and six times his men had been beaten and driven into flight. At last his army was scattered, and he was forced to hide in the woods and in lonely places among the mountains. One rainy day, Bruce lay on the ground under a crude shed listening to the patter of the drops on the roof above him. He was tired and unhappy. He was ready to give up all hope. It seemed to him that there was no use for him to try to do anything more. As he lay thinking, he saw a spider over his head making ready to weave her web. He watched her as she toiled slowly and with great care. Six times she tried to throw her frail thread from one beam to another, and six times it fell short. 'Poor thing,' said Bruce: 'you, too, know what it is to fail.', But the spider did not lose hope with the sixth failure. With still more care, she made ready to try for the seventh time. Bruce almost forgot his own troubles as, he watched her swing herself out upon the slender line. Would she fail again? No! The thread was carried safely to the beam and fastened there.&quot;,
    &quot;url&quot;: &quot;none&quot;,
    &quot;sent_count&quot;: 5,
    &quot;summarizer_type&quot;: &quot;LsaSummarizer&quot;
}
</code></pre>
<ul>
<li><code>text(String)</code>: text the contain the entire context</li>
<li><code>url(String)</code>: the link to the webpage</li>
<li><code>sent_count(int)</code>: number of sentence you want in the summary</li>
<li><code>summarizer_type(String)</code>: name of the summarizer type, available options are:
<ul>
<li>LsaSummarizer</li>
<li>LexRankSummarizer</li>
<li>LuhnSummarizer</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Output</strong>
List of Sentences that best summarizes the context</p>
</li>
</ul>
</li>
<li>
<p>Adding edge name of <code>summ_model</code> in <code>summarizer.jac</code> file for connecting nodes inside graph.</p>
<pre><code># adding edge
edge summ_model {
    has model_type;
}
</code></pre>
</li>
<li>
<p>Adding graph name of <code>summ_graph</code> for initializing node.</p>
<pre><code class="language-python"># adding graph
graph summ_graph {
    has anchor summ_model_dir;
    spawn {
        summ_model_dir = spawn node::model_dir;
        summarizer_node = spawn node::summarizer;
        summ_model_dir -[summ_model(model_type=&quot;summarizer&quot;)]-&gt; summarizer_node;
    }
}
</code></pre>
</li>
<li>
<p>Initializing walker init for calling graph.</p>
<pre><code>walker init {
    root {
    spawn here --&gt; graph::summ_graph; 
    }
}
</code></pre>
</li>
<li>
<p>Creating walker name of <code>summarizer</code> for getting parameter from context or default and calling ability <code>summarize</code>.</p>
<pre><code class="language-python"># declaring walker for summerize text
walker summarizer{
    has data=&quot;data.json&quot;;

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
<p><strong>Final summarizer.jac program</strong></p>
<pre><code class="language-python">node model_dir;
node summarizer{
    # import ability
    can cl_summer.summarize;

    # summarizer
    can summarize with summarizer entry{
        data = file.load_json(visitor.data);
        
        report cl_summer.summarize(
            text = data[&quot;text&quot;],
            url = data[&quot;url&quot;],
            sent_count = data[&quot;sent_count&quot;],
            summarizer_type = data[&quot;summarizer_type&quot;]
            );      
    }
}

# adding edge
edge summ_model {
    has model_type;
}

# adding graph
graph summ_graph {
    has anchor summ_model_dir;
    spawn {
        summ_model_dir = spawn node::model_dir;
        summarizer_node = spawn node::summarizer;
        summ_model_dir -[summ_model(model_type=&quot;summarizer&quot;)]-&gt; summarizer_node;
    }
}

# declaring init walker
walker init {
    root {
    spawn here --&gt; graph::summ_graph; 
    }
}

# declaring walker for summerize text
walker summarizer{
    has data=&quot;data.json&quot;;

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}    
</code></pre>
</li>
</ol>
<ul>
<li>
<p><strong>Steps for running <code>summarizer.jac</code> program</strong></p>
<ul>
<li>
<p>Execute the follow command for Build <code>summarizer.jac</code></p>
<pre><code>jac build summarizer.jac
</code></pre>
</li>
<li>
<p>Execute the follow command to Activate sentinal</p>
<pre><code>sentinel set -snt active:sentinel -mode ir summarizer.jir
</code></pre>
</li>
<li>
<p>Execute the walker <code>summarizer</code> with default parameter for <code>summarizer(cl_summer)</code> module by following command</p>
<pre><code>walker run summarizer
</code></pre>
</li>
<li>
<p>After executing walker <code>summarizer</code> result data will show on console.</p>
<p><strong>Result</strong></p>
<pre><code> &quot;report&quot;: [
            [
            &quot;The King of England was at war with him and had led a great army into Scotland to drive him out of the land.&quot;,
            &quot;At last his army was scattered, and he was forced to hide in the woods and in lonely places among the mountains.&quot;,
            &quot;One rainy day, Bruce lay on the ground under a crude shed listening to the patter of the drops on the roof above him.&quot;,
            &quot;As he lay thinking, he saw a spider over his head making ready to weave her web.&quot;,
            &quot;Bruce almost forgot his own troubles as, he watched her swing herself out upon the slender line.&quot;
            ]
        ]
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="summarizationt5_sum"><a class="header" href="#summarizationt5_sum"><strong>Summarization(<code>t5_sum</code>)</strong></a></h1>
<p>Module <code>t5_sum</code> uses the hugging face T5 transformer model to provide abstractive summary from text.</p>
<ol>
<li>Import <a href="jaseci_kit/modules/summarization/t5_sum/index.html#1-import-summarizer-t5_sum-module-in-jac"><code>t5_sum</code></a> module in jac</li>
<li><a href="jaseci_kit/modules/summarization/t5_sum/index.html#2-summarization">Summarization</a></li>
</ol>
<h1 id="walk-through-3"><a class="header" href="#walk-through-3"><strong>Walk through</strong></a></h1>
<h2 id="1-import-summarizer-t5_sum-module-in-jac"><a class="header" href="#1-import-summarizer-t5_sum-module-in-jac"><strong>1. Import Summarizer (<code>t5_sum</code>) module in jac</strong></a></h2>
<ol>
<li>For executing jaseci Open terminal and run follow command.
<pre><code>jsctl -m
</code></pre>
</li>
<li>Load cl_summer module in jac by command
<pre><code>actions load module jaseci_kit.t5_sum
</code></pre>
</li>
</ol>
<h2 id="2-summarization"><a class="header" href="#2-summarization"><strong>2. Summarization</strong></a></h2>
<p>For this tutorial, we are going to leverage the <strong>Summarizer</strong>(<code>t5_sum</code>) which would generate the summary from text. </p>
<ul>
<li>
<p>Creating Jac Program for <strong>summarizer</strong> (<code>t5_sum</code>)</p>
<ol>
<li>
<p>Create a file by name summarizer.jac</p>
</li>
<li>
<p>Create node model_dir and <code>summarizer</code> in <code>summarizer.jac</code> file.</p>
<pre><code>node model_dir;
node summarizer{};
</code></pre>
</li>
<li>
<p>import <code>t5_sum.classify_text</code> ability inside node <code>summarizer</code>.</p>
<pre><code># import ability
can t5_sum.classify_text;
</code></pre>
</li>
<li>
<p>Initialize module <code>summarize</code> inside <code>summarizer</code> node.</p>
<pre><code class="language-python"># summarizer
can summarize with summarizer entry{
    data = file.load_json(visitor.dataset);
    report t5_sum.classify_text(
        text = data[&quot;text&quot;],
        min_length = data[&quot;min_length&quot;],
        max_length = data[&quot;max_length&quot;]
        );
}
</code></pre>
<p><code>classify_text</code>: use the T5 model to summarize a body of text</p>
<p><strong>Parameter details</strong></p>
<ul>
<li>
<p><strong>Input Data</strong>  <strong><code>dataset.json</code></strong> file</p>
<pre><code>{
    &quot;text&quot;: &quot;The US has passed the peak on new coronavirus cases, President Donald Trump said and predicted that some states would reopen this month. The US has over 637,000 confirmed Covid-19 cases and over 30,826 deaths, the highest for any country in the world. At the daily White House coronavirus briefing on Wednesday, Trump said new guidelines to reopen the country would be announced on Thursday after he speaks to governors. We'll be the comeback kids, all of us, he said. We want to get our country back. The Trump administration has  previously fixed May 1 as a possible date to reopen the world's largest economy, but the president said some states may be able to return to normalcy earlier than that.&quot;,
    &quot;min_length&quot;: 30,
    &quot;max_length&quot;: 100
}
</code></pre>
<ul>
<li>
<p><code>text (string)</code>: text to summarize</p>
</li>
<li>
<p><code>min_length (integer):</code> the least amount of words you want returned from the model</p>
</li>
<li>
<p><code>max_length (integer):</code> the most amount of words you want returned from the model</p>
</li>
<li>
<p><strong>Output</strong>
List of Sentences that best summarizes the context</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Adding edge name of <code>summ_model</code> in <code>summarizer.jac</code> file for connecting nodes inside graph.</p>
<pre><code># adding edge
edge summ_model {
    has model_type;
}
</code></pre>
</li>
<li>
<p>Adding graph name of <code>summ_graph</code> for initializing node.</p>
<pre><code class="language-python"># adding graph
graph summ_graph {
    has anchor summ_model_dir;
    spawn {
        summ_model_dir = spawn node::model_dir;
        summarizer_node = spawn node::summarizer;
        summ_model_dir -[summ_model(model_type=&quot;summarizer&quot;)]-&gt; summarizer_node;
    }
}
</code></pre>
</li>
<li>
<p>Initializing walker init for calling graph.</p>
<pre><code>walker init {
    root {
    spawn here --&gt; graph::summ_graph; 
    }
}
</code></pre>
</li>
<li>
<p>Creating walker name of <code>summarizer</code> for getting parameter from context or default and calling ability <code>summarize</code>.</p>
<pre><code class="language-python"># declaring walker for summerize text
walker summarizer{
    has dataset=&quot;dataset.json&quot;;

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
<p><strong>Final get_seg.jac program</strong></p>
<pre><code class="language-python">node model_dir;
node summarizer{
    # import ability
    can t5_sum.classify_text;

    # summarizer
    can summarize with summarizer entry{
        data = file.load_json(visitor.dataset);
        
        report t5_sum.classify_text(
            text = data[&quot;text&quot;],
            min_length = data[&quot;min_length&quot;],
            max_length = data[&quot;max_length&quot;]
            );      
    }
}

# adding edge
edge summ_model {
    has model_type;
}

# adding graph
graph summ_graph {
    has anchor summ_model_dir;
    spawn {
        summ_model_dir = spawn node::model_dir;
        summarizer_node = spawn node::summarizer;
        summ_model_dir -[summ_model(model_type=&quot;summarizer&quot;)]-&gt; summarizer_node;
    }
}

walker init {
    root {
    spawn here --&gt; graph::summ_graph; 
    }
}

# declaring walker for summerize text
walker summarizer{
    has dataset=&quot;data.json&quot;;

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
</li>
</ol>
<ul>
<li>
<p><strong>Steps for running <code>summarizer.jac</code> program</strong></p>
<ul>
<li>
<p>Execute the follow command for Build <code>summarizer.jac</code></p>
<pre><code>jac build summarizer.jac
</code></pre>
</li>
<li>
<p>Execute the follow command to Activate sentinal</p>
<pre><code>sentinel set -snt active:sentinel -mode ir summarizer.jir
</code></pre>
</li>
<li>
<p>Execute the walker <code>summarizer</code> with default parameter for <code>summarizer(cl_summer)</code> module by following command</p>
<pre><code>walker run summarizer
</code></pre>
</li>
<li>
<p>After executing walker <code>summarizer</code> result data will show on console.</p>
<p><strong>Result</strong></p>
<pre><code>  &quot;report&quot;: [
                &quot;the president predicts some states will reopen this month. the country has over 637,000 confirmed cases and over 30,826 deaths, the highest for any country in the world. we'll be the comeback kids, all of us.&quot;
            ]
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="text-processing-1"><a class="header" href="#text-processing-1">Text Processing</a></h1>
<p>Text processing comprises an array of operations, performed on text input to manipulate, transform or analyze textual content. Jaseci provides the following text processing engines:</p>
<h2 id="text-processing-models"><a class="header" href="#text-processing-models">Text Processing Models</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><a href="jaseci_kit/modules/text_processing/text_seg/README.html"><code>text_seg</code></a></td><td>Text Segmenter</td><td>No Training required</td><td>Experimental</td><td>Topical Change Detection in Documents</td><td><a href="jaseci_kit/modules/text_processing/text_seg/README.html">Documentation</a> <a href="https://huggingface.co/dennlinger/roberta-cls-consec">Huggingface</a></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="text-segmenter-text_seg"><a class="header" href="#text-segmenter-text_seg"><strong>Text Segmenter (text_seg)</strong></a></h1>
<p>Module <code>text_seg</code> implemented for the Topical Change Detection in Documents via Embeddings of Long Sequences.</p>
<ol>
<li>Import <a href="jaseci_kit/modules/text_processing/text_seg/index.html#1-import-text_segementer-text_seg-module-in-jac"><code>text_seg</code></a> module in jac</li>
<li>Get <a href="jaseci_kit/modules/text_processing/text_seg/index.html#2-get-segments">segments</a></li>
</ol>
<h1 id="walk-through-4"><a class="header" href="#walk-through-4"><strong>Walk through</strong></a></h1>
<h2 id="1-import-text_segementer-text_seg-module-in-jac"><a class="header" href="#1-import-text_segementer-text_seg-module-in-jac"><strong>1. Import text_segementer (<code>text_seg</code>) module in jac</strong></a></h2>
<ol>
<li>For executing jaseci Open terminal and run follow command.
<pre><code>jsctl -m
</code></pre>
</li>
<li>Load <code>text_seg</code> module in jac by command
<pre><code>actions load module jaseci_kit.text_seg
</code></pre>
</li>
</ol>
<h2 id="2-get-segments"><a class="header" href="#2-get-segments"><strong>2. Get segments</strong></a></h2>
<p>For this tutorial, we are going to leverage the <strong>text segmenter</strong> (<code>text_seg</code>) for the purpose of text segmentation, </p>
<ul>
<li>
<p>Creating Jac Program <strong>text segmenter</strong> (<code>text_seg</code>)</p>
<ol>
<li>
<p>Create a file by name <strong><code>segment.jac</code></strong></p>
</li>
<li>
<p>Create node model_dir and <code>text_seg</code> in <code>segment.jac</code> file.</p>
<pre><code>node model_dir;
node text_seg{};
</code></pre>
</li>
<li>
<p>Initializing node text_seg and import <code>text_seg.load_model</code> and <code>text_seg.get_segments</code> ability inside node <code>text_seg</code>.</p>
<pre><code># import ability
can text_seg.load_model, text_seg.get_segments;
</code></pre>
</li>
<li>
<p>Initialize module <code>load_model</code> and <code>get_segments</code> inside <code>get_seg</code> node.</p>
<pre><code class="language-python"># loading model 
can load_model with text_segment entry{
    text_seg.load_model(
        model_name = visitor.model_name
    );
}

# text segmentation
can get_segments with text_segment entry{
    data = file.load_json(visitor.data);
    
    report text_seg.get_segments(
        text = data[&quot;text&quot;],
        threshold = data[&quot;threshold&quot;]
    );      
}
</code></pre>
<p><code>load_model</code> to load the available model for text segmentation.
<code>get_segements</code>: gets different topics in the context provided, given a threshold</p>
<p><strong>Parameter details</strong></p>
<ul>
<li>Input
<ul>
<li>
<p><code>model_name(String)</code>: name of the transformer model to load, options are:</p>
<ul>
<li><code>wiki</code> : trained on wikipedia data</li>
<li><code>legal</code>: trained on legal documents</li>
</ul>
</li>
<li>
<p><strong>Input Data</strong></p>
<pre><code>{
    &quot;text&quot;: &quot;There was once a king of Scotland whose name was Robert Bruce. He needed to be both brave and wise because the times in which he lived were wild and rude. The King of England was at war with him and had led a great army into Scotland to drive him out of the land. Battle after battle had been fought. Six times Bruce had led his brave little army against his foes and six times his men had been beaten and driven into flight. At last his army was scattered, and he was forced to hide in the woods and in lonely places among the mountains. One rainy day, Bruce lay on the ground under a crude shed listening to the patter of the drops on the roof above him. He was tired and unhappy. He was ready to give up all hope. It seemed to him that there was no use for him to try to do anything more. As he lay thinking, he saw a spider over his head making ready to weave her web. He watched her as she toiled slowly and with great care. Six times she tried to throw her frail thread from one beam to another, and six times it fell short. 'Poor thing,' said Bruce: 'you, too, know what it is to fail. But the spider did not lose hope with the sixth failure. With still more care, she made ready to try for the seventh time. Bruce almost forgot his own troubles as he watched her swing herself out upon the slender line. Would she fail again? No! The thread was carried safely to the beam and fastened there.&quot;,
    &quot;threshold&quot;: 0.65
}
</code></pre>
<ul>
<li><code>text(String)</code>: text the contain the entire context </li>
<li><code>threshold(Float)</code>: range is between 0-1, make each sentence as segment if, threshold is 1.</li>
</ul>
</li>
<li>
<p><strong>Output</strong>
List of Sentences that best summarizes the context</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Adding edge name of <code>seg_model</code> in <code>segment.jac</code> file for connecting nodes inside graph.</p>
<pre><code># adding edge
edge seg_model {
    has model_type;
}
</code></pre>
</li>
<li>
<p>Adding graph name of <code>text_seg_graph</code> for initializing node.</p>
<pre><code>graph text_seg_graph {
    has anchor seg_model_dir;
    spawn {
        seg_model_dir = spawn node::model_dir;
        text_seg_node = spawn node::text_seg;
        seg_model_dir -[seg_model(model_type=&quot;text_seg&quot;)]-&gt; text_seg_node;
    }
}
</code></pre>
</li>
<li>
<p>Initializing walker init for calling graph.</p>
<pre><code>walker init {
    root {
    spawn here --&gt; graph::text_seg_graph; 
    }
}
</code></pre>
</li>
<li>
<p>Creating walker name of <code>text_segment</code> for getting parameter from context or default and calling ability <code>load_model</code> and <code>get_segments</code>.</p>
<pre><code class="language-python"># declaring walker for summerize text
walker text_segment{
    has model_name=&quot;wiki&quot;;
    has data=&quot;text.json&quot;;    

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
<p><strong>Final <code>segment.jac</code> program</strong></p>
<pre><code class="language-python">node model_dir;
node text_seg{
    # import all module ability
    can text_seg.load_model, text_seg.get_segments;

    # loading model 
    can load_model with text_segment entry{
        text_seg.load_model(
            model_name = visitor.model_name
        );
    }

    # text segmentation
    can segment with text_segment entry{
        data = file.load_json(visitor.data);
        
        report text_seg.get_segments(
            text = data[&quot;text&quot;],
            threshold = data[&quot;threshold&quot;]
        );      
    }
}



# adding edge
edge seg_model {
    has model_type;
}

# adding graph
graph text_seg_graph {
    has anchor seg_model_dir;
    spawn {
        seg_model_dir = spawn node::model_dir;
        text_seg_node = spawn node::text_seg;
        seg_model_dir -[seg_model(model_type=&quot;text_seg&quot;)]-&gt; text_seg_node;
    }
}

# declare init graph
walker init {
    root {
    spawn here --&gt; graph::text_seg_graph; 
    }
}


# declaring walker for summerize text
walker text_segment{
    has model_name=&quot;wiki&quot;;
    has data=&quot;text.json&quot;;    

    root {
        take --&gt; node::model_dir;
    }
    model_dir {
        take --&gt;;
    }
}
</code></pre>
</li>
</ol>
<ul>
<li>
<p><strong>Steps for running <code>segment.jac</code> program</strong></p>
<ul>
<li>
<p>Execute the follow command for Build <code>segment.jac</code></p>
<pre><code>jac build segment.jac
</code></pre>
</li>
<li>
<p>Execute the follow command to Activate sentinal</p>
<pre><code>sentinel set -snt active:sentinel -mode ir segment.jir
</code></pre>
<p><strong>Note</strong>: If getting error <strong><code>ValueError: badly formed hexadecimal UUID string</code></strong> execute only once</p>
<blockquote>
<p>sentinel register -set_active true -mode ir segment.jir</p>
</blockquote>
</li>
<li>
<p>Execute the walker <code>text_segment</code> with default parameter for <code>text segmentation (text_seg)</code> module by following command</p>
<pre><code>walker run text_segment
</code></pre>
<p>After executing walker <code>text_segment</code> result data will show on console.</p>
<p><strong>Result</strong></p>
<pre><code>&quot;report&quot;: [
            [
                &quot;There was once a king of Scotland whose name was Robert Bruce. He needed to be both brave and wise because the times in which he lived were wild and rude. The King of England was at war with him and had led a great army into Scotland to drive him out of the land. Battle after battle had been fought. Six times Bruce had led his brave little army against his foes and six times his men had been beaten and driven into flight. At last his army was scattered, and he was forced to hide in the woods and in lonely places among the mountains.&quot;,
                &quot;One rainy day, Bruce lay on the ground under a crude shed listening to the patter of the drops on the roof above him. He was tired and unhappy. He was ready to give up all hope. It seemed to him that there was no use for him to try to do anything more. As he lay thinking, he saw a spider over his head making ready to weave her web. He watched her as she toiled slowly and with great care. Six times she tried to throw her frail thread from one beam to another, and six times it fell short. ' Poor thing,' said Bruce: 'you, too, know what it is to fail. But the spider did not lose hope with the sixth failure. With still more care, she made ready to try for the seventh time.&quot;,
                &quot;Bruce almost forgot his own troubles as he watched her swing herself out upon the slender line. Would she fail again? No! The thread was carried safely to the beam and fastened there.&quot;
        ]
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="object-detection--recognition"><a class="header" href="#object-detection--recognition">Object Detection / Recognition</a></h1>
<p>Object detection or objecr recognition refers to a collection of operations for identifying objects in digital photographs or streaming video. Jaseci provides the following object detection engines for use in development:</p>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><a href="jaseci_kit/modules/object_detection/yolov5/README.html"><code>yolov5</code></a></td><td>YoloV5</td><td>Training required</td><td>Ready</td><td>Object detection algorithm that divides images into a grid system. Each cell in the grid is responsible for detecting objects within itself.</td><td><a href="jaseci_kit/modules/object_detection/yolo_v5/README.html">Documentation</a> <a href="https://arxiv.org/abs/2004.10934v1">Paper</a></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="yolov5"><a class="header" href="#yolov5">YoloV5</a></h1>
<h3 id="yolo-v5-yolov5"><a class="header" href="#yolo-v5-yolov5">Yolo V5 (<code>yolov5</code>)</a></h3>
<p>YOLOv5 <code>yolov5</code>  is a family of object detection architectures and models pretrained on the COCO dataset, and represents Ultralytics open-source research into future vision AI methods, incorporating lessons learned and best practices evolved over thousands of hours of research and development.</p>
<ul>
<li><code>load_model</code>: Allows you to load the yolov5 pytorch model.
<ul>
<li>Input: 
<ul>
<li><code>name</code> (string) (required): the name of the trained model. </li>
<li><code>confidence_threshold</code> (integer) (optional): is a number between 0 and 1 that represents the likelihood that the output of the Machine Learning model is correct and will satisfy a user's request.</li>
</ul>
</li>
<li>Return : Message whether the model was sucessfully loaded or not.</li>
<li>Note: Before loading the model (weights) need to be in a specific location at <code>object_detection/yolov5/runs/train/exp/weights</code>, with a specific file suffix/type (*.pt)</li>
</ul>
</li>
<li><code>detect</code>: Based on the image(s) provided by the user it will try to predict where an object alongside with it's label is on the each attached image(s).
<ul>
<li>Input:
<ul>
<li><code>file_list</code> (files) (required): the image files you want the model to detect objects location.</li>
<li><code>image_size</code> (integer) (optional): The inference size of the image(s) attached.</li>
<li><code>download_image</code> (boolean) (optional): Whether or not you want the image(s) to be returned to the current API.</li>
</ul>
</li>
<li>Return: The class (labels) it picked up from image, Bounding Box Coordinates (bbox) where the object was detected, confidence ( score ) and image in base64 format.</li>
</ul>
</li>
</ul>
<h3 id="how-to-create-an-image-based-on-the-image_bas64-string"><a class="header" href="#how-to-create-an-image-based-on-the-image_bas64-string">How to create an image based on the image_bas64 string</a></h3>
<p>In <code>api.py</code> there is a function called <code>base64EncodeImage</code> this is what converts the image to image arrays then into string.</p>
<pre><code>def base64EncodeImage(img):
    &quot;&quot;&quot;Takes an input image and returns a base64 encoded string representation of that image (jpg format)&quot;&quot;&quot;
    _, im_arr = cv2.imencode(&quot;.jpg&quot;, img)
    im_b64 = base64.b64encode(im_arr.tobytes()).decode(&quot;utf-8&quot;)

    return im_b64

</code></pre>
<h3 id="how-it-supports-multiple-images"><a class="header" href="#how-it-supports-multiple-images">How it supports multiple images</a></h3>
<p>For the <code>/detect</code> endpoint it accepts an array of files and the data have to be send through a multipart or formdata or else it won't work, which will be later encoded, processed and then returned to the user.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="non-ai-tools-1"><a class="header" href="#non-ai-tools-1">Non-AI Tools</a></h1>
<p>Here is a collection of other engines and tools that Jaseci provides, which do not classify as AI or ML in nature but are useful nonetheless:</p>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Model Name</th><th>Type</th><th>Status</th><th>Description</th><th>Resources</th></tr></thead><tbody>
<tr><td><a href="jaseci_kit/modules/non_ai/pdf_ext/README.html"><code>pdf_ext</code></a></td><td>PDF Extractor</td><td>No Training</td><td>Ready</td><td>Topical Change Detection in Documents via Embeddings of Long Sequences.</td><td><a href="jaseci_kit/modules/non_ai/pdf_ext/README.html">Documentation</a> <a href="https://pypdf2.readthedocs.io/en/latest/">Doc.</a></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="pdf-extractor-pdf_ext"><a class="header" href="#pdf-extractor-pdf_ext">PDF Extractor (<code>pdf_ext</code>)</a></h1>
<p><code>pdf_ext</code> module implemented for the Topical Change Detection in Documents via Embeddings of Long Sequences.</p>
<ul>
<li><code>extract_pdf</code>: gets different topics in the context provided, given a threshold 
<ul>
<li>Input 
<ul>
<li><code>url</code>(String): gets the pdf from URL</li>
<li><code>path</code>(Float): gets the pdf from local path</li>
<li><code>metadata</code>(Bool): to display available metadata of PDF</li>
</ul>
</li>
<li>Returns: a json with number of pages the pdf had and content</li>
</ul>
</li>
</ul>
<h4 id="example-jac-usage-3"><a class="header" href="#example-jac-usage-3">Example Jac Usage:</a></h4>
<pre><code class="language-jac">walker pdf_ext_example {
    has url = &quot;http://www.africau.edu/images/default/sample.pdf&quot;;
    has metadata = true;
    can pdf_ext.extract_pdf;

    # Getting the dat from PDF
    resp_data = pdf_ext.extract_pdf(url=url,
    metadata=metadata);
    std.out(resp_data);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>Visit jaseci.org for more info!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
