<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Building FAQ States - Jaseci Documentation</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Jaseci Offical Documentation</li><li class="chapter-item expanded "><a href="../../../LICENSE.html"><strong aria-hidden="true">1.</strong> License</a></li><li class="chapter-item expanded "><a href="../../../CHANGELOG.html"><strong aria-hidden="true">2.</strong> About this Release</a></li><li class="chapter-item expanded "><a href="../../../support/guide/how_to_contribute.html"><strong aria-hidden="true">3.</strong> How to contribute</a></li><li class="chapter-item expanded "><a href="../../../CONTRIBUTORS.html"><strong aria-hidden="true">4.</strong> Contributors</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="../../../support/guide/getting_started/introduction.html"><strong aria-hidden="true">5.</strong>  Jaseci Overview</a></li><li class="chapter-item expanded "><a href="../../../support/guide/getting_started/installation.html"><strong aria-hidden="true">6.</strong>  Installing Jaseci</a></li><li class="chapter-item expanded "><a href="../../../support/guide/getting_started/setting_up_your_editor.html"><strong aria-hidden="true">7.</strong>  Setting up your Code Editor</a></li><li class="chapter-item expanded "><a href="../../../support/guide/getting_started/writing_your_first_app.html"><strong aria-hidden="true">8.</strong>  Writing your first app</a></li><li class="chapter-item expanded "><a href="../../../support/guide/getting_started/understanding_jac_programs.html"><strong aria-hidden="true">9.</strong>  Understanding JAC Programs</a></li><li class="chapter-item expanded affix "><li class="part-title">The JAC Programming Language Guide</li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/jac_language_overview.html"><strong aria-hidden="true">10.</strong> An Overview of the JAC Language</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/jac_grammar.html"><strong aria-hidden="true">11.</strong>  JAC Grammar</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/keywords.html"><strong aria-hidden="true">12.</strong>  keywords</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/operators.html"><strong aria-hidden="true">13.</strong>  Operators</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/control_flow.html"><strong aria-hidden="true">14.</strong>  Control Flow</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/collections.html"><strong aria-hidden="true">15.</strong>  Collections</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/nodes.html"><strong aria-hidden="true">16.</strong>  Nodes</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/edges.html"><strong aria-hidden="true">17.</strong>  Edges</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/graphs.html"><strong aria-hidden="true">18.</strong>  Graphs</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/walkers.html"><strong aria-hidden="true">19.</strong>  Walkers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/traversing_a_graph.html"><strong aria-hidden="true">19.1.</strong>  Traversing a Graph</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/referencing_node_context.html"><strong aria-hidden="true">19.2.</strong>  Referencing a Node in Context</a></li></ol></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/passing_arguments.html"><strong aria-hidden="true">20.</strong>  Passing Arguments</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/specifying_operating_context.html"><strong aria-hidden="true">21.</strong>  Specifying Operating Context</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/actions.html"><strong aria-hidden="true">22.</strong>  Actions in Jaseci</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/date_actions.html"><strong aria-hidden="true">22.1.</strong>  Date Actions</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/file_actions.html"><strong aria-hidden="true">22.2.</strong>  File Actions</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/net_actions.html"><strong aria-hidden="true">22.3.</strong>  Net Actions</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/rand_actions.html"><strong aria-hidden="true">22.4.</strong>  Rand Actions</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/request_actions.html"><strong aria-hidden="true">22.5.</strong>  Request Actions</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/standard_actions.html"><strong aria-hidden="true">22.6.</strong>  Standard Actions</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/vector_actions.html"><strong aria-hidden="true">22.7.</strong>  Vector Actions</a></li><li class="chapter-item expanded "><a href="../../../support/guide/jac_language_guide/jaseci_actions.html"><strong aria-hidden="true">22.8.</strong>  Jaseci Actions</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Samples and Tutorials</li><li class="chapter-item expanded "><a href="../../../examples/api_development/index.html"><strong aria-hidden="true">23.</strong> API Development</a></li><li class="chapter-item expanded "><a href="../../../examples/canoniCAI/index.html"><strong aria-hidden="true">24.</strong> CanoniCAI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../examples/canoniCAI/documentation/add_competency.html"><strong aria-hidden="true">24.1.</strong> Adding a competency</a></li><li class="chapter-item expanded "><a href="../../../examples/canoniCAI/documentation/add_followup_state.html" class="active"><strong aria-hidden="true">24.2.</strong> Adding a following up state</a></li><li class="chapter-item expanded "><a href="../../../examples/canoniCAI/documentation/add_followup_state.html" class="active"><strong aria-hidden="true">24.3.</strong> Building FAQ States</a></li><li class="chapter-item expanded "><a href="../../../examples/canoniCAI/documentation/fixing_utterances.html"><strong aria-hidden="true">24.4.</strong> Fixing Utterance</a></li><li class="chapter-item expanded "><a href="../../../examples/canoniCAI/documentation/jaseci_actions_load_local.html"><strong aria-hidden="true">24.5.</strong> Setting up a Custom Module</a></li></ol></li><li class="chapter-item expanded "><a href="../../../examples/ner_examples/index.html"><strong aria-hidden="true">25.</strong> NER Examples</a></li><li class="chapter-item expanded affix "><li class="part-title">Jaseci Library Reference</li><li class="chapter-item expanded "><a href="../../../jaseci_kit/index.html"><strong aria-hidden="true">26.</strong> Jaseci Kit</a></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/encoders/index.html"><strong aria-hidden="true">27.</strong> Encoders</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/encoders/use_enc/index.html"><strong aria-hidden="true">27.1.</strong> USE Encoder</a></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/encoders/use_qa/index.html"><strong aria-hidden="true">27.2.</strong> USE QA</a></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/encoders/fast_enc/index.html"><strong aria-hidden="true">27.3.</strong> FastText</a></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/encoders/bi_enc/index.html"><strong aria-hidden="true">27.4.</strong> Bi-Encoder</a></li></ol></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/entity_utils/index.html"><strong aria-hidden="true">28.</strong> Entity Recongition</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/entity_utils/flair_ner/index.html"><strong aria-hidden="true">28.1.</strong> Flair NER</a></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/entity_utils/tfm_ner/index.html"><strong aria-hidden="true">28.2.</strong> Transformer NER</a></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/entity_utils/lstm_ner/index.html"><strong aria-hidden="true">28.3.</strong> LSTM NER</a></li></ol></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/summarization/index.html"><strong aria-hidden="true">29.</strong> Text Summarization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/summarization/cl_summer/index.html"><strong aria-hidden="true">29.1.</strong> CL Summarization</a></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/summarization/t5_sum/index.html"><strong aria-hidden="true">29.2.</strong> T5 Summarization</a></li></ol></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/text_processing/index.html"><strong aria-hidden="true">30.</strong> Text Processing </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/text_processing/text_seg/index.html"><strong aria-hidden="true">30.1.</strong> Text Segmenter</a></li></ol></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/object_detection/index.html"><strong aria-hidden="true">31.</strong> Object Detection</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/object_detection/yolo_v5/index.html"><strong aria-hidden="true">31.1.</strong> YOLO V5</a></li></ol></li><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/non_ai/index.html"><strong aria-hidden="true">32.</strong> Non-AI Tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../jaseci_kit/modules/non_ai/pdf_ext/index.html"><strong aria-hidden="true">32.1.</strong> PDF Extractor</a></li></ol></li><li class="chapter-item expanded "><a href="../../../jaseci_core/index.html"><strong aria-hidden="true">33.</strong> Jaseci Core</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jaseci Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="how-to-add-follow-up-to-a-state"><a class="header" href="#how-to-add-follow-up-to-a-state">How to add follow up to a state</a></h1>
<h5 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h5>
<ul>
<li><a href="#introduction"> Introduction </a></li>
<li><a href="#step-1-create-follow-up-states">Create follow up states</a></li>
<li><a href="#step-2-connect-follow-up-state-to-a-state">Connect follow up state to a state</a></li>
<li><a href="#step-3-add-business-logicc-to-follow-up-state">Add business logic to follow up state</a></li>
<li><a href="#step-4-add-response-to-follow-up-state">Add response to follow up state</a></li>
</ul>
<h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>In the example KFC bot we have a follow up state. In this tutorial we will explain how we build the follow up. In the order state there is a follow state attached to it, where the customer could either confirm the order or decline the order. So let's dive into it. Let pretend that there was no follow up state, let's build it from scratch.</p>
<h1 id="step-1-create-follow-up-states"><a class="header" href="#step-1-create-follow-up-states">Step 1: Create follow up states</a></h1>
<p>Navigate to the <code>fixture.jac</code> file</p>
<p>We will be adding an order confirmation state and an order denial state which are follow ups attached to the order state.</p>
<p>ADD: <code>state_order_confirmation = spawn node::state(name=&quot;order_confirmation&quot;);</code>
ADD: <code>state_order_denial = spawn node::state(name=&quot;order_denial&quot;);</code></p>
<pre><code>spawn { 
    state_order = spawn node::state(name=&quot;order&quot;);
    state_order_confirmation = spawn node::state(name=&quot;order_confirmation&quot;);
    state_order_denial = spawn node::state(name=&quot;order_denial&quot;);
}
</code></pre>
<h1 id="step-2-connect-follow-up-state-to-a-state"><a class="header" href="#step-2-connect-follow-up-state-to-a-state">Step 2: Connect follow up state to a state</a></h1>
<p>Next step we will attach the follow up state to the origin state, in this case it's the order state.</p>
<p>ADD: <code>state_order -[transition(intent_label = global.yes_label)]-&gt; state_order_confirmation;</code></p>
<p>If yes_label for intent_label is true it will go to the order confirmation state</p>
<p>ADD: <code>state_order -[transition(intent_label = global.no_label)]-&gt; state_order_denial;</code></p>
<p>If no_label for intent_label is true it will go to the order denial state</p>
<pre><code>spawn { 
    conv_root -[transition(intent_label = global.order_label)]-&gt; state_order;
    state_order -[transition(intent_label = global.yes_label)]-&gt; state_order_confirmation;
    state_order -[transition(intent_label = global.no_label)]-&gt; state_order_denial;
}
</code></pre>
<h1 id="step-3-add-business-logic-to-follow-up-state"><a class="header" href="#step-3-add-business-logic-to-follow-up-state">Step 3: Add business logic to follow up state</a></h1>
<p>Since there is no business logic required, we will create a slot <code>user</code> and attach their name to it so we could then use this slot for later use.</p>
<p>Navigate to <code>nodes.jac</code>, then search for <code>state node</code> and look for the node ability called <code> business_logic</code></p>
<p>ADD: <code>visitor.dialogue_context[&quot;user&quot;] = &quot;Jemmott&quot;;</code></p>
<pre><code>can business_logic {
    if (!visitor.hoping) { 
        if (here.name == &quot;order_confirmation&quot; or here.name == &quot;order_denial&quot;) {
            // HERE YOU COULD DO ALL YOUR LOGICS FOR THESE SPECIFIC FOLLOW UP STATES
            visitor.dialogue_context[&quot;user&quot;] = &quot;Jemmott&quot;;
        }
    }
}
</code></pre>
<h1 id="step-4-add-response-to-follow-up-state"><a class="header" href="#step-4-add-response-to-follow-up-state">Step 4: Add response to follow up state</a></h1>
<p>Here we will add a response to the follow up state.</p>
<p>Navigate to <code>nodes.jac</code>, then search for <code>state node</code> and look for the node ability called <code>gen_response</code></p>
<p>IF <code>here.name == &quot;order_confirmation&quot;</code> then ADD: <code> visitor.answer = &quot;Thank you for ordering with us&quot;;</code></p>
<p>IF <code>here.name == &quot;order_denial&quot;</code> then ADD: <code> visitor.answer = &quot;TNo problem, If there anything I can help with feel free to ask&quot;;</code></p>
<pre><code>can gen_response {
        if (!visitor.hoping) {
            if (here.name == &quot;soc&quot;) {
                visitor.answer = &quot;Hello there, Welcome to KFC!&quot;;
            } elif (here.name == &quot;order_confirmation&quot;) {
                visitor.answer = &quot;Thank you for ordering with us&quot;;
            } elif (here.name == &quot;order_denial&quot;) {
                visitor.answer = &quot;No problem, If there anything I can help with feel free to ask&quot;;
            }
        }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../examples/canoniCAI/documentation/add_competency.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../../examples/canoniCAI/documentation/add_followup_state.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../examples/canoniCAI/documentation/add_competency.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../../examples/canoniCAI/documentation/add_followup_state.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
