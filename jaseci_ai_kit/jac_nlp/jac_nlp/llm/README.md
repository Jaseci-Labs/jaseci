# **Dolly V2 (`dolly`)**
Databricks’ dolly-v2, an instruction-following large language model trained on the Databricks machine learning platform that is licensed for commercial use. Based on pythia-2.8b, Dolly is trained on ~15k instruction/response fine tuning records databricks-dolly-15k generated by Databricks employees in capability domains from the InstructGPT paper, including brainstorming, classification, closed QA, generation, information extraction, open QA and summarization. dolly-v2-3b is not a state-of-the-art model, but does exhibit surprisingly high quality instruction following behavior not characteristic of the foundation model on which it is based.

## **Actions**
The `generate` action allows you to generate text based on the input text you provide.

Inputs:
- prompt: input text, string
- context: context text, string
- your custom input variables

Output
- generated text, string

## **Example**
Without context. Dolly will use the knowledge it has learned from the training data to generate a response.

```jac
walker test_generate_without_context {
    can dolly.generate;
    report dolly.generate(prompt="Explain to me the difference between nuclear fission and fusion.");
}
```
```python
Output = 'Nuclear fission is a natural phenomenon where a small amount ofUranium or another heavy metal undergoes spontaneous nuclear decay and breaks down into smaller pieces of Uranium. The fission is spontaneous because the Uranium nucleus has an even number of neutrons and so the number of fissile isotopes is even, and there is only one fissile isotope for each mass of Uranium.\n\nNuclear fusion, on the other hand, is a process by which two or more light atoms (typically hydrogen) chemically join to form a heavier one (typically deuterium or tritium) and produce heat and visible light. The fusion reaction is only possible when the two light atoms have an atomic mass ratio of 2:1 (i.e., deuterium and tritium) and therefore produces an even number of neutrons, which is an asymmetric nuclear reaction.\n\nThe splitting of an atom by a chain reaction at a uranium deposit at the Oak Ridge National Laboratory in Tennessee in 1942 is a famous example of nuclear fission. Fission (splitting) is the spontaneous breaking of the nuclear chemical bonds that hold together the giant atom of a uranium ore. This rare nuclear reaction occurs very, very quickly, on the order of 10−23'
```

With context. Dolly will use the context you provide to generate a response.
```jac
walker test_generate_with_context {
    can dolly.generate;
    subject = "George Washington (February 22, 1732[b] – December 14, 1799) was an American military officer, statesman,
            and Founding Father who served as the first president of the United States from 1789 to 1797.";

    report dolly.generate(prompt="When was George Washington president?", subject=subject);
}
```

```python
Output = 'George Washington was the first president of the United States from 1789 to 1797.'
```

With Custom Template. Dolly will your custom template to generate a response.
```bash
jaseci> actions call dolly.setup -ctx '{"input_variables":["description", "question"], "template": "Description : {description}\nQuestion: {question}\nAnswer:"}'
```

```jac
walker test_generate_with_custom_template {
    can dolly.generate;
    description = "George Washington (February 22, 1732[b] – December 14, 1799) was an American military officer, statesman,
            and Founding Father who served as the first president of the United States from 1789 to 1797.";

    report dolly.generate(description=description, question="When was George Washington president?");
}
```
With this you can try different prompting techniques to get the best response from Dolly.

### Use Cases
1. Generate a response to a question.
2. Generate a response to a question with a given context.
3. Emulate a chatbot. You can custom template to emulate a chatbot. For example, you can use the following template to emulate a chatbot named 'Dolly'.


```jac
walker test_generate_with_custom_template {
    can dolly.generate;
    description = "You are a chatbot named Dolly. You are talking to a human.";

    report dolly.generate(description=description, question="Hello, how are you?");
}
```

### Setup Parameters
- `model`: model name, string (default: "dolly-v2-3b")
- `input_variables`: input variables, list of strings (default: ["instruction", "context"])
- `template`: template, string (default: "instruction: {instruction}\ncontext: {context}\n")

## **References**
- [Databricks](https://databricks.com/)
- HuggingFace [dolly-v2-3b](https://huggingface.co/databricks/dolly-v2-3b)