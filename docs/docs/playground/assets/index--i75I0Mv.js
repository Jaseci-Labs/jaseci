var Z={},te={},Le={exports:{}};(function(r,e){var t=function(){return typeof document<"u"&&document.currentScript&&document.currentScript.src,function(i){i=i||{};var n=typeof i<"u"?i:{},u={},m;for(m in n)n.hasOwnProperty(m)&&(u[m]=n[m]);var x=!1,p="";function T(s){return n.locateFile?n.locateFile(s,p):p+s}var F;F=function(a){var o;return typeof readbuffer=="function"?new Uint8Array(readbuffer(a)):(o=read(a,"binary"),C(typeof o=="object"),o)},typeof scriptArgs<"u"&&scriptArgs,typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print);var y=n.print||console.log.bind(console),d=n.printErr||console.warn.bind(console);for(m in u)u.hasOwnProperty(m)&&(n[m]=u[m]);u=null,n.arguments&&n.arguments,n.thisProgram&&n.thisProgram,n.quit&&n.quit;var v;n.wasmBinary&&(v=n.wasmBinary),n.noExitRuntime&&n.noExitRuntime,typeof WebAssembly!="object"&&d("no native wasm support detected");var _,R=new WebAssembly.Table({initial:244,maximum:244,element:"anyfunc"}),H=!1;function C(s,a){s||L("Assertion failed: "+a)}function U(s){var a=n["_"+s];return C(a,"Cannot call unknown function "+s+", make sure it is exported"),a}function ze(s,a,o,A,b){var h={string:function(E){var q=0;if(E!=null&&E!==0){var Fe=(E.length<<2)+1;q=Me(Fe),$e(E,q,Fe)}return q},array:function(E){var q=Me(E.length);return Ye(E,q),q}};function f(E){return a==="string"?ye(E):a==="boolean"?!!E:E}var l=U(s),w=[],M=0;if(A)for(var W=0;W<A.length;W++){var Oe=h[o[W]];Oe?(M===0&&(M=yt()),w[W]=Oe(A[W])):w[W]=A[W]}var ue=l.apply(null,w);return ue=f(ue),M!==0&&vt(M),ue}var me=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function de(s,a,o){for(var A=a+o,b=a;s[b]&&!(b>=A);)++b;if(b-a>16&&s.subarray&&me)return me.decode(s.subarray(a,b));for(var h="";a<b;){var f=s[a++];if(!(f&128)){h+=String.fromCharCode(f);continue}var l=s[a++]&63;if((f&224)==192){h+=String.fromCharCode((f&31)<<6|l);continue}var w=s[a++]&63;if((f&240)==224?f=(f&15)<<12|l<<6|w:f=(f&7)<<18|l<<12|w<<6|s[a++]&63,f<65536)h+=String.fromCharCode(f);else{var M=f-65536;h+=String.fromCharCode(55296|M>>10,56320|M&1023)}}return h}function ye(s,a){return s?de($,s,a):""}function Ge(s,a,o,A){if(!(A>0))return 0;for(var b=o,h=o+A-1,f=0;f<s.length;++f){var l=s.charCodeAt(f);if(l>=55296&&l<=57343){var w=s.charCodeAt(++f);l=65536+((l&1023)<<10)|w&1023}if(l<=127){if(o>=h)break;a[o++]=l}else if(l<=2047){if(o+1>=h)break;a[o++]=192|l>>6,a[o++]=128|l&63}else if(l<=65535){if(o+2>=h)break;a[o++]=224|l>>12,a[o++]=128|l>>6&63,a[o++]=128|l&63}else{if(o+3>=h)break;a[o++]=240|l>>18,a[o++]=128|l>>12&63,a[o++]=128|l>>6&63,a[o++]=128|l&63}}return a[o]=0,o-b}function $e(s,a,o){return Ge(s,$,a,o)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Ye(s,a){oe.set(s,a)}var qe=65536;function ve(s,a){return s%a>0&&(s+=a-s%a),s}var K,oe,$,Y;function _e(s){K=s,n.HEAP8=oe=new Int8Array(s),n.HEAP16=new Int16Array(s),n.HEAP32=Y=new Int32Array(s),n.HEAPU8=$=new Uint8Array(s),n.HEAPU16=new Uint16Array(s),n.HEAPU32=new Uint32Array(s),n.HEAPF32=new Float32Array(s),n.HEAPF64=new Float64Array(s)}var Ve=5507664,Xe=264624,Ae=n.TOTAL_MEMORY||157286400;n.wasmMemory?_=n.wasmMemory:_=new WebAssembly.Memory({initial:Ae/qe}),_&&(K=_.buffer),Ae=K.byteLength,_e(K),Y[Xe>>2]=Ve;function re(s){for(;s.length>0;){var a=s.shift();if(typeof a=="function"){a();continue}var o=a.func;typeof o=="number"?a.arg===void 0?n.dynCall_v(o):n.dynCall_vi(o,a.arg):o(a.arg===void 0?null:a.arg)}}var Se=[],be=[],Ze=[],we=[];function Ke(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)et(n.preRun.shift());re(Se)}function Je(){re(be)}function Qe(){re(Ze)}function ke(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)tt(n.postRun.shift());re(we)}function et(s){Se.unshift(s)}function tt(s){we.unshift(s)}var D=0,J=null;function nt(s){D++,n.monitorRunDependencies&&n.monitorRunDependencies(D)}function rt(s){if(D--,n.monitorRunDependencies&&n.monitorRunDependencies(D),D==0&&J){var a=J;J=null,a()}}n.preloadedImages={},n.preloadedAudios={};function L(s){throw n.onAbort&&n.onAbort(s),s+="",y(s),d(s),H=!0,s="abort("+s+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(s)}var xe="data:application/octet-stream;base64,";function Ee(s){return String.prototype.startsWith?s.startsWith(xe):s.indexOf(xe)===0}var B="onigasm.wasm";Ee(B)||(B=T(B));function Te(){try{if(v)return new Uint8Array(v);if(F)return F(B);throw"both async and sync fetching of the wasm failed"}catch(s){L(s)}}function it(){return!v&&x&&typeof fetch=="function"?fetch(B,{credentials:"same-origin"}).then(function(s){if(!s.ok)throw"failed to load wasm binary file at '"+B+"'";return s.arrayBuffer()}).catch(function(){return Te()}):new Promise(function(s,a){s(Te())})}function st(){var s={env:Re,wasi_unstable:Re};function a(f,l){var w=f.exports;n.asm=w,rt()}nt();function o(f){a(f.instance)}function A(f){return it().then(function(l){return WebAssembly.instantiate(l,s)}).then(f,function(l){d("failed to asynchronously prepare wasm: "+l),L(l)})}function b(){if(!v&&typeof WebAssembly.instantiateStreaming=="function"&&!Ee(B)&&typeof fetch=="function")fetch(B,{credentials:"same-origin"}).then(function(f){var l=WebAssembly.instantiateStreaming(f,s);return l.then(o,function(w){d("wasm streaming compile failed: "+w),d("falling back to ArrayBuffer instantiation"),A(o)})});else return A(o)}if(n.instantiateWasm)try{var h=n.instantiateWasm(s,a);return h}catch(f){return d("Module.instantiateWasm callback failed with error: "+f),!1}return b(),{}}be.push({func:function(){dt()}});function at(){L()}function ot(){return oe.length}function lt(){return 264624}function ut(s,a,o){$.set($.subarray(a,a+o),s)}function ft(s){try{return _.grow(s-K.byteLength+65535>>16),_e(_.buffer),1}catch{}}function ct(s){var a=ot(),o=65536,A=2147483648-o;if(s>A)return!1;for(var b=16777216,h=Math.max(a,b);h<s;)h<=536870912?h=ve(2*h,o):h=Math.min(ve((3*h+2147483648)/4,o),A);var f=ft(h);return!!f}var N={buffers:[null,[],[]],printChar:function(s,a){var o=N.buffers[s];a===0||a===10?((s===1?y:d)(de(o,0)),o.length=0):o.push(a)},varargs:0,get:function(s){N.varargs+=4;var a=Y[N.varargs-4>>2];return a},getStr:function(){var s=ye(N.get());return s},get64:function(){var s=N.get();return N.get(),s},getZero:function(){N.get()}};function ht(s){try{return 0}catch(a){return(typeof FS>"u"||!(a instanceof FS.ErrnoError))&&L(a),a.errno}}function gt(s,a,o,A,b){try{return 0}catch(h){return(typeof FS>"u"||!(h instanceof FS.ErrnoError))&&L(h),h.errno}}function pt(s,a,o,A){try{for(var b=0,h=0;h<o;h++){for(var f=Y[a+h*8>>2],l=Y[a+(h*8+4)>>2],w=0;w<l;w++)N.printChar(s,$[f+w]);b+=l}return Y[A>>2]=b,0}catch(M){return(typeof FS>"u"||!(M instanceof FS.ErrnoError))&&L(M),M.errno}}function mt(s){}var Re={abort:at,emscripten_get_sbrk_ptr:lt,emscripten_memcpy_big:ut,emscripten_resize_heap:ct,fd_close:ht,fd_seek:gt,fd_write:pt,memory:_,setTempRet0:mt,table:R},Ce=st();n.asm=Ce;var dt=n.___wasm_call_ctors=function(){return n.asm.__wasm_call_ctors.apply(null,arguments)};n._malloc=function(){return n.asm.malloc.apply(null,arguments)},n._free=function(){return n.asm.free.apply(null,arguments)},n._getLastError=function(){return n.asm.getLastError.apply(null,arguments)},n._compilePattern=function(){return n.asm.compilePattern.apply(null,arguments)},n._disposeCompiledPatterns=function(){return n.asm.disposeCompiledPatterns.apply(null,arguments)},n._findBestMatch=function(){return n.asm.findBestMatch.apply(null,arguments)},n.___cxa_demangle=function(){return n.asm.__cxa_demangle.apply(null,arguments)},n._setThrew=function(){return n.asm.setThrew.apply(null,arguments)};var yt=n.stackSave=function(){return n.asm.stackSave.apply(null,arguments)},Me=n.stackAlloc=function(){return n.asm.stackAlloc.apply(null,arguments)},vt=n.stackRestore=function(){return n.asm.stackRestore.apply(null,arguments)};n.__growWasmMemory=function(){return n.asm.__growWasmMemory.apply(null,arguments)},n.dynCall_vi=function(){return n.asm.dynCall_vi.apply(null,arguments)},n.dynCall_iiii=function(){return n.asm.dynCall_iiii.apply(null,arguments)},n.dynCall_iiiii=function(){return n.asm.dynCall_iiiii.apply(null,arguments)},n.dynCall_iii=function(){return n.asm.dynCall_iii.apply(null,arguments)},n.dynCall_iidiiii=function(){return n.asm.dynCall_iidiiii.apply(null,arguments)},n.dynCall_vii=function(){return n.asm.dynCall_vii.apply(null,arguments)},n.dynCall_ii=function(){return n.asm.dynCall_ii.apply(null,arguments)},n.dynCall_i=function(){return n.asm.dynCall_i.apply(null,arguments)},n.dynCall_v=function(){return n.asm.dynCall_v.apply(null,arguments)},n.dynCall_viiiiii=function(){return n.asm.dynCall_viiiiii.apply(null,arguments)},n.dynCall_viiiii=function(){return n.asm.dynCall_viiiii.apply(null,arguments)},n.dynCall_viiii=function(){return n.asm.dynCall_viiii.apply(null,arguments)},n.dynCall_jiji=function(){return n.asm.dynCall_jiji.apply(null,arguments)},n.asm=Ce,n.ccall=ze;var Q;n.then=function(s){if(Q)s(n);else{var a=n.onRuntimeInitialized;n.onRuntimeInitialized=function(){a&&a(),s(n)}}return n},J=function s(){Q||le(),Q||(J=s)};function le(s){if(D>0||(Ke(),D>0))return;function a(){Q||(Q=!0,!H&&(Je(),Qe(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),ke()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),a()},1)):a()}if(n.run=le,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return le(),i}}();r.exports=t})(Le);var _t=Le.exports;Object.defineProperty(te,"__esModule",{value:!0});const At=_t;async function He(r){return new Promise((e,t)=>{const{log:i,warn:n,error:u}=console;At({instantiateWasm(m,x){return WebAssembly.instantiate(r,m).then(p=>{x(p.instance)}).catch(p=>{throw p}),{}}}).then(m=>{te.onigasmH=m,e()}),typeof print<"u"&&(console.log=i,console.error=u,console.warn=n)})}let Pe=!1;async function St(r){if(Pe)throw new Error("Onigasm#init has been called and was succesful, subsequent calls are not allowed once initialized");if(typeof r=="string"){const e=await(await fetch(r)).arrayBuffer();await He(e)}else if(r instanceof ArrayBuffer)await He(r);else throw new TypeError("Expected a string (URL of .wasm file) or ArrayBuffer (.wasm file itself) as first parameter");Pe=!0}te.loadWASM=St;var pe={},ne={},fe,Ie;function bt(){return Ie||(Ie=1,fe=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),fe}var wt=c;c.Node=G;c.create=c;function c(r){var e=this;if(e instanceof c||(e=new c),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var t=0,i=arguments.length;t<i;t++)e.push(arguments[t]);return e}c.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};c.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};c.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};c.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)Et(this,arguments[r]);return this.length};c.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)Tt(this,arguments[r]);return this.length};c.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};c.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};c.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,i=0;t!==null;i++)r.call(e,t.value,i,this),t=t.next};c.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,i=this.length-1;t!==null;i--)r.call(e,t.value,i,this),t=t.prev};c.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};c.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};c.prototype.map=function(r,e){e=e||this;for(var t=new c,i=this.head;i!==null;)t.push(r.call(e,i.value,this)),i=i.next;return t};c.prototype.mapReverse=function(r,e){e=e||this;for(var t=new c,i=this.tail;i!==null;)t.push(r.call(e,i.value,this)),i=i.prev;return t};c.prototype.reduce=function(r,e){var t,i=this.head;if(arguments.length>1)t=e;else if(this.head)i=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;i!==null;n++)t=r(t,i.value,n),i=i.next;return t};c.prototype.reduceReverse=function(r,e){var t,i=this.tail;if(arguments.length>1)t=e;else if(this.tail)i=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;i!==null;n--)t=r(t,i.value,n),i=i.prev;return t};c.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};c.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};c.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new c;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var i=0,n=this.head;n!==null&&i<r;i++)n=n.next;for(;n!==null&&i<e;i++,n=n.next)t.push(n.value);return t};c.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new c;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var i=this.length,n=this.tail;n!==null&&i>e;i--)n=n.prev;for(;n!==null&&i>r;i--,n=n.prev)t.push(n.value);return t};c.prototype.splice=function(r,e){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var t=0,i=this.head;i!==null&&t<r;t++)i=i.next;for(var n=[],t=0;i&&t<e;t++)n.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var t=2;t<arguments.length;t++)i=xt(this,i,arguments[t]);return n};c.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var i=t.prev;t.prev=t.next,t.next=i}return this.head=e,this.tail=r,this};function xt(r,e,t){var i=e===r.head?new G(t,null,e,r):new G(t,e,e.next,r);return i.next===null&&(r.tail=i),i.prev===null&&(r.head=i),r.length++,i}function Et(r,e){r.tail=new G(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function Tt(r,e){r.head=new G(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function G(r,e,t,i){if(!(this instanceof G))return new G(r,e,t,i);this.list=i,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{bt()(c)}catch{}const Rt=wt,j=Symbol("max"),I=Symbol("length"),V=Symbol("lengthCalculator"),ee=Symbol("allowStale"),z=Symbol("maxAge"),P=Symbol("dispose"),Ue=Symbol("noDisposeOnSet"),S=Symbol("lruList"),O=Symbol("cache"),We=Symbol("updateAgeOnGet"),ce=()=>1;let Ct=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[j]=e.max||1/0;const t=e.length||ce;if(this[V]=typeof t!="function"?ce:t,this[ee]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[z]=e.maxAge||0,this[P]=e.dispose,this[Ue]=e.noDisposeOnSet||!1,this[We]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[j]=e||1/0,k(this)}get max(){return this[j]}set allowStale(e){this[ee]=!!e}get allowStale(){return this[ee]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[z]=e,k(this)}get maxAge(){return this[z]}set lengthCalculator(e){typeof e!="function"&&(e=ce),e!==this[V]&&(this[V]=e,this[I]=0,this[S].forEach(t=>{t.length=this[V](t.value,t.key),this[I]+=t.length})),k(this)}get lengthCalculator(){return this[V]}get length(){return this[I]}get itemCount(){return this[S].length}rforEach(e,t){t=t||this;for(let i=this[S].tail;i!==null;){const n=i.prev;Be(this,e,i,t),i=n}}forEach(e,t){t=t||this;for(let i=this[S].head;i!==null;){const n=i.next;Be(this,e,i,t),i=n}}keys(){return this[S].toArray().map(e=>e.key)}values(){return this[S].toArray().map(e=>e.value)}reset(){this[P]&&this[S]&&this[S].length&&this[S].forEach(e=>this[P](e.key,e.value)),this[O]=new Map,this[S]=new Rt,this[I]=0}dump(){return this[S].map(e=>se(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[S]}set(e,t,i){if(i=i||this[z],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const n=i?Date.now():0,u=this[V](t,e);if(this[O].has(e)){if(u>this[j])return X(this,this[O].get(e)),!1;const p=this[O].get(e).value;return this[P]&&(this[Ue]||this[P](e,p.value)),p.now=n,p.maxAge=i,p.value=t,this[I]+=u-p.length,p.length=u,this.get(e),k(this),!0}const m=new Mt(e,t,u,n,i);return m.length>this[j]?(this[P]&&this[P](e,t),!1):(this[I]+=m.length,this[S].unshift(m),this[O].set(e,this[S].head),k(this),!0)}has(e){if(!this[O].has(e))return!1;const t=this[O].get(e).value;return!se(this,t)}get(e){return he(this,e,!0)}peek(e){return he(this,e,!1)}pop(){const e=this[S].tail;return e?(X(this,e),e.value):null}del(e){X(this,this[O].get(e))}load(e){this.reset();const t=Date.now();for(let i=e.length-1;i>=0;i--){const n=e[i],u=n.e||0;if(u===0)this.set(n.k,n.v);else{const m=u-t;m>0&&this.set(n.k,n.v,m)}}}prune(){this[O].forEach((e,t)=>he(this,t,!1))}};const he=(r,e,t)=>{const i=r[O].get(e);if(i){const n=i.value;if(se(r,n)){if(X(r,i),!r[ee])return}else t&&(r[We]&&(i.value.now=Date.now()),r[S].unshiftNode(i));return n.value}},se=(r,e)=>{if(!e||!e.maxAge&&!r[z])return!1;const t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[z]&&t>r[z]},k=r=>{if(r[I]>r[j])for(let e=r[S].tail;r[I]>r[j]&&e!==null;){const t=e.prev;X(r,e),e=t}},X=(r,e)=>{if(e){const t=e.value;r[P]&&r[P](t.key,t.value),r[I]-=t.length,r[O].delete(t.key),r[S].removeNode(e)}};class Mt{constructor(e,t,i,n,u){this.key=e,this.value=t,this.length=i,this.now=n,this.maxAge=u||0}}const Be=(r,e,t,i)=>{let n=t.value;se(r,n)&&(X(r,t),r[ee]||(n=void 0)),n&&e.call(i,n.value,n.key,r)};var Ot=Ct,ae={};Object.defineProperty(ae,"__esModule",{value:!0});class Ft{constructor(e){if(this.substring=(t,i)=>this.source.substring(t,i),this.toString=(t,i)=>this.source,typeof e!="string")throw new TypeError("Argument must be a string");this.source=e,this._utf8Bytes=null,this._utf8Indexes=null}get utf8Bytes(){return this._utf8Bytes||this.encode(),this._utf8Bytes}get utf8Indexes(){return this._utf8Bytes||this.encode(),this._utf8Indexes}get content(){return this.source}get length(){return this.source.length}get hasMultiByteCharacters(){return this.utf8Indexes!==null}convertUtf8OffsetToUtf16(e){if(e<0)return 0;const t=this._utf8Bytes;if(e>=t.length-1)return this.source.length;const i=this.utf8Indexes;return i&&e>=this._mappingTableStartOffset?Ht(i,e-this._mappingTableStartOffset)+this._mappingTableStartOffset:e}convertUtf16OffsetToUtf8(e){if(e<0)return 0;const t=this._utf8Bytes;if(e>=this.source.length)return t.length-1;const i=this.utf8Indexes;return i&&e>=this._mappingTableStartOffset?i[e-this._mappingTableStartOffset]+this._mappingTableStartOffset:e}encode(){const e=this.source,t=e.length;let i,n=0,u=0;function m(y){const d=(t-y)*3;d<=255?i=new Uint8Array(t-y):d<=65535?i=new Uint16Array(t-y):i=new Uint32Array(t-y),u=y,i[n++]=0}const x=new Uint8Array(t*3+1);let p=0,T=0;for(;T<e.length;){let y;const d=e.charCodeAt(T);if(i&&(i[n++]=p-u),d<55296||d>57343)y=d;else if(d>=56320)y=65533;else if(T===t-1)y=65533;else{const R=e.charCodeAt(T+1);if(56320<=R&&R<=57343){i||m(T);const H=d&1023,C=R&1023;y=65536+(H<<10)+C,T+=1,i[n++]=p-u}else y=65533}let v,_;if(y<=127?(v=1,_=0):y<=2047?(v=2,_=192):y<=65535?(v=3,_=224):(v=4,_=240),v===1)x[p++]=y;else for(i||m(p),x[p++]=(y>>6*--v)+_;v>0;){const R=y>>6*(v-1);x[p++]=128|R&63,v-=1}T+=1}const F=x.slice(0,p+1);F[p]=0,this._utf8Bytes=F,i&&(this._utf8Indexes=i,this._mappingTableStartOffset=u)}}function Ht(r,e){let t=0,i=r.length;if(i===0)return 0;for(;t<i;){const n=Math.floor((t+i)/2);r[n]>=e?i=n:t=n+1}for(;t>0&&(t>=r.length||r[t]>e);)t--;return t>0&&r[t]===r[t-1]&&t--,t}ae.default=Ft;Object.defineProperty(ne,"__esModule",{value:!0});const Pt=Ot,g=te,ie=ae;function Ne(r){const e=g.onigasmH._malloc(r.utf8Bytes.length);return g.onigasmH.HEAPU8.set(r.utf8Bytes,e),e}function ge(r){const e=[];let t=0;for(;g.onigasmH.HEAPU8[r]!==0;)e[t++]=g.onigasmH.HEAPU8[r++];return e.join()}const De=new Pt({dispose:(r,e)=>{const t=g.onigasmH._malloc(e.regexTPtrs.length);if(g.onigasmH.HEAPU8.set(e.regexTPtrs,t),g.onigasmH._disposeCompiledPatterns(t,r.patterns.length)!==0){const n=ge(g.onigasmH._getLastError());throw new Error(n)}g.onigasmH._free(t)},max:1e3});class je{constructor(e){if(g.onigasmH===null)throw new Error("Onigasm has not been initialized, call loadWASM from 'onigasm' exports before using any other API");for(let t=0;t<e.length;t++)if(typeof e[t]!="string")throw new TypeError("First parameter to OnigScanner constructor must be array of (pattern) strings");this.sources=e.slice()}get patterns(){return this.sources.slice()}findNextMatch(e,t,i){t==null&&(t=0),typeof t=="function"&&(i=t,t=0);try{const n=this.findNextMatchSync(e,t);i(null,n)}catch(n){i(n)}}findNextMatchSync(e,t){t==null&&(t=0),t=this.convertToNumber(t);let i=De.get(this),n=0;if(!i){const d=g.onigasmH._malloc(4),v=[];for(let _=0;_<this.sources.length;_++){const R=this.sources[_],H=Ne(new ie.default(R));if(n=g.onigasmH._compilePattern(H,d),n!==0){const U=ge(g.onigasmH._getLastError());throw new Error(U)}const C=g.onigasmH.HEAP32[d/4];v.push(C),g.onigasmH._free(H)}i={regexTPtrs:new Uint8Array(Uint32Array.from(v).buffer)},g.onigasmH._free(d),De.set(this,i)}const u=e instanceof ie.default?e:new ie.default(this.convertToString(e)),m=Ne(u),x=g.onigasmH._malloc(8),p=g.onigasmH._malloc(i.regexTPtrs.length);if(g.onigasmH.HEAPU8.set(i.regexTPtrs,p),n=g.onigasmH._findBestMatch(p,this.sources.length,m,u.utf8Bytes.length-1,u.convertUtf16OffsetToUtf8(t),x),n!==0){const d=ge(g.onigasmH._getLastError());throw new Error(d)}const[T,F,y]=new Uint32Array(g.onigasmH.HEAPU32.buffer,x,3);if(g.onigasmH._free(m),g.onigasmH._free(x),g.onigasmH._free(p),y>0){const d=new Uint32Array(g.onigasmH.HEAPU32.buffer,F,y),v=[];let _=0,R=0;for(;_<y;){const H=R++;let C=d[_++],U=d[_++];u.hasMultiByteCharacters&&(C=u.convertUtf8OffsetToUtf16(C),U=u.convertUtf8OffsetToUtf16(U)),v.push({end:U,index:H,length:U-C,start:C})}return g.onigasmH._free(F),{captureIndices:v,index:T,scanner:this}}return null}convertToString(e){return e===void 0?"undefined":e===null?"null":e instanceof ie.default?e.content:e.toString()}convertToNumber(e){return e=parseInt(e,10),isFinite(e)||(e=0),e=Math.max(e,0),e}}ne.OnigScanner=je;ne.default=je;Object.defineProperty(pe,"__esModule",{value:!0});const It=ne;class Ut{constructor(e){this.source=e;try{this.scanner=new It.default([this.source])}catch{}}searchSync(e,t){let i;return t==null&&(t=0),i=this.scanner.findNextMatchSync(e,t),this.captureIndicesForMatch(e,i)}search(e,t,i){t==null&&(t=0),typeof t=="function"&&(i=t,t=0);try{const n=this.searchSync(e,t);i(null,n)}catch(n){i(n)}}testSync(e){return typeof this.source=="boolean"||typeof e=="boolean"?this.source===e:this.searchSync(e)!=null}test(e,t){typeof t!="function"&&(t=()=>{});try{t(null,this.testSync(e))}catch(i){t(i)}}captureIndicesForMatch(e,t){if(t!=null){const{captureIndices:i}=t;let n;e=this.scanner.convertToString(e);for(let u=0;u<i.length;u++)n=i[u],n.match=e.slice(n.start,n.end);return i}else return null}}pe.default=Ut;Object.defineProperty(Z,"__esModule",{value:!0});const Bt=te;var Nt=Z.loadWASM=Bt.loadWASM;const Dt=pe;Z.OnigRegExp=Dt.default;const Lt=ne;Z.OnigScanner=Lt.default;const Wt=ae;Z.OnigString=Wt.default;const zt=Object.freeze(Object.defineProperty({__proto__:null,default:Z,loadWASM:Nt},Symbol.toStringTag,{value:"Module"}));export{zt as i,Z as l};
